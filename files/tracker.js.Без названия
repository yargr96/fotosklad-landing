/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./Javascript.SDK/Tracker/v1/Tracking.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./Javascript.SDK/Modules/SdkModules.ts":
/*!**********************************************!*\
  !*** ./Javascript.SDK/Modules/SdkModules.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ModuleInfo_1 = __webpack_require__(/*! ./Webpush/ModuleInfo */ \"./Javascript.SDK/Modules/Webpush/ModuleInfo.ts\");\r\nvar TrackerSettings_1 = __webpack_require__(/*! tracker/v1/TrackerSettings */ \"./Javascript.SDK/Tracker/v1/TrackerSettings.ts\");\r\n__webpack_require__(/*! tracker/v1/GlobalTypes */ \"./Javascript.SDK/Tracker/v1/GlobalTypes.ts\");\r\nvar LoadingState;\r\n(function (LoadingState) {\r\n    LoadingState[\"NotLoaded\"] = \"NotLoaded\";\r\n    LoadingState[\"Loading\"] = \"Loading\";\r\n    LoadingState[\"Loaded\"] = \"Loaded\";\r\n    LoadingState[\"Failed\"] = \"Failed\";\r\n})(LoadingState || (LoadingState = {}));\r\nvar initializeModule = function (moduleInfo) {\r\n    return {\r\n        moduleInfo: moduleInfo,\r\n        loadingState: LoadingState.NotLoaded,\r\n        loadingPromise: null,\r\n        loadingError: null\r\n    };\r\n};\r\nvar modules = {\r\n    webpush: initializeModule(ModuleInfo_1.webpushModuleInfo)\r\n};\r\nvar getLoadingModuleInfo = function (moduleName) {\r\n    var module = modules[moduleName];\r\n    if (module == null)\r\n        throw new Error(\"[Mindbox.SDK] <core> Module \" + moduleName + \" is not registered.\");\r\n    return module;\r\n};\r\nexports.getModuleInfo = function (moduleName) {\r\n    return getLoadingModuleInfo(moduleName).moduleInfo;\r\n};\r\nexports.moduleExists = function (moduleName) {\r\n    return moduleName in modules;\r\n};\r\nexports.loadModule = function (settings, moduleName, version, logger) {\r\n    var loadingModuleInfo = getLoadingModuleInfo(moduleName);\r\n    switch (loadingModuleInfo.loadingState) {\r\n        case LoadingState.Loaded:\r\n            return Promise.resolve(getLoadedModule(loadingModuleInfo.moduleInfo));\r\n        case LoadingState.Loading:\r\n            return loadingModuleInfo.loadingPromise;\r\n        case LoadingState.NotLoaded:\r\n            loadingModuleInfo.loadingState = LoadingState.Loading;\r\n            loadingModuleInfo.loadingPromise = new Promise(function (resolve, reject) {\r\n                var tag = document.createElement(\"script\");\r\n                tag.src = TrackerSettings_1.getEffectiveApiUri(settings) + \"/scripts/modules/\" + loadingModuleInfo.moduleInfo.src + \"?version=\" + version;\r\n                tag.async = true;\r\n                var isModuleNotLoaded = function () {\r\n                    return tryGetLoadedModule(loadingModuleInfo.moduleInfo) ==\r\n                        null;\r\n                };\r\n                var finishModuleLoading = function () {\r\n                    try {\r\n                        loadingModuleInfo.loadingState =\r\n                            LoadingState.Loaded;\r\n                        resolve(getLoadedModule(loadingModuleInfo.moduleInfo));\r\n                    }\r\n                    catch (e) {\r\n                        loadingModuleInfo.loadingState =\r\n                            LoadingState.Failed;\r\n                        loadingModuleInfo.loadingError = e;\r\n                        reject(e);\r\n                    }\r\n                };\r\n                var additionalLoggerData = {\r\n                    \"Module name\": loadingModuleInfo.moduleInfo.name\r\n                };\r\n                tag.onload = function () {\r\n                    if (isModuleNotLoaded()) {\r\n                        logger.trackEvent(\"Loading module in another loop\", additionalLoggerData);\r\n                        setTimeout(function () {\r\n                            if (isModuleNotLoaded()) {\r\n                                logger.trackEvent(\"Couldn't load module in another loop\", additionalLoggerData);\r\n                            }\r\n                            else {\r\n                                logger.trackEvent(\"Have loaded module in another loop\", additionalLoggerData);\r\n                            }\r\n                            finishModuleLoading();\r\n                        }, 5000);\r\n                    }\r\n                    else {\r\n                        finishModuleLoading();\r\n                    }\r\n                };\r\n                tag.onerror = function () {\r\n                    reject(new Error(\"[Mindbox.SDK] <core> There was an error during loading of '\" + moduleName + \"' module\"));\r\n                };\r\n                try {\r\n                    document.head.insertAdjacentElement(\"beforeend\", tag);\r\n                }\r\n                catch (error) {\r\n                    reject(error);\r\n                }\r\n            });\r\n            return loadingModuleInfo.loadingPromise;\r\n        case LoadingState.Failed:\r\n            return loadingModuleInfo.loadingPromise;\r\n        default:\r\n            throw new Error(\"[Mindbox.SDK] <core> Unknown module loading state \" + loadingModuleInfo.loadingState + \".\");\r\n    }\r\n};\r\nvar tryGetLoadedModule = function (moduleInfo) {\r\n    return window.mindbox[moduleInfo.name];\r\n};\r\nvar getLoadedModule = function (moduleInfo) {\r\n    var result = tryGetLoadedModule(moduleInfo);\r\n    if (result == null)\r\n        throw new Error(\"[Mindbox.SDK] <core> Expected module not found in mindbox[\" + moduleInfo.name + \"]\");\r\n    return result;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9Nb2R1bGVzL1Nka01vZHVsZXMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9Nb2R1bGVzL1Nka01vZHVsZXMudHM/ZjcyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2R1bGVJbmZvLCBNb2R1bGVOYW1lIH0gZnJvbSBcIi4vTW9kdWxlSW5mb1wiO1xyXG5pbXBvcnQgeyB3ZWJwdXNoTW9kdWxlSW5mbyB9IGZyb20gXCIuL1dlYnB1c2gvTW9kdWxlSW5mb1wiO1xyXG5pbXBvcnQgeyBNb2R1bGUgfSBmcm9tIFwiLi9Nb2R1bGVcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBUcmFja2VyU2V0dGluZ3MsXHJcbiAgICBnZXRFZmZlY3RpdmVBcGlVcmlcclxufSBmcm9tIFwidHJhY2tlci92MS9UcmFja2VyU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgSVRyYWNrZXJMb2dnZXIgfSBmcm9tIFwidHJhY2tlci92MS9UcmFja2VyTG9nZ2VyL0lUcmFja2VyTG9nZ2VyXCI7XHJcbmltcG9ydCBcInRyYWNrZXIvdjEvR2xvYmFsVHlwZXNcIjtcclxuXHJcbmVudW0gTG9hZGluZ1N0YXRlIHtcclxuICAgIE5vdExvYWRlZCA9IFwiTm90TG9hZGVkXCIsXHJcbiAgICBMb2FkaW5nID0gXCJMb2FkaW5nXCIsXHJcbiAgICBMb2FkZWQgPSBcIkxvYWRlZFwiLFxyXG4gICAgRmFpbGVkID0gXCJGYWlsZWRcIlxyXG59XHJcblxyXG5pbnRlcmZhY2UgTG9hZGluZ01vZHVsZUluZm8ge1xyXG4gICAgbW9kdWxlSW5mbzogTW9kdWxlSW5mbztcclxuICAgIGxvYWRpbmdTdGF0ZTogTG9hZGluZ1N0YXRlO1xyXG4gICAgbG9hZGluZ1Byb21pc2U6IFByb21pc2U8TW9kdWxlPiB8IG51bGw7XHJcbiAgICBsb2FkaW5nRXJyb3I6IEVycm9yIHwgbnVsbDtcclxufVxyXG5cclxuY29uc3QgaW5pdGlhbGl6ZU1vZHVsZSA9IChtb2R1bGVJbmZvOiBNb2R1bGVJbmZvKTogTG9hZGluZ01vZHVsZUluZm8gPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtb2R1bGVJbmZvLFxyXG4gICAgICAgIGxvYWRpbmdTdGF0ZTogTG9hZGluZ1N0YXRlLk5vdExvYWRlZCxcclxuICAgICAgICBsb2FkaW5nUHJvbWlzZTogbnVsbCxcclxuICAgICAgICBsb2FkaW5nRXJyb3I6IG51bGxcclxuICAgIH07XHJcbn07XHJcblxyXG5jb25zdCBtb2R1bGVzOiB7IFtkZXNjcmlwdGlvbjogc3RyaW5nXTogTG9hZGluZ01vZHVsZUluZm8gfSA9IHtcclxuICAgIHdlYnB1c2g6IGluaXRpYWxpemVNb2R1bGUod2VicHVzaE1vZHVsZUluZm8pXHJcbn07XHJcblxyXG5jb25zdCBnZXRMb2FkaW5nTW9kdWxlSW5mbyA9IChtb2R1bGVOYW1lOiBNb2R1bGVOYW1lKTogTG9hZGluZ01vZHVsZUluZm8gPT4ge1xyXG4gICAgY29uc3QgbW9kdWxlID0gbW9kdWxlc1ttb2R1bGVOYW1lXTtcclxuICAgIGlmIChtb2R1bGUgPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgIGBbTWluZGJveC5TREtdIDxjb3JlPiBNb2R1bGUgJHttb2R1bGVOYW1lfSBpcyBub3QgcmVnaXN0ZXJlZC5gXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICByZXR1cm4gbW9kdWxlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldE1vZHVsZUluZm8gPSAobW9kdWxlTmFtZTogTW9kdWxlTmFtZSk6IE1vZHVsZUluZm8gPT5cclxuICAgIGdldExvYWRpbmdNb2R1bGVJbmZvKG1vZHVsZU5hbWUpLm1vZHVsZUluZm87XHJcblxyXG5leHBvcnQgY29uc3QgbW9kdWxlRXhpc3RzID0gKG1vZHVsZU5hbWU6IHN0cmluZyk6IG1vZHVsZU5hbWUgaXMgTW9kdWxlTmFtZSA9PiB7XHJcbiAgICByZXR1cm4gbW9kdWxlTmFtZSBpbiBtb2R1bGVzO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGxvYWRNb2R1bGUgPSAoXHJcbiAgICBzZXR0aW5nczogVHJhY2tlclNldHRpbmdzLFxyXG4gICAgbW9kdWxlTmFtZTogTW9kdWxlTmFtZSxcclxuICAgIHZlcnNpb246IHN0cmluZyxcclxuICAgIGxvZ2dlcjogSVRyYWNrZXJMb2dnZXJcclxuKTogUHJvbWlzZTxNb2R1bGU+ID0+IHtcclxuICAgIGNvbnN0IGxvYWRpbmdNb2R1bGVJbmZvID0gZ2V0TG9hZGluZ01vZHVsZUluZm8obW9kdWxlTmFtZSk7XHJcblxyXG4gICAgc3dpdGNoIChsb2FkaW5nTW9kdWxlSW5mby5sb2FkaW5nU3RhdGUpIHtcclxuICAgICAgICBjYXNlIExvYWRpbmdTdGF0ZS5Mb2FkZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBnZXRMb2FkZWRNb2R1bGUobG9hZGluZ01vZHVsZUluZm8ubW9kdWxlSW5mbylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlIExvYWRpbmdTdGF0ZS5Mb2FkaW5nOlxyXG4gICAgICAgICAgICByZXR1cm4gbG9hZGluZ01vZHVsZUluZm8ubG9hZGluZ1Byb21pc2U7XHJcbiAgICAgICAgY2FzZSBMb2FkaW5nU3RhdGUuTm90TG9hZGVkOlxyXG4gICAgICAgICAgICBsb2FkaW5nTW9kdWxlSW5mby5sb2FkaW5nU3RhdGUgPSBMb2FkaW5nU3RhdGUuTG9hZGluZztcclxuICAgICAgICAgICAgbG9hZGluZ01vZHVsZUluZm8ubG9hZGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZTxNb2R1bGU+KFxyXG4gICAgICAgICAgICAgICAgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFnLnNyYyA9IGAke2dldEVmZmVjdGl2ZUFwaVVyaShcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICApfS9zY3JpcHRzL21vZHVsZXMvJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ01vZHVsZUluZm8ubW9kdWxlSW5mby5zcmNcclxuICAgICAgICAgICAgICAgICAgICB9P3ZlcnNpb249JHt2ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFnLmFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNb2R1bGVOb3RMb2FkZWQgPSAoKTogYm9vbGVhbiA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlHZXRMb2FkZWRNb2R1bGUobG9hZGluZ01vZHVsZUluZm8ubW9kdWxlSW5mbykgPT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluaXNoTW9kdWxlTG9hZGluZyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdNb2R1bGVJbmZvLmxvYWRpbmdTdGF0ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9hZGluZ1N0YXRlLkxvYWRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TG9hZGVkTW9kdWxlKGxvYWRpbmdNb2R1bGVJbmZvLm1vZHVsZUluZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nTW9kdWxlSW5mby5sb2FkaW5nU3RhdGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvYWRpbmdTdGF0ZS5GYWlsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nTW9kdWxlSW5mby5sb2FkaW5nRXJyb3IgPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbExvZ2dlckRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiTW9kdWxlIG5hbWVcIjogbG9hZGluZ01vZHVsZUluZm8ubW9kdWxlSW5mby5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFnLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW9kdWxlTm90TG9hZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci50cmFja0V2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiTG9hZGluZyBtb2R1bGUgaW4gYW5vdGhlciBsb29wXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbExvZ2dlckRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW9kdWxlTm90TG9hZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLnRyYWNrRXZlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNvdWxkbid0IGxvYWQgbW9kdWxlIGluIGFub3RoZXIgbG9vcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbExvZ2dlckRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIudHJhY2tFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiSGF2ZSBsb2FkZWQgbW9kdWxlIGluIGFub3RoZXIgbG9vcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbExvZ2dlckRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaE1vZHVsZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoTW9kdWxlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGFnLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgW01pbmRib3guU0RLXSA8Y29yZT4gVGhlcmUgd2FzIGFuIGVycm9yIGR1cmluZyBsb2FkaW5nIG9mICcke21vZHVsZU5hbWV9JyBtb2R1bGVgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgdGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGxvYWRpbmdNb2R1bGVJbmZvLmxvYWRpbmdQcm9taXNlO1xyXG4gICAgICAgIGNhc2UgTG9hZGluZ1N0YXRlLkZhaWxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIGxvYWRpbmdNb2R1bGVJbmZvLmxvYWRpbmdQcm9taXNlO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBbTWluZGJveC5TREtdIDxjb3JlPiBVbmtub3duIG1vZHVsZSBsb2FkaW5nIHN0YXRlICR7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ01vZHVsZUluZm8ubG9hZGluZ1N0YXRlXHJcbiAgICAgICAgICAgICAgICB9LmBcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHRyeUdldExvYWRlZE1vZHVsZSA9IChtb2R1bGVJbmZvOiBNb2R1bGVJbmZvKTogTW9kdWxlID0+XHJcbiAgICB3aW5kb3cubWluZGJveFttb2R1bGVJbmZvLm5hbWVdO1xyXG5cclxuY29uc3QgZ2V0TG9hZGVkTW9kdWxlID0gKG1vZHVsZUluZm86IE1vZHVsZUluZm8pOiBNb2R1bGUgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdHJ5R2V0TG9hZGVkTW9kdWxlKG1vZHVsZUluZm8pO1xyXG4gICAgaWYgKHJlc3VsdCA9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgYFtNaW5kYm94LlNES10gPGNvcmU+IEV4cGVjdGVkIG1vZHVsZSBub3QgZm91bmQgaW4gbWluZGJveFske1xyXG4gICAgICAgICAgICAgICAgbW9kdWxlSW5mby5uYW1lXHJcbiAgICAgICAgICAgIH1dYFxyXG4gICAgICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFHQTtBQUtBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Modules/SdkModules.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Modules/Webpush/ModuleInfo.ts":
/*!******************************************************!*\
  !*** ./Javascript.SDK/Modules/Webpush/ModuleInfo.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// For quick check without firebase module\r\n// https://github.com/firebase/firebase-js-sdk/blob/master/packages/messaging/index.ts#L86\r\nvar isFirebaseCompliant = function () {\r\n    return navigator.cookieEnabled &&\r\n        \"serviceWorker\" in navigator &&\r\n        \"PushManager\" in window &&\r\n        \"Notification\" in window &&\r\n        \"fetch\" in window &&\r\n        ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\") &&\r\n        PushSubscription.prototype.hasOwnProperty(\"getKey\");\r\n};\r\nvar isSecureOrigin = function () {\r\n    return window.location.protocol == \"https:\" ||\r\n        [\"localhost\", \"127.0.0.1\", \"\"].some(function (ld) { return ld === window.location.hostname; });\r\n};\r\nexports.webpushModuleInfo = {\r\n    name: \"webpush\",\r\n    src: \"webpush.js\",\r\n    version: \"1.12.2\",\r\n    isSupportedByBrowser: function () { return isFirebaseCompliant() && isSecureOrigin(); }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9Nb2R1bGVzL1dlYnB1c2gvTW9kdWxlSW5mby50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL01vZHVsZXMvV2VicHVzaC9Nb2R1bGVJbmZvLnRzP2Q0YzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlSW5mbyB9IGZyb20gXCIuLi9Nb2R1bGVJbmZvXCI7XHJcblxyXG4vLyBGb3IgcXVpY2sgY2hlY2sgd2l0aG91dCBmaXJlYmFzZSBtb2R1bGVcclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iL21hc3Rlci9wYWNrYWdlcy9tZXNzYWdpbmcvaW5kZXgudHMjTDg2XHJcbmNvbnN0IGlzRmlyZWJhc2VDb21wbGlhbnQgPSAoKTogYm9vbGVhbiA9PlxyXG4gICAgbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQgJiZcclxuICAgIFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvciAmJlxyXG4gICAgXCJQdXNoTWFuYWdlclwiIGluIHdpbmRvdyAmJlxyXG4gICAgXCJOb3RpZmljYXRpb25cIiBpbiB3aW5kb3cgJiZcclxuICAgIFwiZmV0Y2hcIiBpbiB3aW5kb3cgJiZcclxuICAgIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KFwic2hvd05vdGlmaWNhdGlvblwiKSAmJlxyXG4gICAgUHVzaFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJnZXRLZXlcIik7XHJcblxyXG5jb25zdCBpc1NlY3VyZU9yaWdpbiA9ICgpOiBib29sZWFuID0+XHJcbiAgICB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT0gXCJodHRwczpcIiB8fFxyXG4gICAgW1wibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCIsIFwiXCJdLnNvbWUobGQgPT4gbGQgPT09IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSk7XHJcblxyXG5leHBvcnQgY29uc3Qgd2VicHVzaE1vZHVsZUluZm86IE1vZHVsZUluZm8gPSB7XHJcbiAgICBuYW1lOiBcIndlYnB1c2hcIixcclxuICAgIHNyYzogXCJ3ZWJwdXNoLmpzXCIsXHJcbiAgICB2ZXJzaW9uOiBcIjEuMTIuMlwiLFxyXG4gICAgaXNTdXBwb3J0ZWRCeUJyb3dzZXI6ICgpID0+IGlzRmlyZWJhc2VDb21wbGlhbnQoKSAmJiBpc1NlY3VyZU9yaWdpbigpXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Modules/Webpush/ModuleInfo.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/libs/console-polyfill.js":
/*!*********************************************************!*\
  !*** ./Javascript.SDK/Tracker/libs/console-polyfill.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// Console-polyfill. MIT license.\r\n// https://github.com/paulmillr/console-polyfill\r\n// Make it safe to do console.log() always.\r\n(function(global) {\r\n    \"use strict\";\r\n    global.console = global.console || {};\r\n    var con = global.console;\r\n    var prop, method;\r\n    var empty = {};\r\n    var dummy = function() {};\r\n    var properties = \"memory\".split(\",\");\r\n    var methods = (\r\n        \"assert,clear,count,debug,dir,dirxml,error,exception,group,\" +\r\n        \"groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,\" +\r\n        \"show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn\"\r\n    ).split(\",\");\r\n    while ((prop = properties.pop())) if (!con[prop]) con[prop] = empty;\r\n    while ((method = methods.pop())) if (!con[method]) con[method] = dummy;\r\n})(typeof window === \"undefined\" ? this : window);\r\n// Using `this` for web workers while maintaining compatibility with browser\r\n// targeted script loaders such as Browserify or Webpack where the only way to\r\n// get to the global object is via `window`.\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL2xpYnMvY29uc29sZS1wb2x5ZmlsbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvbGlicy9jb25zb2xlLXBvbHlmaWxsLmpzP2M1MzMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29uc29sZS1wb2x5ZmlsbC4gTUlUIGxpY2Vuc2UuXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXVsbWlsbHIvY29uc29sZS1wb2x5ZmlsbFxyXG4vLyBNYWtlIGl0IHNhZmUgdG8gZG8gY29uc29sZS5sb2coKSBhbHdheXMuXHJcbihmdW5jdGlvbihnbG9iYWwpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgZ2xvYmFsLmNvbnNvbGUgPSBnbG9iYWwuY29uc29sZSB8fCB7fTtcclxuICAgIHZhciBjb24gPSBnbG9iYWwuY29uc29sZTtcclxuICAgIHZhciBwcm9wLCBtZXRob2Q7XHJcbiAgICB2YXIgZW1wdHkgPSB7fTtcclxuICAgIHZhciBkdW1teSA9IGZ1bmN0aW9uKCkge307XHJcbiAgICB2YXIgcHJvcGVydGllcyA9IFwibWVtb3J5XCIuc3BsaXQoXCIsXCIpO1xyXG4gICAgdmFyIG1ldGhvZHMgPSAoXHJcbiAgICAgICAgXCJhc3NlcnQsY2xlYXIsY291bnQsZGVidWcsZGlyLGRpcnhtbCxlcnJvcixleGNlcHRpb24sZ3JvdXAsXCIgK1xyXG4gICAgICAgIFwiZ3JvdXBDb2xsYXBzZWQsZ3JvdXBFbmQsaW5mbyxsb2csbWFya1RpbWVsaW5lLHByb2ZpbGUscHJvZmlsZXMscHJvZmlsZUVuZCxcIiArXHJcbiAgICAgICAgXCJzaG93LHRhYmxlLHRpbWUsdGltZUVuZCx0aW1lbGluZSx0aW1lbGluZUVuZCx0aW1lU3RhbXAsdHJhY2Usd2FyblwiXHJcbiAgICApLnNwbGl0KFwiLFwiKTtcclxuICAgIHdoaWxlICgocHJvcCA9IHByb3BlcnRpZXMucG9wKCkpKSBpZiAoIWNvbltwcm9wXSkgY29uW3Byb3BdID0gZW1wdHk7XHJcbiAgICB3aGlsZSAoKG1ldGhvZCA9IG1ldGhvZHMucG9wKCkpKSBpZiAoIWNvblttZXRob2RdKSBjb25bbWV0aG9kXSA9IGR1bW15O1xyXG59KSh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IHdpbmRvdyk7XHJcbi8vIFVzaW5nIGB0aGlzYCBmb3Igd2ViIHdvcmtlcnMgd2hpbGUgbWFpbnRhaW5pbmcgY29tcGF0aWJpbGl0eSB3aXRoIGJyb3dzZXJcclxuLy8gdGFyZ2V0ZWQgc2NyaXB0IGxvYWRlcnMgc3VjaCBhcyBCcm93c2VyaWZ5IG9yIFdlYnBhY2sgd2hlcmUgdGhlIG9ubHkgd2F5IHRvXHJcbi8vIGdldCB0byB0aGUgZ2xvYmFsIG9iamVjdCBpcyB2aWEgYHdpbmRvd2AuXHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/libs/console-polyfill.js\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/libs/es6-promise.js":
/*!****************************************************!*\
  !*** ./Javascript.SDK/Tracker/libs/es6-promise.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process, global) {/*!\r\n * @overview es6-promise - a tiny implementation of Promises/A+.\r\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\r\n * @license   Licensed under MIT license\r\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\r\n * @version   4.0.5\r\n */\r\n/* /! ! ! ! !\r\n * Выпиливать и переводить на npm-пакет нельзя — этот файл подпилен Сахацким А. для поддержки IE8.\r\n * /! ! ! ! !\r\n */\r\n(function(global, factory) {\r\n     true\r\n        ? (module.exports = factory())\r\n        : undefined;\r\n})(this, function() {\r\n    \"use strict\";\r\n\r\n    function objectOrFunction(x) {\r\n        return typeof x === \"function\" || (typeof x === \"object\" && x !== null);\r\n    }\r\n\r\n    function isFunction(x) {\r\n        return typeof x === \"function\";\r\n    }\r\n\r\n    var _isArray = undefined;\r\n    if (!Array.isArray) {\r\n        _isArray = function(x) {\r\n            return Object.prototype.toString.call(x) === \"[object Array]\";\r\n        };\r\n    } else {\r\n        _isArray = Array.isArray;\r\n    }\r\n\r\n    var isArray = _isArray;\r\n\r\n    var len = 0;\r\n    var customSchedulerFn = undefined;\r\n\r\n    var asap = function asap(callback, arg) {\r\n        queue[len] = callback;\r\n        queue[len + 1] = arg;\r\n        len += 2;\r\n        if (len === 2) {\r\n            // If len is 2, that means that we need to schedule an async flush.\r\n            // If additional callbacks are queued before the queue is flushed, they\r\n            // will be processed by this flush that we are scheduling.\r\n            if (customSchedulerFn) {\r\n                customSchedulerFn(flush);\r\n            } else {\r\n                scheduleFlush();\r\n            }\r\n        }\r\n    };\r\n\r\n    function setScheduler(scheduleFn) {\r\n        customSchedulerFn = scheduleFn;\r\n    }\r\n\r\n    function setAsap(asapFn) {\r\n        asap = asapFn;\r\n    }\r\n\r\n    var browserWindow = typeof window !== \"undefined\" ? window : undefined;\r\n    var browserGlobal = browserWindow || {};\r\n    var BrowserMutationObserver =\r\n        browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\r\n    var isNode =\r\n        typeof self === \"undefined\" &&\r\n        typeof process !== \"undefined\" &&\r\n        {}.toString.call(process) === \"[object process]\";\r\n\r\n    // test for web worker but not in IE10\r\n    var isWorker =\r\n        typeof Uint8ClampedArray !== \"undefined\" &&\r\n        typeof importScripts !== \"undefined\" &&\r\n        typeof MessageChannel !== \"undefined\";\r\n\r\n    // node\r\n    function useNextTick() {\r\n        // node version 0.10.x displays a deprecation warning when nextTick is used recursively\r\n        // see https://github.com/cujojs/when/issues/410 for details\r\n        return function() {\r\n            return process.nextTick(flush);\r\n        };\r\n    }\r\n\r\n    function useMutationObserver() {\r\n        var iterations = 0;\r\n        var observer = new BrowserMutationObserver(flush);\r\n        var node = document.createTextNode(\"\");\r\n        observer.observe(node, { characterData: true });\r\n\r\n        return function() {\r\n            node.data = iterations = ++iterations % 2;\r\n        };\r\n    }\r\n\r\n    // web worker\r\n    function useMessageChannel() {\r\n        var channel = new MessageChannel();\r\n        channel.port1.onmessage = flush;\r\n        return function() {\r\n            return channel.port2.postMessage(0);\r\n        };\r\n    }\r\n\r\n    function useSetTimeout() {\r\n        // Store setTimeout reference so es6-promise will be unaffected by\r\n        // other code modifying setTimeout (like sinon.useFakeTimers())\r\n        var globalSetTimeout = setTimeout;\r\n        return function() {\r\n            return globalSetTimeout(flush, 1);\r\n        };\r\n    }\r\n\r\n    var queue = new Array(1000);\r\n    function flush() {\r\n        for (var i = 0; i < len; i += 2) {\r\n            var callback = queue[i];\r\n            var arg = queue[i + 1];\r\n\r\n            callback(arg);\r\n\r\n            queue[i] = undefined;\r\n            queue[i + 1] = undefined;\r\n        }\r\n\r\n        len = 0;\r\n    }\r\n    var scheduleFlush = undefined;\r\n    // Decide what async method to use to triggering processing of queued callbacks:\r\n    if (isNode) {\r\n        scheduleFlush = useNextTick();\r\n    } else if (BrowserMutationObserver) {\r\n        scheduleFlush = useMutationObserver();\r\n    } else if (isWorker) {\r\n        scheduleFlush = useMessageChannel();\r\n    } else {\r\n        scheduleFlush = useSetTimeout();\r\n    }\r\n\r\n    function then(onFulfillment, onRejection) {\r\n        var _arguments = arguments;\r\n\r\n        var parent = this;\r\n\r\n        var child = new this.constructor(noop);\r\n\r\n        if (child[PROMISE_ID] === undefined) {\r\n            makePromise(child);\r\n        }\r\n\r\n        var _state = parent._state;\r\n\r\n        if (_state) {\r\n            (function() {\r\n                var callback = _arguments[_state - 1];\r\n                asap(function() {\r\n                    return invokeCallback(\r\n                        _state,\r\n                        child,\r\n                        callback,\r\n                        parent._result\r\n                    );\r\n                });\r\n            })();\r\n        } else {\r\n            subscribe(parent, child, onFulfillment, onRejection);\r\n        }\r\n\r\n        return child;\r\n    }\r\n\r\n    /**\r\n  `Promise.resolve` returns a promise that will become resolved with the\r\n  passed `value`. It is shorthand for the following:\r\n\r\n  ```javascript\r\n  let promise = new Promise(function(resolve, reject){\r\n    resolve(1);\r\n  });\r\n\r\n  promise.then(function(value){\r\n    // value === 1\r\n  });\r\n  ```\r\n\r\n  Instead of writing the above, your code now simply becomes the following:\r\n\r\n  ```javascript\r\n  let promise = Promise.resolve(1);\r\n\r\n  promise.then(function(value){\r\n    // value === 1\r\n  });\r\n  ```\r\n\r\n  @method resolve\r\n  @static\r\n  @param {Any} value value that the returned promise will be resolved with\r\n  Useful for tooling.\r\n  @return {Promise} a promise that will become fulfilled with the given\r\n  `value`\r\n*/\r\n    function resolve(object) {\r\n        /*jshint validthis:true */\r\n        var Constructor = this;\r\n\r\n        if (\r\n            object &&\r\n            typeof object === \"object\" &&\r\n            object.constructor === Constructor\r\n        ) {\r\n            return object;\r\n        }\r\n\r\n        var promise = new Constructor(noop);\r\n        _resolve(promise, object);\r\n        return promise;\r\n    }\r\n\r\n    var PROMISE_ID = Math.random()\r\n        .toString(36)\r\n        .substring(16);\r\n\r\n    function noop() {}\r\n\r\n    var PENDING = void 0;\r\n    var FULFILLED = 1;\r\n    var REJECTED = 2;\r\n\r\n    var GET_THEN_ERROR = new ErrorObject();\r\n\r\n    function selfFulfillment() {\r\n        return new TypeError(\"You cannot resolve a promise with itself\");\r\n    }\r\n\r\n    function cannotReturnOwn() {\r\n        return new TypeError(\r\n            \"A promises callback cannot return that same promise.\"\r\n        );\r\n    }\r\n\r\n    function getThen(promise) {\r\n        try {\r\n            return promise.then;\r\n        } catch (error) {\r\n            GET_THEN_ERROR.error = error;\r\n            return GET_THEN_ERROR;\r\n        }\r\n    }\r\n\r\n    function tryThen(then, value, fulfillmentHandler, rejectionHandler) {\r\n        try {\r\n            then.call(value, fulfillmentHandler, rejectionHandler);\r\n        } catch (e) {\r\n            return e;\r\n        }\r\n    }\r\n\r\n    function handleForeignThenable(promise, thenable, then) {\r\n        asap(function(promise) {\r\n            var sealed = false;\r\n            var error = tryThen(\r\n                then,\r\n                thenable,\r\n                function(value) {\r\n                    if (sealed) {\r\n                        return;\r\n                    }\r\n                    sealed = true;\r\n                    if (thenable !== value) {\r\n                        _resolve(promise, value);\r\n                    } else {\r\n                        fulfill(promise, value);\r\n                    }\r\n                },\r\n                function(reason) {\r\n                    if (sealed) {\r\n                        return;\r\n                    }\r\n                    sealed = true;\r\n\r\n                    _reject(promise, reason);\r\n                },\r\n                \"Settle: \" + (promise._label || \" unknown promise\")\r\n            );\r\n\r\n            if (!sealed && error) {\r\n                sealed = true;\r\n                _reject(promise, error);\r\n            }\r\n        }, promise);\r\n    }\r\n\r\n    function handleOwnThenable(promise, thenable) {\r\n        if (thenable._state === FULFILLED) {\r\n            fulfill(promise, thenable._result);\r\n        } else if (thenable._state === REJECTED) {\r\n            _reject(promise, thenable._result);\r\n        } else {\r\n            subscribe(\r\n                thenable,\r\n                undefined,\r\n                function(value) {\r\n                    return _resolve(promise, value);\r\n                },\r\n                function(reason) {\r\n                    return _reject(promise, reason);\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    function handleMaybeThenable(promise, maybeThenable, then$$) {\r\n        if (\r\n            maybeThenable.constructor === promise.constructor &&\r\n            then$$ === then &&\r\n            maybeThenable.constructor.resolve === resolve\r\n        ) {\r\n            handleOwnThenable(promise, maybeThenable);\r\n        } else {\r\n            if (then$$ === GET_THEN_ERROR) {\r\n                _reject(promise, GET_THEN_ERROR.error);\r\n            } else if (then$$ === undefined) {\r\n                fulfill(promise, maybeThenable);\r\n            } else if (isFunction(then$$)) {\r\n                handleForeignThenable(promise, maybeThenable, then$$);\r\n            } else {\r\n                fulfill(promise, maybeThenable);\r\n            }\r\n        }\r\n    }\r\n\r\n    function _resolve(promise, value) {\r\n        if (promise === value) {\r\n            _reject(promise, selfFulfillment());\r\n        } else if (objectOrFunction(value)) {\r\n            handleMaybeThenable(promise, value, getThen(value));\r\n        } else {\r\n            fulfill(promise, value);\r\n        }\r\n    }\r\n\r\n    function publishRejection(promise) {\r\n        if (promise._onerror) {\r\n            promise._onerror(promise._result);\r\n        }\r\n\r\n        publish(promise);\r\n    }\r\n\r\n    function fulfill(promise, value) {\r\n        if (promise._state !== PENDING) {\r\n            return;\r\n        }\r\n\r\n        promise._result = value;\r\n        promise._state = FULFILLED;\r\n\r\n        if (promise._subscribers.length !== 0) {\r\n            asap(publish, promise);\r\n        }\r\n    }\r\n\r\n    function _reject(promise, reason) {\r\n        if (promise._state !== PENDING) {\r\n            return;\r\n        }\r\n        promise._state = REJECTED;\r\n        promise._result = reason;\r\n\r\n        asap(publishRejection, promise);\r\n    }\r\n\r\n    function subscribe(parent, child, onFulfillment, onRejection) {\r\n        var _subscribers = parent._subscribers;\r\n        var length = _subscribers.length;\r\n\r\n        parent._onerror = null;\r\n\r\n        _subscribers[length] = child;\r\n        _subscribers[length + FULFILLED] = onFulfillment;\r\n        _subscribers[length + REJECTED] = onRejection;\r\n\r\n        if (length === 0 && parent._state) {\r\n            asap(publish, parent);\r\n        }\r\n    }\r\n\r\n    function publish(promise) {\r\n        var subscribers = promise._subscribers;\r\n        var settled = promise._state;\r\n\r\n        if (subscribers.length === 0) {\r\n            return;\r\n        }\r\n\r\n        var child = undefined,\r\n            callback = undefined,\r\n            detail = promise._result;\r\n\r\n        for (var i = 0; i < subscribers.length; i += 3) {\r\n            child = subscribers[i];\r\n            callback = subscribers[i + settled];\r\n\r\n            if (child) {\r\n                invokeCallback(settled, child, callback, detail);\r\n            } else {\r\n                callback(detail);\r\n            }\r\n        }\r\n\r\n        promise._subscribers.length = 0;\r\n    }\r\n\r\n    function ErrorObject() {\r\n        this.error = null;\r\n    }\r\n\r\n    var TRY_CATCH_ERROR = new ErrorObject();\r\n\r\n    function tryCatch(callback, detail) {\r\n        try {\r\n            return callback(detail);\r\n        } catch (e) {\r\n            TRY_CATCH_ERROR.error = e;\r\n            return TRY_CATCH_ERROR;\r\n        }\r\n    }\r\n\r\n    function invokeCallback(settled, promise, callback, detail) {\r\n        var hasCallback = isFunction(callback),\r\n            value = undefined,\r\n            error = undefined,\r\n            succeeded = undefined,\r\n            failed = undefined;\r\n\r\n        if (hasCallback) {\r\n            value = tryCatch(callback, detail);\r\n\r\n            if (value === TRY_CATCH_ERROR) {\r\n                failed = true;\r\n                error = value.error;\r\n                value = null;\r\n            } else {\r\n                succeeded = true;\r\n            }\r\n\r\n            if (promise === value) {\r\n                _reject(promise, cannotReturnOwn());\r\n                return;\r\n            }\r\n        } else {\r\n            value = detail;\r\n            succeeded = true;\r\n        }\r\n\r\n        if (promise._state !== PENDING) {\r\n            // noop\r\n        } else if (hasCallback && succeeded) {\r\n            _resolve(promise, value);\r\n        } else if (failed) {\r\n            _reject(promise, error);\r\n        } else if (settled === FULFILLED) {\r\n            fulfill(promise, value);\r\n        } else if (settled === REJECTED) {\r\n            _reject(promise, value);\r\n        }\r\n    }\r\n\r\n    function initializePromise(promise, resolver) {\r\n        try {\r\n            resolver(\r\n                function resolvePromise(value) {\r\n                    _resolve(promise, value);\r\n                },\r\n                function rejectPromise(reason) {\r\n                    _reject(promise, reason);\r\n                }\r\n            );\r\n        } catch (e) {\r\n            _reject(promise, e);\r\n        }\r\n    }\r\n\r\n    var id = 0;\r\n    function nextId() {\r\n        return id++;\r\n    }\r\n\r\n    function makePromise(promise) {\r\n        promise[PROMISE_ID] = id++;\r\n        promise._state = undefined;\r\n        promise._result = undefined;\r\n        promise._subscribers = [];\r\n    }\r\n\r\n    function Enumerator(Constructor, input) {\r\n        this._instanceConstructor = Constructor;\r\n        this.promise = new Constructor(noop);\r\n\r\n        if (!this.promise[PROMISE_ID]) {\r\n            makePromise(this.promise);\r\n        }\r\n\r\n        if (isArray(input)) {\r\n            this._input = input;\r\n            this.length = input.length;\r\n            this._remaining = input.length;\r\n\r\n            this._result = new Array(this.length);\r\n\r\n            if (this.length === 0) {\r\n                fulfill(this.promise, this._result);\r\n            } else {\r\n                this.length = this.length || 0;\r\n                this._enumerate();\r\n                if (this._remaining === 0) {\r\n                    fulfill(this.promise, this._result);\r\n                }\r\n            }\r\n        } else {\r\n            _reject(this.promise, validationError());\r\n        }\r\n    }\r\n\r\n    function validationError() {\r\n        return new Error(\"Array Methods must be provided an Array\");\r\n    }\r\n\r\n    Enumerator.prototype._enumerate = function() {\r\n        var length = this.length;\r\n        var _input = this._input;\r\n\r\n        for (var i = 0; this._state === PENDING && i < length; i++) {\r\n            this._eachEntry(_input[i], i);\r\n        }\r\n    };\r\n\r\n    Enumerator.prototype._eachEntry = function(entry, i) {\r\n        var c = this._instanceConstructor;\r\n        var resolve$$ = c.resolve;\r\n\r\n        if (resolve$$ === resolve) {\r\n            var _then = getThen(entry);\r\n\r\n            if (_then === then && entry._state !== PENDING) {\r\n                this._settledAt(entry._state, i, entry._result);\r\n            } else if (typeof _then !== \"function\") {\r\n                this._remaining--;\r\n                this._result[i] = entry;\r\n            } else if (c === Promise) {\r\n                var promise = new c(noop);\r\n                handleMaybeThenable(promise, entry, _then);\r\n                this._willSettleAt(promise, i);\r\n            } else {\r\n                this._willSettleAt(\r\n                    new c(function(resolve$$) {\r\n                        return resolve$$(entry);\r\n                    }),\r\n                    i\r\n                );\r\n            }\r\n        } else {\r\n            this._willSettleAt(resolve$$(entry), i);\r\n        }\r\n    };\r\n\r\n    Enumerator.prototype._settledAt = function(state, i, value) {\r\n        var promise = this.promise;\r\n\r\n        if (promise._state === PENDING) {\r\n            this._remaining--;\r\n\r\n            if (state === REJECTED) {\r\n                _reject(promise, value);\r\n            } else {\r\n                this._result[i] = value;\r\n            }\r\n        }\r\n\r\n        if (this._remaining === 0) {\r\n            fulfill(promise, this._result);\r\n        }\r\n    };\r\n\r\n    Enumerator.prototype._willSettleAt = function(promise, i) {\r\n        var enumerator = this;\r\n\r\n        subscribe(\r\n            promise,\r\n            undefined,\r\n            function(value) {\r\n                return enumerator._settledAt(FULFILLED, i, value);\r\n            },\r\n            function(reason) {\r\n                return enumerator._settledAt(REJECTED, i, reason);\r\n            }\r\n        );\r\n    };\r\n\r\n    /**\r\n  `Promise.all` accepts an array of promises, and returns a new promise which\r\n  is fulfilled with an array of fulfillment values for the passed promises, or\r\n  rejected with the reason of the first passed promise to be rejected. It casts all\r\n  elements of the passed iterable to promises as it runs this algorithm.\r\n\r\n  Example:\r\n\r\n  ```javascript\r\n  let promise1 = resolve(1);\r\n  let promise2 = resolve(2);\r\n  let promise3 = resolve(3);\r\n  let promises = [ promise1, promise2, promise3 ];\r\n\r\n  Promise.all(promises).then(function(array){\r\n    // The array here would be [ 1, 2, 3 ];\r\n  });\r\n  ```\r\n\r\n  If any of the `promises` given to `all` are rejected, the first promise\r\n  that is rejected will be given as an argument to the returned promises's\r\n  rejection handler. For example:\r\n\r\n  Example:\r\n\r\n  ```javascript\r\n  let promise1 = resolve(1);\r\n  let promise2 = reject(new Error(\"2\"));\r\n  let promise3 = reject(new Error(\"3\"));\r\n  let promises = [ promise1, promise2, promise3 ];\r\n\r\n  Promise.all(promises).then(function(array){\r\n    // Code here never runs because there are rejected promises!\r\n  }, function(error) {\r\n    // error.message === \"2\"\r\n  });\r\n  ```\r\n\r\n  @method all\r\n  @static\r\n  @param {Array} entries array of promises\r\n  @param {String} label optional string for labeling the promise.\r\n  Useful for tooling.\r\n  @return {Promise} promise that is fulfilled when all `promises` have been\r\n  fulfilled, or rejected if any of them become rejected.\r\n  @static\r\n*/\r\n    function all(entries) {\r\n        return new Enumerator(this, entries).promise;\r\n    }\r\n\r\n    /**\r\n  `Promise.race` returns a new promise which is settled in the same way as the\r\n  first passed promise to settle.\r\n\r\n  Example:\r\n\r\n  ```javascript\r\n  let promise1 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      resolve('promise 1');\r\n    }, 200);\r\n  });\r\n\r\n  let promise2 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      resolve('promise 2');\r\n    }, 100);\r\n  });\r\n\r\n  Promise.race([promise1, promise2]).then(function(result){\r\n    // result === 'promise 2' because it was resolved before promise1\r\n    // was resolved.\r\n  });\r\n  ```\r\n\r\n  `Promise.race` is deterministic in that only the state of the first\r\n  settled promise matters. For example, even if other promises given to the\r\n  `promises` array argument are resolved, but the first settled promise has\r\n  become rejected before the other promises became fulfilled, the returned\r\n  promise will become rejected:\r\n\r\n  ```javascript\r\n  let promise1 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      resolve('promise 1');\r\n    }, 200);\r\n  });\r\n\r\n  let promise2 = new Promise(function(resolve, reject){\r\n    setTimeout(function(){\r\n      reject(new Error('promise 2'));\r\n    }, 100);\r\n  });\r\n\r\n  Promise.race([promise1, promise2]).then(function(result){\r\n    // Code here never runs\r\n  }, function(reason){\r\n    // reason.message === 'promise 2' because promise 2 became rejected before\r\n    // promise 1 became fulfilled\r\n  });\r\n  ```\r\n\r\n  An example real-world use case is implementing timeouts:\r\n\r\n  ```javascript\r\n  Promise.race([ajax('foo.json'), timeout(5000)])\r\n  ```\r\n\r\n  @method race\r\n  @static\r\n  @param {Array} promises array of promises to observe\r\n  Useful for tooling.\r\n  @return {Promise} a promise which settles in the same way as the first passed\r\n  promise to settle.\r\n*/\r\n    function race(entries) {\r\n        /*jshint validthis:true */\r\n        var Constructor = this;\r\n\r\n        if (!isArray(entries)) {\r\n            return new Constructor(function(_, reject) {\r\n                return reject(new TypeError(\"You must pass an array to race.\"));\r\n            });\r\n        } else {\r\n            return new Constructor(function(resolve, reject) {\r\n                var length = entries.length;\r\n                for (var i = 0; i < length; i++) {\r\n                    Constructor.resolve(entries[i]).then(resolve, reject);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n  `Promise.reject` returns a promise rejected with the passed `reason`.\r\n  It is shorthand for the following:\r\n\r\n  ```javascript\r\n  let promise = new Promise(function(resolve, reject){\r\n    reject(new Error('WHOOPS'));\r\n  });\r\n\r\n  promise.then(function(value){\r\n    // Code here doesn't run because the promise is rejected!\r\n  }, function(reason){\r\n    // reason.message === 'WHOOPS'\r\n  });\r\n  ```\r\n\r\n  Instead of writing the above, your code now simply becomes the following:\r\n\r\n  ```javascript\r\n  let promise = Promise.reject(new Error('WHOOPS'));\r\n\r\n  promise.then(function(value){\r\n    // Code here doesn't run because the promise is rejected!\r\n  }, function(reason){\r\n    // reason.message === 'WHOOPS'\r\n  });\r\n  ```\r\n\r\n  @method reject\r\n  @static\r\n  @param {Any} reason value that the returned promise will be rejected with.\r\n  Useful for tooling.\r\n  @return {Promise} a promise rejected with the given `reason`.\r\n*/\r\n    function reject(reason) {\r\n        /*jshint validthis:true */\r\n        var Constructor = this;\r\n        var promise = new Constructor(noop);\r\n        _reject(promise, reason);\r\n        return promise;\r\n    }\r\n\r\n    function needsResolver() {\r\n        throw new TypeError(\r\n            \"You must pass a resolver function as the first argument to the promise constructor\"\r\n        );\r\n    }\r\n\r\n    function needsNew() {\r\n        throw new TypeError(\r\n            \"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\"\r\n        );\r\n    }\r\n\r\n    /**\r\n  Promise objects represent the eventual result of an asynchronous operation. The\r\n  primary way of interacting with a promise is through its `then` method, which\r\n  registers callbacks to receive either a promise's eventual value or the reason\r\n  why the promise cannot be fulfilled.\r\n\r\n  Terminology\r\n  -----------\r\n\r\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\r\n  - `thenable` is an object or function that defines a `then` method.\r\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\r\n  - `exception` is a value that is thrown using the throw statement.\r\n  - `reason` is a value that indicates why a promise was rejected.\r\n  - `settled` the final resting state of a promise, fulfilled or rejected.\r\n\r\n  A promise can be in one of three states: pending, fulfilled, or rejected.\r\n\r\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\r\n  state.  Promises that are rejected have a rejection reason and are in the\r\n  rejected state.  A fulfillment value is never a thenable.\r\n\r\n  Promises can also be said to *resolve* a value.  If this value is also a\r\n  promise, then the original promise's settled state will match the value's\r\n  settled state.  So a promise that *resolves* a promise that rejects will\r\n  itself reject, and a promise that *resolves* a promise that fulfills will\r\n  itself fulfill.\r\n\r\n\r\n  Basic Usage:\r\n  ------------\r\n\r\n  ```js\r\n  let promise = new Promise(function(resolve, reject) {\r\n    // on success\r\n    resolve(value);\r\n\r\n    // on failure\r\n    reject(reason);\r\n  });\r\n\r\n  promise.then(function(value) {\r\n    // on fulfillment\r\n  }, function(reason) {\r\n    // on rejection\r\n  });\r\n  ```\r\n\r\n  Advanced Usage:\r\n  ---------------\r\n\r\n  Promises shine when abstracting away asynchronous interactions such as\r\n  `XMLHttpRequest`s.\r\n\r\n  ```js\r\n  function getJSON(url) {\r\n    return new Promise(function(resolve, reject){\r\n      let xhr = new XMLHttpRequest();\r\n\r\n      xhr.open('GET', url);\r\n      xhr.onreadystatechange = handler;\r\n      xhr.responseType = 'json';\r\n      xhr.setRequestHeader('Accept', 'application/json');\r\n      xhr.send();\r\n\r\n      function handler() {\r\n        if (this.readyState === this.DONE) {\r\n          if (this.status === 200) {\r\n            resolve(this.response);\r\n          } else {\r\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\r\n          }\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  getJSON('/posts.json').then(function(json) {\r\n    // on fulfillment\r\n  }, function(reason) {\r\n    // on rejection\r\n  });\r\n  ```\r\n\r\n  Unlike callbacks, promises are great composable primitives.\r\n\r\n  ```js\r\n  Promise.all([\r\n    getJSON('/posts'),\r\n    getJSON('/comments')\r\n  ]).then(function(values){\r\n    values[0] // => postsJSON\r\n    values[1] // => commentsJSON\r\n\r\n    return values;\r\n  });\r\n  ```\r\n\r\n  @class Promise\r\n  @param {function} resolver\r\n  Useful for tooling.\r\n  @constructor\r\n*/\r\n    function Promise(resolver) {\r\n        this[PROMISE_ID] = nextId();\r\n        this._result = this._state = undefined;\r\n        this._subscribers = [];\r\n\r\n        if (noop !== resolver) {\r\n            typeof resolver !== \"function\" && needsResolver();\r\n            this instanceof Promise\r\n                ? initializePromise(this, resolver)\r\n                : needsNew();\r\n        }\r\n    }\r\n\r\n    Promise.all = all;\r\n    Promise.race = race;\r\n    Promise.resolve = resolve;\r\n    Promise.reject = reject;\r\n    Promise._setScheduler = setScheduler;\r\n    Promise._setAsap = setAsap;\r\n    Promise._asap = asap;\r\n\r\n    Promise.prototype = {\r\n        constructor: Promise,\r\n\r\n        /**\r\n    The primary way of interacting with a promise is through its `then` method,\r\n    which registers callbacks to receive either a promise's eventual value or the\r\n    reason why the promise cannot be fulfilled.\r\n  \r\n    ```js\r\n    findUser().then(function(user){\r\n      // user is available\r\n    }, function(reason){\r\n      // user is unavailable, and you are given the reason why\r\n    });\r\n    ```\r\n  \r\n    Chaining\r\n    --------\r\n  \r\n    The return value of `then` is itself a promise.  This second, 'downstream'\r\n    promise is resolved with the return value of the first promise's fulfillment\r\n    or rejection handler, or rejected if the handler throws an exception.\r\n  \r\n    ```js\r\n    findUser().then(function (user) {\r\n      return user.name;\r\n    }, function (reason) {\r\n      return 'default name';\r\n    }).then(function (userName) {\r\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\r\n      // will be `'default name'`\r\n    });\r\n  \r\n    findUser().then(function (user) {\r\n      throw new Error('Found user, but still unhappy');\r\n    }, function (reason) {\r\n      throw new Error('`findUser` rejected and we're unhappy');\r\n    }).then(function (value) {\r\n      // never reached\r\n    }, function (reason) {\r\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\r\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\r\n    });\r\n    ```\r\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\r\n  \r\n    ```js\r\n    findUser().then(function (user) {\r\n      throw new PedagogicalException('Upstream error');\r\n    }).then(function (value) {\r\n      // never reached\r\n    }).then(function (value) {\r\n      // never reached\r\n    }, function (reason) {\r\n      // The `PedgagocialException` is propagated all the way down to here\r\n    });\r\n    ```\r\n  \r\n    Assimilation\r\n    ------------\r\n  \r\n    Sometimes the value you want to propagate to a downstream promise can only be\r\n    retrieved asynchronously. This can be achieved by returning a promise in the\r\n    fulfillment or rejection handler. The downstream promise will then be pending\r\n    until the returned promise is settled. This is called *assimilation*.\r\n  \r\n    ```js\r\n    findUser().then(function (user) {\r\n      return findCommentsByAuthor(user);\r\n    }).then(function (comments) {\r\n      // The user's comments are now available\r\n    });\r\n    ```\r\n  \r\n    If the assimliated promise rejects, then the downstream promise will also reject.\r\n  \r\n    ```js\r\n    findUser().then(function (user) {\r\n      return findCommentsByAuthor(user);\r\n    }).then(function (comments) {\r\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\r\n    }, function (reason) {\r\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\r\n    });\r\n    ```\r\n  \r\n    Simple Example\r\n    --------------\r\n  \r\n    Synchronous Example\r\n  \r\n    ```javascript\r\n    let result;\r\n  \r\n    try {\r\n      result = findResult();\r\n      // success\r\n    } catch(reason) {\r\n      // failure\r\n    }\r\n    ```\r\n  \r\n    Errback Example\r\n  \r\n    ```js\r\n    findResult(function(result, err){\r\n      if (err) {\r\n        // failure\r\n      } else {\r\n        // success\r\n      }\r\n    });\r\n    ```\r\n  \r\n    Promise Example;\r\n  \r\n    ```javascript\r\n    findResult().then(function(result){\r\n      // success\r\n    }, function(reason){\r\n      // failure\r\n    });\r\n    ```\r\n  \r\n    Advanced Example\r\n    --------------\r\n  \r\n    Synchronous Example\r\n  \r\n    ```javascript\r\n    let author, books;\r\n  \r\n    try {\r\n      author = findAuthor();\r\n      books  = findBooksByAuthor(author);\r\n      // success\r\n    } catch(reason) {\r\n      // failure\r\n    }\r\n    ```\r\n  \r\n    Errback Example\r\n  \r\n    ```js\r\n  \r\n    function foundBooks(books) {\r\n  \r\n    }\r\n  \r\n    function failure(reason) {\r\n  \r\n    }\r\n  \r\n    findAuthor(function(author, err){\r\n      if (err) {\r\n        failure(err);\r\n        // failure\r\n      } else {\r\n        try {\r\n          findBoooksByAuthor(author, function(books, err) {\r\n            if (err) {\r\n              failure(err);\r\n            } else {\r\n              try {\r\n                foundBooks(books);\r\n              } catch(reason) {\r\n                failure(reason);\r\n              }\r\n            }\r\n          });\r\n        } catch(error) {\r\n          failure(err);\r\n        }\r\n        // success\r\n      }\r\n    });\r\n    ```\r\n  \r\n    Promise Example;\r\n  \r\n    ```javascript\r\n    findAuthor().\r\n      then(findBooksByAuthor).\r\n      then(function(books){\r\n        // found books\r\n    }).catch(function(reason){\r\n      // something went wrong\r\n    });\r\n    ```\r\n  \r\n    @method then\r\n    @param {Function} onFulfilled\r\n    @param {Function} onRejected\r\n    Useful for tooling.\r\n    @return {Promise}\r\n  */\r\n        then: then\r\n\r\n        /**\r\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\r\n    as the catch block of a try/catch statement.\r\n  \r\n    ```js\r\n    function findAuthor(){\r\n      throw new Error('couldn't find that author');\r\n    }\r\n  \r\n    // synchronous\r\n    try {\r\n      findAuthor();\r\n    } catch(reason) {\r\n      // something went wrong\r\n    }\r\n  \r\n    // async with promises\r\n    findAuthor().catch(function(reason){\r\n      // something went wrong\r\n    });\r\n    ```\r\n  \r\n    @method catch\r\n    @param {Function} onRejection\r\n    Useful for tooling.\r\n    @return {Promise}\r\n  'catch': function _catch(onRejection) {\r\n    return this.then(null, onRejection);\r\n  }\r\n  */\r\n    };\r\n\r\n    function polyfill() {\r\n        var local = undefined;\r\n\r\n        if (typeof global !== \"undefined\") {\r\n            local = global;\r\n        } else if (typeof self !== \"undefined\") {\r\n            local = self;\r\n        } else {\r\n            try {\r\n                local = Function(\"return this\")();\r\n            } catch (e) {\r\n                throw new Error(\r\n                    \"polyfill failed because global object is unavailable in this environment\"\r\n                );\r\n            }\r\n        }\r\n\r\n        var P = local.Promise;\r\n\r\n        if (P) {\r\n            var promiseToString = null;\r\n            try {\r\n                promiseToString = Object.prototype.toString.call(P.resolve());\r\n            } catch (e) {\r\n                // silently ignored\r\n            }\r\n\r\n            if (promiseToString === \"[object Promise]\" && !P.cast) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        local.Promise = Promise;\r\n    }\r\n\r\n    // Strange compat..\r\n    Promise.polyfill = polyfill;\r\n    Promise.Promise = Promise;\r\n\r\n    return Promise;\r\n});\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL2xpYnMvZXM2LXByb21pc2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL2xpYnMvZXM2LXByb21pc2UuanM/ZjMyNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxyXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxyXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXHJcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcclxuICogQHZlcnNpb24gICA0LjAuNVxyXG4gKi9cclxuLyogLyEgISAhICEgIVxyXG4gKiDQktGL0L/QuNC70LjQstCw0YLRjCDQuCDQv9C10YDQtdCy0L7QtNC40YLRjCDQvdCwIG5wbS3Qv9Cw0LrQtdGCINC90LXQu9GM0LfRjyDigJQg0Y3RgtC+0YIg0YTQsNC50Lsg0L/QvtC00L/QuNC70LXQvSDQodCw0YXQsNGG0LrQuNC8INCQLiDQtNC70Y8g0L/QvtC00LTQtdGA0LbQutC4IElFOC5cclxuICogLyEgISAhICEgIVxyXG4gKi9cclxuKGZ1bmN0aW9uKGdsb2JhbCwgZmFjdG9yeSkge1xyXG4gICAgdHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIlxyXG4gICAgICAgID8gKG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpKVxyXG4gICAgICAgIDogdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWRcclxuICAgICAgICA/IGRlZmluZShmYWN0b3J5KVxyXG4gICAgICAgIDogKGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpKTtcclxufSkodGhpcywgZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIiB8fCAodHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgeCAhPT0gbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcImZ1bmN0aW9uXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KSB7XHJcbiAgICAgICAgX2lzQXJyYXkgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcclxuICAgICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcclxuXHJcbiAgICB2YXIgbGVuID0gMDtcclxuICAgIHZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICB2YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xyXG4gICAgICAgIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcclxuICAgICAgICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcclxuICAgICAgICBsZW4gKz0gMjtcclxuICAgICAgICBpZiAobGVuID09PSAyKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cclxuICAgICAgICAgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcclxuICAgICAgICAgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxyXG4gICAgICAgICAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcclxuICAgICAgICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcclxuICAgICAgICBhc2FwID0gYXNhcEZuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcclxuICAgIHZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcclxuICAgIHZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9XHJcbiAgICAgICAgYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcclxuICAgIHZhciBpc05vZGUgPVxyXG4gICAgICAgIHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiICYmXHJcbiAgICAgICAgdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcclxuICAgICAgICB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIjtcclxuXHJcbiAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxyXG4gICAgdmFyIGlzV29ya2VyID1cclxuICAgICAgICB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09IFwidW5kZWZpbmVkXCIgJiZcclxuICAgICAgICB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxyXG4gICAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gXCJ1bmRlZmluZWRcIjtcclxuXHJcbiAgICAvLyBub2RlXHJcbiAgICBmdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcclxuICAgICAgICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcclxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XHJcbiAgICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xyXG4gICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcclxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHdlYiB3b3JrZXJcclxuICAgIGZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xyXG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcclxuICAgICAgICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcclxuICAgICAgICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcclxuICAgICAgICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XHJcbiAgICBmdW5jdGlvbiBmbHVzaCgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xyXG4gICAgICAgICAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2soYXJnKTtcclxuXHJcbiAgICAgICAgICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZW4gPSAwO1xyXG4gICAgfVxyXG4gICAgdmFyIHNjaGVkdWxlRmx1c2ggPSB1bmRlZmluZWQ7XHJcbiAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxyXG4gICAgaWYgKGlzTm9kZSkge1xyXG4gICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xyXG4gICAgfSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xyXG4gICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XHJcbiAgICB9IGVsc2UgaWYgKGlzV29ya2VyKSB7XHJcbiAgICAgICAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xyXG4gICAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XHJcblxyXG4gICAgICAgIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xyXG5cclxuICAgICAgICBpZiAoX3N0YXRlKSB7XHJcbiAgICAgICAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07XHJcbiAgICAgICAgICAgICAgICBhc2FwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5fcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxyXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICByZXNvbHZlKDEpO1xyXG4gIH0pO1xyXG5cclxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgLy8gdmFsdWUgPT09IDFcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XHJcblxyXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAvLyB2YWx1ZSA9PT0gMVxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBAbWV0aG9kIHJlc29sdmVcclxuICBAc3RhdGljXHJcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXHJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxyXG4gIGB2YWx1ZWBcclxuKi9cclxuICAgIGZ1bmN0aW9uIHJlc29sdmUob2JqZWN0KSB7XHJcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG9iamVjdCAmJlxyXG4gICAgICAgICAgICB0eXBlb2Ygb2JqZWN0ID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3JcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xyXG4gICAgICAgIF9yZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgICAgIC5zdWJzdHJpbmcoMTYpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG5vb3AoKSB7fVxyXG5cclxuICAgIHZhciBQRU5ESU5HID0gdm9pZCAwO1xyXG4gICAgdmFyIEZVTEZJTExFRCA9IDE7XHJcbiAgICB2YXIgUkVKRUNURUQgPSAyO1xyXG5cclxuICAgIHZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICBcIkEgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS5cIlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgICAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcclxuICAgICAgICBhc2FwKGZ1bmN0aW9uKHByb21pc2UpIHtcclxuICAgICAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKFxyXG4gICAgICAgICAgICAgICAgdGhlbixcclxuICAgICAgICAgICAgICAgIHRoZW5hYmxlLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYWxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlYWxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcIlNldHRsZTogXCIgKyAocHJvbWlzZS5fbGFiZWwgfHwgXCIgdW5rbm93biBwcm9taXNlXCIpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgcHJvbWlzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcclxuICAgICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcclxuICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcclxuICAgICAgICAgICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdWJzY3JpYmUoXHJcbiAgICAgICAgICAgICAgICB0aGVuYWJsZSxcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJlxyXG4gICAgICAgICAgICB0aGVuJCQgPT09IHRoZW4gJiZcclxuICAgICAgICAgICAgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGVuJCQgPT09IEdFVF9USEVOX0VSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuJCQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XHJcbiAgICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcclxuICAgICAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGlzaChwcm9taXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xyXG5cclxuICAgICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XHJcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcclxuICAgICAgICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XHJcblxyXG4gICAgICAgIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XHJcblxyXG4gICAgICAgIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XHJcbiAgICAgICAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xyXG4gICAgICAgIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcclxuXHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XHJcbiAgICAgICAgICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XHJcbiAgICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XHJcbiAgICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcclxuXHJcbiAgICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRldGFpbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XHJcbiAgICAgICAgICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcclxuICAgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcclxuICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xyXG4gICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBkZXRhaWw7XHJcbiAgICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcclxuICAgICAgICAgICAgLy8gbm9vcFxyXG4gICAgICAgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XHJcbiAgICAgICAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xyXG4gICAgICAgICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xyXG4gICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XHJcbiAgICAgICAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJlc29sdmVyKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgaWQgPSAwO1xyXG4gICAgZnVuY3Rpb24gbmV4dElkKCkge1xyXG4gICAgICAgIHJldHVybiBpZCsrO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcclxuICAgICAgICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcclxuICAgICAgICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xyXG4gICAgICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XHJcbiAgICAgICAgICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcclxuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcIkFycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBfaW5wdXQgPSB0aGlzLl9pbnB1dDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbihlbnRyeSwgaSkge1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcclxuICAgICAgICB2YXIgcmVzb2x2ZSQkID0gYy5yZXNvbHZlO1xyXG5cclxuICAgICAgICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcclxuICAgICAgICAgICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgYyhmdW5jdGlvbihyZXNvbHZlJCQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUkJChlbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgaVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQoZW50cnkpLCBpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbihzdGF0ZSwgaSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcclxuXHJcbiAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xyXG5cclxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xyXG4gICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24ocHJvbWlzZSwgaSkge1xyXG4gICAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcclxuXHJcbiAgICAgICAgc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICBwcm9taXNlLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcclxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXHJcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXHJcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxyXG5cclxuICBFeGFtcGxlOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcclxuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xyXG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XHJcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XHJcblxyXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcclxuICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdO1xyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxyXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xyXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcclxuXHJcbiAgRXhhbXBsZTpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XHJcbiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcihcIjJcIikpO1xyXG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcclxuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcclxuXHJcbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xyXG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXHJcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIEBtZXRob2QgYWxsXHJcbiAgQHN0YXRpY1xyXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcclxuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxyXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxyXG4gIEBzdGF0aWNcclxuKi9cclxuICAgIGZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxyXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cclxuXHJcbiAgRXhhbXBsZTpcclxuXHJcbiAgYGBgamF2YXNjcmlwdFxyXG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xyXG4gICAgfSwgMjAwKTtcclxuICB9KTtcclxuXHJcbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XHJcbiAgICB9LCAxMDApO1xyXG4gIH0pO1xyXG5cclxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXHJcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcclxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXHJcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xyXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxyXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcclxuICAgIH0sIDIwMCk7XHJcbiAgfSk7XHJcblxyXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcclxuICAgIH0sIDEwMCk7XHJcbiAgfSk7XHJcblxyXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcclxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcclxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXHJcbiAgfSk7XHJcbiAgYGBgXHJcblxyXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxyXG4gIGBgYFxyXG5cclxuICBAbWV0aG9kIHJhY2VcclxuICBAc3RhdGljXHJcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cclxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxyXG4gIHByb21pc2UgdG8gc2V0dGxlLlxyXG4qL1xyXG4gICAgZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XHJcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihfLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS5cIikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuXHJcbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxyXG5cclxuICBgYGBqYXZhc2NyaXB0XHJcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xyXG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xyXG4gIH0pO1xyXG5cclxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXHJcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcclxuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XHJcblxyXG4gIGBgYGphdmFzY3JpcHRcclxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xyXG5cclxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXHJcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcclxuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBAbWV0aG9kIHJlamVjdFxyXG4gIEBzdGF0aWNcclxuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cclxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXHJcbiovXHJcbiAgICBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XHJcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xyXG4gICAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgIFwiWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvclwiXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuZWVkc05ldygpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXHJcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcclxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cclxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cclxuXHJcbiAgVGVybWlub2xvZ3lcclxuICAtLS0tLS0tLS0tLVxyXG5cclxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxyXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cclxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXHJcbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXHJcbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxyXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxyXG5cclxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXHJcblxyXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXHJcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxyXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxyXG5cclxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcclxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXHJcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXHJcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxyXG4gIGl0c2VsZiBmdWxmaWxsLlxyXG5cclxuXHJcbiAgQmFzaWMgVXNhZ2U6XHJcbiAgLS0tLS0tLS0tLS0tXHJcblxyXG4gIGBgYGpzXHJcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIC8vIG9uIHN1Y2Nlc3NcclxuICAgIHJlc29sdmUodmFsdWUpO1xyXG5cclxuICAgIC8vIG9uIGZhaWx1cmVcclxuICAgIHJlamVjdChyZWFzb24pO1xyXG4gIH0pO1xyXG5cclxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIC8vIG9uIGZ1bGZpbGxtZW50XHJcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XHJcbiAgICAvLyBvbiByZWplY3Rpb25cclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQWR2YW5jZWQgVXNhZ2U6XHJcbiAgLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcclxuICBgWE1MSHR0cFJlcXVlc3Rgcy5cclxuXHJcbiAgYGBganNcclxuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XHJcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xyXG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcclxuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgIHhoci5zZW5kKCk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xyXG4gICAgLy8gb24gZnVsZmlsbG1lbnRcclxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgIC8vIG9uIHJlamVjdGlvblxyXG4gIH0pO1xyXG4gIGBgYFxyXG5cclxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxyXG5cclxuICBgYGBqc1xyXG4gIFByb21pc2UuYWxsKFtcclxuICAgIGdldEpTT04oJy9wb3N0cycpLFxyXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcclxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XHJcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXHJcbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXHJcblxyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9KTtcclxuICBgYGBcclxuXHJcbiAgQGNsYXNzIFByb21pc2VcclxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cclxuICBAY29uc3RydWN0b3JcclxuKi9cclxuICAgIGZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcclxuICAgICAgICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gXCJmdW5jdGlvblwiICYmIG5lZWRzUmVzb2x2ZXIoKTtcclxuICAgICAgICAgICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2VcclxuICAgICAgICAgICAgICAgID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpXHJcbiAgICAgICAgICAgICAgICA6IG5lZWRzTmV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFByb21pc2UuYWxsID0gYWxsO1xyXG4gICAgUHJvbWlzZS5yYWNlID0gcmFjZTtcclxuICAgIFByb21pc2UucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICBQcm9taXNlLnJlamVjdCA9IHJlamVjdDtcclxuICAgIFByb21pc2UuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcclxuICAgIFByb21pc2UuX3NldEFzYXAgPSBzZXRBc2FwO1xyXG4gICAgUHJvbWlzZS5fYXNhcCA9IGFzYXA7XHJcblxyXG4gICAgUHJvbWlzZS5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgY29uc3RydWN0b3I6IFByb21pc2UsXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXHJcbiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxyXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcclxuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcclxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQ2hhaW5pbmdcclxuICAgIC0tLS0tLS0tXHJcbiAgXHJcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xyXG4gICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxyXG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XHJcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcclxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXHJcbiAgICB9KTtcclxuICBcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XHJcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxyXG4gICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxyXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxyXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIEFzc2ltaWxhdGlvblxyXG4gICAgLS0tLS0tLS0tLS0tXHJcbiAgXHJcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxyXG4gICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxyXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcclxuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xyXG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXHJcbiAgXHJcbiAgICBgYGBqc1xyXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XHJcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcclxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIFNpbXBsZSBFeGFtcGxlXHJcbiAgICAtLS0tLS0tLS0tLS0tLVxyXG4gIFxyXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxyXG4gIFxyXG4gICAgYGBgamF2YXNjcmlwdFxyXG4gICAgbGV0IHJlc3VsdDtcclxuICBcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcclxuICAgICAgLy8gc3VjY2Vzc1xyXG4gICAgfSBjYXRjaChyZWFzb24pIHtcclxuICAgICAgLy8gZmFpbHVyZVxyXG4gICAgfVxyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBFcnJiYWNrIEV4YW1wbGVcclxuICBcclxuICAgIGBgYGpzXHJcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIC8vIGZhaWx1cmVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBzdWNjZXNzXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgYGBgXHJcbiAgXHJcbiAgICBQcm9taXNlIEV4YW1wbGU7XHJcbiAgXHJcbiAgICBgYGBqYXZhc2NyaXB0XHJcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAvLyBzdWNjZXNzXHJcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgICAvLyBmYWlsdXJlXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxyXG4gICAgLS0tLS0tLS0tLS0tLS1cclxuICBcclxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcclxuICBcclxuICAgIGBgYGphdmFzY3JpcHRcclxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xyXG4gIFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xyXG4gICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xyXG4gICAgICAvLyBzdWNjZXNzXHJcbiAgICB9IGNhdGNoKHJlYXNvbikge1xyXG4gICAgICAvLyBmYWlsdXJlXHJcbiAgICB9XHJcbiAgICBgYGBcclxuICBcclxuICAgIEVycmJhY2sgRXhhbXBsZVxyXG4gIFxyXG4gICAgYGBganNcclxuICBcclxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcclxuICBcclxuICAgIH1cclxuICBcclxuICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XHJcbiAgXHJcbiAgICB9XHJcbiAgXHJcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIGZhaWx1cmUoZXJyKTtcclxuICAgICAgICAvLyBmYWlsdXJlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XHJcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc3VjY2Vzc1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xyXG4gIFxyXG4gICAgYGBgamF2YXNjcmlwdFxyXG4gICAgZmluZEF1dGhvcigpLlxyXG4gICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cclxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XHJcbiAgICAgICAgLy8gZm91bmQgYm9va3NcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XHJcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICB9KTtcclxuICAgIGBgYFxyXG4gIFxyXG4gICAgQG1ldGhvZCB0aGVuXHJcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxyXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxyXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxyXG4gICAgQHJldHVybiB7UHJvbWlzZX1cclxuICAqL1xyXG4gICAgICAgIHRoZW46IHRoZW5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXHJcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxyXG4gIFxyXG4gICAgYGBganNcclxuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBzeW5jaHJvbm91c1xyXG4gICAgdHJ5IHtcclxuICAgICAgZmluZEF1dGhvcigpO1xyXG4gICAgfSBjYXRjaChyZWFzb24pIHtcclxuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcclxuICAgIH1cclxuICBcclxuICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcclxuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xyXG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xyXG4gICAgfSk7XHJcbiAgICBgYGBcclxuICBcclxuICAgIEBtZXRob2QgY2F0Y2hcclxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXHJcbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXHJcbiAgICBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xyXG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XHJcbiAgfVxyXG4gICovXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHBvbHlmaWxsKCkge1xyXG4gICAgICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgbG9jYWwgPSBnbG9iYWw7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBsb2NhbCA9IHNlbGY7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnRcIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xyXG5cclxuICAgICAgICBpZiAoUCkge1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gXCJbb2JqZWN0IFByb21pc2VdXCIgJiYgIVAuY2FzdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdHJhbmdlIGNvbXBhdC4uXHJcbiAgICBQcm9taXNlLnBvbHlmaWxsID0gcG9seWZpbGw7XHJcbiAgICBQcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xyXG5cclxuICAgIHJldHVybiBQcm9taXNlO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/libs/es6-promise.js\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/AppInsightsConfig.ts":
/*!********************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/AppInsightsConfig.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar appInsightsKeyTemplate = \"bce5a361-657b-4482-ace0-901718fb2a96\";\r\nexports.appInsightsConfig = {\r\n    instrumentationKey: appInsightsKeyTemplate\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0FwcEluc2lnaHRzQ29uZmlnLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vSmF2YXNjcmlwdC5TREsvVHJhY2tlci92MS9BcHBJbnNpZ2h0c0NvbmZpZy50cz8yOGQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElDb25maWcgfSBmcm9tIFwiQG1pbmRib3gvYXBwbGljYXRpb25pbnNpZ2h0cy1qc1wiO1xyXG5cclxuY29uc3QgYXBwSW5zaWdodHNLZXlUZW1wbGF0ZSA9IFwie2FwcEluc2lnaHRzS2V5fVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwcEluc2lnaHRzQ29uZmlnOiBJQ29uZmlnID0ge1xyXG4gICAgaW5zdHJ1bWVudGF0aW9uS2V5OiBhcHBJbnNpZ2h0c0tleVRlbXBsYXRlXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUVBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/AppInsightsConfig.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/CookieManager.ts":
/*!****************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/CookieManager.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* tslint:disable:strict-boolean-expressions */\r\nvar Manager = /** @class */ (function () {\r\n    function Manager(windowOverride, domain, path, secure) {\r\n        this._pluses = /\\+/g;\r\n        this.MaxCookieExpirationDate = new Date(2038, 1, 19);\r\n        this._navigator = windowOverride ? windowOverride.navigator : navigator;\r\n        this._document = windowOverride ? windowOverride.document : document;\r\n        this._domain = domain;\r\n        this._path = path;\r\n        this._secure = secure;\r\n    }\r\n    Manager.prototype.remove = function (key, domainOverride) {\r\n        if (this.tryGet(key, Format.Raw) == null) {\r\n            return false;\r\n        }\r\n        this.set(key, \"\", -1, Format.Raw, domainOverride);\r\n        return !this.tryGet(key, Format.Raw);\r\n    };\r\n    Manager.prototype.tryGetJson = function (key) {\r\n        return this.tryGet(key, Format.Json);\r\n    };\r\n    Manager.prototype.tryGet = function (key, format) {\r\n        var result = null;\r\n        if (typeof format === \"undefined\") {\r\n            format = Format.String;\r\n        }\r\n        var cookieString = this._document.cookie;\r\n        var cookies = cookieString ? cookieString.split(\"; \") : [];\r\n        for (var i = 0, l = cookies.length; i < l; i++) {\r\n            var parts = cookies[i].split(\"=\");\r\n            var name = this.decode(parts.shift(), format);\r\n            var cookie = parts.join(\"=\");\r\n            if (key === name) {\r\n                result = this.read(cookie, format);\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Manager.prototype.setJson = function (key, value, expires) {\r\n        return this.set(key, value, expires, Format.Json);\r\n    };\r\n    Manager.prototype.set = function (key, value, expires, format, domainOverride) {\r\n        if (format === undefined) {\r\n            format = Format.String;\r\n        }\r\n        if (expires !== -1) {\r\n            this.remove(key);\r\n        }\r\n        var expiresDate = null;\r\n        if (expires != null && typeof expires == \"number\") {\r\n            expiresDate = new Date();\r\n            expiresDate.setTime(+expiresDate + expires * 864e5);\r\n        }\r\n        else if (expires != null && expires instanceof Date) {\r\n            expiresDate = expires;\r\n        }\r\n        var domain = domainOverride == null ? this._domain : domainOverride;\r\n        if (domain === this._document.domain) {\r\n            // Чтобы проставить домен точь в точь равный текущему домену, нужно его не указывать\r\n            domain = null;\r\n        }\r\n        return (this._document.cookie = [\r\n            this.encode(key, format),\r\n            \"=\",\r\n            this.stringifyCookieValue(value, format),\r\n            expiresDate != null ? \"; expires=\" + expiresDate.toUTCString() : \"\",\r\n            \"; path=\" + (this._path != null ? this._path : \"/\"),\r\n            domain ? \"; domain=\" + domain : \"\",\r\n            this._secure != null && this._secure ? \"; secure\" : \"\"\r\n        ].join(\"\"));\r\n    };\r\n    Manager.prototype.removeAcrossBaseDomain = function (key) {\r\n        var baseDomain = this.getBaseDomain();\r\n        if (baseDomain) {\r\n            var fullDomain = this._document.domain;\r\n            // Перебираем все домены, в которых можем очистить куку\r\n            // Например для домена test-site.dev.directcrm.ru мы удалим куки в следующих доменах:\r\n            //   .test-site.dev.directcrm.ru\r\n            //   .dev.directcrm.ru\r\n            //   .directcrm.ru\r\n            var domainParts = fullDomain.split(\".\");\r\n            var baseDomainParts = baseDomain.substring(1).split(\".\");\r\n            var variantsCount = domainParts.length - baseDomainParts.length + 1;\r\n            for (var i = variantsCount - 1; i >= 0; i--) {\r\n                var usedDomainParts = domainParts.slice(i);\r\n                var usedDomain = \".\" + usedDomainParts.join(\".\");\r\n                this.remove(key, usedDomain);\r\n            }\r\n        }\r\n        // Удаляем куку в текущем домене\r\n        this.remove(key, this._document.domain);\r\n    };\r\n    // http://stackoverflow.com/questions/4603289/how-to-detect-that-javascript-and-or-cookies-are-disabled\r\n    // http://stackoverflow.com/questions/19999388/check-if-user-is-using-ie-with-jquery\r\n    Manager.prototype.isCookieEnabled = function () {\r\n        try {\r\n            var ie = this.isInternetExplorer();\r\n            if (ie) {\r\n                this._document.cookie = \"testcookie=testcookie\";\r\n                var cookieEnabled = this._document.cookie.indexOf(\"testcookie=testcookie\") !==\r\n                    -1;\r\n                this.remove(\"testcookie\");\r\n                return cookieEnabled;\r\n            }\r\n            else {\r\n                var cookieEnabled = this._navigator.cookieEnabled\r\n                    ? true\r\n                    : false;\r\n                if (typeof this._navigator.cookieEnabled == \"undefined\" &&\r\n                    !cookieEnabled) {\r\n                    this._document.cookie = \"testcookie=testcookie\";\r\n                    cookieEnabled =\r\n                        this._document.cookie.indexOf(\"testcookie=testcookie\") !== -1\r\n                            ? true\r\n                            : false;\r\n                    this.remove(\"testcookie\");\r\n                }\r\n                return cookieEnabled;\r\n            }\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n    Manager.prototype.isInternetExplorer = function () {\r\n        var userAgent = this._navigator.userAgent;\r\n        if (typeof userAgent == \"undefined\") {\r\n            return false;\r\n        }\r\n        var msie = userAgent.indexOf(\"MSIE \");\r\n        var trident = userAgent.indexOf(\"Trident/\");\r\n        var edge = userAgent.indexOf(\"Edge/\");\r\n        return msie > 0 || trident > 0 || edge > 0;\r\n    };\r\n    Manager.prototype.read = function (value, format) {\r\n        if ((format == Format.Raw || format == Format.String) &&\r\n            value.indexOf('\"') === 0) {\r\n            // This is a quoted cookie as according to RFC2068, unescape...\r\n            value = value\r\n                .slice(1, -1)\r\n                .replace(/\\\\\"/g, '\"')\r\n                .replace(/\\\\\\\\/g, \"\\\\\");\r\n        }\r\n        try {\r\n            // Replace server-side written pluses with spaces.\r\n            // If we can't decode the cookie, ignore it, it's unusable.\r\n            // If we can't parse the cookie, ignore it, it's unusable.\r\n            value =\r\n                format == Format.Raw\r\n                    ? value\r\n                    : decodeURIComponent(value.replace(this._pluses, \" \"));\r\n            switch (format) {\r\n                case Format.Raw:\r\n                case Format.String:\r\n                    return value;\r\n                case Format.Json:\r\n                    return JSON.parse(value);\r\n                default:\r\n                    throw new Error(\"Unknown format\");\r\n            }\r\n        }\r\n        catch (e) { }\r\n    };\r\n    Manager.prototype.encode = function (value, format) {\r\n        switch (format) {\r\n            case Format.Raw:\r\n                return value;\r\n            case Format.Json:\r\n            case Format.String:\r\n                return encodeURIComponent(value);\r\n            default:\r\n                throw new Error(\"Unknown format\");\r\n        }\r\n    };\r\n    Manager.prototype.decode = function (value, format) {\r\n        switch (format) {\r\n            case Format.Raw:\r\n                return value;\r\n            case Format.Json:\r\n            case Format.String:\r\n                return decodeURIComponent(value);\r\n            default:\r\n                throw new Error(\"Unknown format\");\r\n        }\r\n    };\r\n    Manager.prototype.stringifyCookieValue = function (value, format) {\r\n        switch (format) {\r\n            case Format.Raw:\r\n            case Format.String:\r\n                return this.encode(String(value), format);\r\n            case Format.Json:\r\n                return this.encode(JSON.stringify(value), format);\r\n            default:\r\n                throw new Error(\"Unknown format\");\r\n        }\r\n    };\r\n    Manager.prototype.setBaseDomain = function () {\r\n        this._domain = this.getBaseDomain();\r\n    };\r\n    Manager.prototype.getBaseDomain = function () {\r\n        if (!this._baseDomain) {\r\n            this._baseDomain = this.computeBaseDomain();\r\n        }\r\n        return this._baseDomain;\r\n    };\r\n    Manager.prototype.computeBaseDomain = function () {\r\n        if (!this.isCookieEnabled()) {\r\n            return null;\r\n        }\r\n        var currentDomain = this._document.domain\r\n            ? \".\" + this._document.domain\r\n            : \"\";\r\n        var startIndex = currentDomain.length - 1;\r\n        while (true) {\r\n            if (startIndex <= 0) {\r\n                return null;\r\n            }\r\n            while (startIndex >= 0 && currentDomain[startIndex] !== \".\") {\r\n                startIndex--;\r\n            }\r\n            var candidateDomain = currentDomain.substr(startIndex);\r\n            this._document.cookie =\r\n                \"domaintest=value; path=/; domain=\" + candidateDomain;\r\n            if (this._document.cookie.indexOf(\"domaintest=value\") !== -1) {\r\n                this._document.cookie =\r\n                    \"domaintest=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=\" +\r\n                        candidateDomain;\r\n                return candidateDomain;\r\n            }\r\n            startIndex--;\r\n        }\r\n    };\r\n    return Manager;\r\n}());\r\nexports.Manager = Manager;\r\nvar Format;\r\n(function (Format) {\r\n    Format[Format[\"Json\"] = 0] = \"Json\";\r\n    Format[Format[\"String\"] = 1] = \"String\";\r\n    Format[Format[\"Raw\"] = 2] = \"Raw\";\r\n})(Format = exports.Format || (exports.Format = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Nvb2tpZU1hbmFnZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Nvb2tpZU1hbmFnZXIudHM/ZTk3YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpzdHJpY3QtYm9vbGVhbi1leHByZXNzaW9ucyAqL1xyXG5leHBvcnQgY2xhc3MgTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIF9uYXZpZ2F0b3I6IE5hdmlnYXRvcjtcclxuICAgIHByaXZhdGUgX2RvY3VtZW50OiBEb2N1bWVudDtcclxuICAgIHByaXZhdGUgX2Jhc2VEb21haW46IHN0cmluZztcclxuICAgIHByaXZhdGUgX2RvbWFpbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcGF0aDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc2VjdXJlOiBib29sZWFuO1xyXG5cclxuICAgIHByaXZhdGUgX3BsdXNlcyA9IC9cXCsvZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICB3aW5kb3dPdmVycmlkZT86IFBhcnRpYWw8V2luZG93PixcclxuICAgICAgICBkb21haW4/OiBzdHJpbmcsXHJcbiAgICAgICAgcGF0aD86IHN0cmluZyxcclxuICAgICAgICBzZWN1cmU/OiBib29sZWFuXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLl9uYXZpZ2F0b3IgPSB3aW5kb3dPdmVycmlkZSA/IHdpbmRvd092ZXJyaWRlLm5hdmlnYXRvciA6IG5hdmlnYXRvcjtcclxuICAgICAgICB0aGlzLl9kb2N1bWVudCA9IHdpbmRvd092ZXJyaWRlID8gd2luZG93T3ZlcnJpZGUuZG9jdW1lbnQgOiBkb2N1bWVudDtcclxuICAgICAgICB0aGlzLl9kb21haW4gPSBkb21haW47XHJcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy5fc2VjdXJlID0gc2VjdXJlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBNYXhDb29raWVFeHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKDIwMzgsIDEsIDE5KTtcclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlKGtleTogc3RyaW5nLCBkb21haW5PdmVycmlkZT86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLnRyeUdldChrZXksIEZvcm1hdC5SYXcpID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXQoa2V5LCBcIlwiLCAtMSwgRm9ybWF0LlJhdywgZG9tYWluT3ZlcnJpZGUpO1xyXG4gICAgICAgIHJldHVybiAhdGhpcy50cnlHZXQoa2V5LCBGb3JtYXQuUmF3KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJ5R2V0SnNvbihrZXk6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJ5R2V0KGtleSwgRm9ybWF0Lkpzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0cnlHZXQoa2V5OiBzdHJpbmcsIGZvcm1hdD86IEZvcm1hdCk6IGFueSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgZm9ybWF0ID0gRm9ybWF0LlN0cmluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvb2tpZVN0cmluZyA9IHRoaXMuX2RvY3VtZW50LmNvb2tpZTtcclxuICAgICAgICB2YXIgY29va2llcyA9IGNvb2tpZVN0cmluZyA/IGNvb2tpZVN0cmluZy5zcGxpdChcIjsgXCIpIDogW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb29raWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGFydHMgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLmRlY29kZShwYXJ0cy5zaGlmdCgpLCBmb3JtYXQpO1xyXG4gICAgICAgICAgICB2YXIgY29va2llID0gcGFydHMuam9pbihcIj1cIik7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVhZChjb29raWUsIGZvcm1hdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRKc29uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBleHBpcmVzPzogYW55KTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXQoa2V5LCB2YWx1ZSwgZXhwaXJlcywgRm9ybWF0Lkpzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQoXHJcbiAgICAgICAga2V5OiBzdHJpbmcsXHJcbiAgICAgICAgdmFsdWU/OiBhbnksXHJcbiAgICAgICAgZXhwaXJlcz86IGFueSxcclxuICAgICAgICBmb3JtYXQ/OiBGb3JtYXQsXHJcbiAgICAgICAgZG9tYWluT3ZlcnJpZGU/OiBzdHJpbmdcclxuICAgICk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdCA9IEZvcm1hdC5TdHJpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXhwaXJlcyAhPT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmUoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBleHBpcmVzRGF0ZTogRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKGV4cGlyZXMgIT0gbnVsbCAmJiB0eXBlb2YgZXhwaXJlcyA9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIGV4cGlyZXNEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZXhwaXJlc0RhdGUuc2V0VGltZSgrZXhwaXJlc0RhdGUgKyBleHBpcmVzICogODY0ZTUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXhwaXJlcyAhPSBudWxsICYmIGV4cGlyZXMgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIGV4cGlyZXNEYXRlID0gZXhwaXJlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkb21haW4gPSBkb21haW5PdmVycmlkZSA9PSBudWxsID8gdGhpcy5fZG9tYWluIDogZG9tYWluT3ZlcnJpZGU7XHJcbiAgICAgICAgaWYgKGRvbWFpbiA9PT0gdGhpcy5fZG9jdW1lbnQuZG9tYWluKSB7XHJcbiAgICAgICAgICAgIC8vINCn0YLQvtCx0Ysg0L/RgNC+0YHRgtCw0LLQuNGC0Ywg0LTQvtC80LXQvSDRgtC+0YfRjCDQsiDRgtC+0YfRjCDRgNCw0LLQvdGL0Lkg0YLQtdC60YPRidC10LzRgyDQtNC+0LzQtdC90YMsINC90YPQttC90L4g0LXQs9C+INC90LUg0YPQutCw0LfRi9Cy0LDRgtGMXHJcbiAgICAgICAgICAgIGRvbWFpbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKHRoaXMuX2RvY3VtZW50LmNvb2tpZSA9IFtcclxuICAgICAgICAgICAgdGhpcy5lbmNvZGUoa2V5LCBmb3JtYXQpLFxyXG4gICAgICAgICAgICBcIj1cIixcclxuICAgICAgICAgICAgdGhpcy5zdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSwgZm9ybWF0KSxcclxuICAgICAgICAgICAgZXhwaXJlc0RhdGUgIT0gbnVsbCA/IFwiOyBleHBpcmVzPVwiICsgZXhwaXJlc0RhdGUudG9VVENTdHJpbmcoKSA6IFwiXCIsIC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXHJcbiAgICAgICAgICAgIFwiOyBwYXRoPVwiICsgKHRoaXMuX3BhdGggIT0gbnVsbCA/IHRoaXMuX3BhdGggOiBcIi9cIiksXHJcbiAgICAgICAgICAgIGRvbWFpbiA/IFwiOyBkb21haW49XCIgKyBkb21haW4gOiBcIlwiLFxyXG4gICAgICAgICAgICB0aGlzLl9zZWN1cmUgIT0gbnVsbCAmJiB0aGlzLl9zZWN1cmUgPyBcIjsgc2VjdXJlXCIgOiBcIlwiXHJcbiAgICAgICAgXS5qb2luKFwiXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQWNyb3NzQmFzZURvbWFpbihrZXk6IHN0cmluZykge1xyXG4gICAgICAgIHZhciBiYXNlRG9tYWluID0gdGhpcy5nZXRCYXNlRG9tYWluKCk7XHJcbiAgICAgICAgaWYgKGJhc2VEb21haW4pIHtcclxuICAgICAgICAgICAgdmFyIGZ1bGxEb21haW4gPSB0aGlzLl9kb2N1bWVudC5kb21haW47XHJcblxyXG4gICAgICAgICAgICAvLyDQn9C10YDQtdCx0LjRgNCw0LXQvCDQstGB0LUg0LTQvtC80LXQvdGLLCDQsiDQutC+0YLQvtGA0YvRhSDQvNC+0LbQtdC8INC+0YfQuNGB0YLQuNGC0Ywg0LrRg9C60YNcclxuICAgICAgICAgICAgLy8g0J3QsNC/0YDQuNC80LXRgCDQtNC70Y8g0LTQvtC80LXQvdCwIHRlc3Qtc2l0ZS5kZXYuZGlyZWN0Y3JtLnJ1INC80Ysg0YPQtNCw0LvQuNC8INC60YPQutC4INCyINGB0LvQtdC00YPRjtGJ0LjRhSDQtNC+0LzQtdC90LDRhTpcclxuICAgICAgICAgICAgLy8gICAudGVzdC1zaXRlLmRldi5kaXJlY3Rjcm0ucnVcclxuICAgICAgICAgICAgLy8gICAuZGV2LmRpcmVjdGNybS5ydVxyXG4gICAgICAgICAgICAvLyAgIC5kaXJlY3Rjcm0ucnVcclxuICAgICAgICAgICAgdmFyIGRvbWFpblBhcnRzID0gZnVsbERvbWFpbi5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHZhciBiYXNlRG9tYWluUGFydHMgPSBiYXNlRG9tYWluLnN1YnN0cmluZygxKS5zcGxpdChcIi5cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFyaWFudHNDb3VudCA9IGRvbWFpblBhcnRzLmxlbmd0aCAtIGJhc2VEb21haW5QYXJ0cy5sZW5ndGggKyAxO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdmFyaWFudHNDb3VudCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlZERvbWFpblBhcnRzID0gZG9tYWluUGFydHMuc2xpY2UoaSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlZERvbWFpbiA9IFwiLlwiICsgdXNlZERvbWFpblBhcnRzLmpvaW4oXCIuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGtleSwgdXNlZERvbWFpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC60YPQutGDINCyINGC0LXQutGD0YnQtdC8INC00L7QvNC10L3QtVxyXG4gICAgICAgIHRoaXMucmVtb3ZlKGtleSwgdGhpcy5fZG9jdW1lbnQuZG9tYWluKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ2MDMyODkvaG93LXRvLWRldGVjdC10aGF0LWphdmFzY3JpcHQtYW5kLW9yLWNvb2tpZXMtYXJlLWRpc2FibGVkXHJcbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5OTk5Mzg4L2NoZWNrLWlmLXVzZXItaXMtdXNpbmctaWUtd2l0aC1qcXVlcnlcclxuICAgIHB1YmxpYyBpc0Nvb2tpZUVuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgaWUgPSB0aGlzLmlzSW50ZXJuZXRFeHBsb3JlcigpO1xyXG4gICAgICAgICAgICBpZiAoaWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50LmNvb2tpZSA9IFwidGVzdGNvb2tpZT10ZXN0Y29va2llXCI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb29raWVFbmFibGVkID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb2N1bWVudC5jb29raWUuaW5kZXhPZihcInRlc3Rjb29raWU9dGVzdGNvb2tpZVwiKSAhPT1cclxuICAgICAgICAgICAgICAgICAgICAtMTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKFwidGVzdGNvb2tpZVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVFbmFibGVkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvb2tpZUVuYWJsZWQgPSB0aGlzLl9uYXZpZ2F0b3IuY29va2llRW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuX25hdmlnYXRvci5jb29raWVFbmFibGVkID09IFwidW5kZWZpbmVkXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAhY29va2llRW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9jdW1lbnQuY29va2llID0gXCJ0ZXN0Y29va2llPXRlc3Rjb29raWVcIjtcclxuICAgICAgICAgICAgICAgICAgICBjb29raWVFbmFibGVkID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9jdW1lbnQuY29va2llLmluZGV4T2YoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRlc3Rjb29raWU9dGVzdGNvb2tpZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgIT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoXCJ0ZXN0Y29va2llXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvb2tpZUVuYWJsZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0ludGVybmV0RXhwbG9yZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdXNlckFnZW50ID0gdGhpcy5fbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyQWdlbnQgPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtc2llID0gdXNlckFnZW50LmluZGV4T2YoXCJNU0lFIFwiKTtcclxuICAgICAgICBjb25zdCB0cmlkZW50ID0gdXNlckFnZW50LmluZGV4T2YoXCJUcmlkZW50L1wiKTtcclxuICAgICAgICBjb25zdCBlZGdlID0gdXNlckFnZW50LmluZGV4T2YoXCJFZGdlL1wiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1zaWUgPiAwIHx8IHRyaWRlbnQgPiAwIHx8IGVkZ2UgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVhZCh2YWx1ZTogc3RyaW5nLCBmb3JtYXQ6IEZvcm1hdCk6IGFueSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAoZm9ybWF0ID09IEZvcm1hdC5SYXcgfHwgZm9ybWF0ID09IEZvcm1hdC5TdHJpbmcpICYmXHJcbiAgICAgICAgICAgIHZhbHVlLmluZGV4T2YoJ1wiJykgPT09IDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHF1b3RlZCBjb29raWUgYXMgYWNjb3JkaW5nIHRvIFJGQzIwNjgsIHVuZXNjYXBlLi4uXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVcclxuICAgICAgICAgICAgICAgIC5zbGljZSgxLCAtMSlcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXFxcXC9nLCBcIlxcXFxcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBSZXBsYWNlIHNlcnZlci1zaWRlIHdyaXR0ZW4gcGx1c2VzIHdpdGggc3BhY2VzLlxyXG4gICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBkZWNvZGUgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLlxyXG4gICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuXHJcbiAgICAgICAgICAgIHZhbHVlID1cclxuICAgICAgICAgICAgICAgIGZvcm1hdCA9PSBGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICAgICAgICAgPyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIDogZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlLnJlcGxhY2UodGhpcy5fcGx1c2VzLCBcIiBcIikpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGb3JtYXQuUmF3OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBGb3JtYXQuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgRm9ybWF0Lkpzb246XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGZvcm1hdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmNvZGUodmFsdWU6IHN0cmluZywgZm9ybWF0OiBGb3JtYXQpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRm9ybWF0LlJhdzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgY2FzZSBGb3JtYXQuSnNvbjpcclxuICAgICAgICAgICAgY2FzZSBGb3JtYXQuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGZvcm1hdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWNvZGUodmFsdWU6IHN0cmluZywgZm9ybWF0OiBGb3JtYXQpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRm9ybWF0LlJhdzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgY2FzZSBGb3JtYXQuSnNvbjpcclxuICAgICAgICAgICAgY2FzZSBGb3JtYXQuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGZvcm1hdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZTogc3RyaW5nLCBmb3JtYXQ6IEZvcm1hdCk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgICAgICAgICAgY2FzZSBGb3JtYXQuUmF3OlxyXG4gICAgICAgICAgICBjYXNlIEZvcm1hdC5TdHJpbmc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUoU3RyaW5nKHZhbHVlKSwgZm9ybWF0KTtcclxuICAgICAgICAgICAgY2FzZSBGb3JtYXQuSnNvbjpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShKU09OLnN0cmluZ2lmeSh2YWx1ZSksIGZvcm1hdCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGZvcm1hdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEJhc2VEb21haW4oKSB7XHJcbiAgICAgICAgdGhpcy5fZG9tYWluID0gdGhpcy5nZXRCYXNlRG9tYWluKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEJhc2VEb21haW4oKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2Jhc2VEb21haW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fYmFzZURvbWFpbiA9IHRoaXMuY29tcHV0ZUJhc2VEb21haW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VEb21haW47XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlQmFzZURvbWFpbigpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0Nvb2tpZUVuYWJsZWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50RG9tYWluID0gdGhpcy5fZG9jdW1lbnQuZG9tYWluXHJcbiAgICAgICAgICAgID8gXCIuXCIgKyB0aGlzLl9kb2N1bWVudC5kb21haW5cclxuICAgICAgICAgICAgOiBcIlwiO1xyXG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gY3VycmVudERvbWFpbi5sZW5ndGggLSAxO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4IDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoc3RhcnRJbmRleCA+PSAwICYmIGN1cnJlbnREb21haW5bc3RhcnRJbmRleF0gIT09IFwiLlwiKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydEluZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjYW5kaWRhdGVEb21haW4gPSBjdXJyZW50RG9tYWluLnN1YnN0cihzdGFydEluZGV4KTtcclxuICAgICAgICAgICAgdGhpcy5fZG9jdW1lbnQuY29va2llID1cclxuICAgICAgICAgICAgICAgIFwiZG9tYWludGVzdD12YWx1ZTsgcGF0aD0vOyBkb21haW49XCIgKyBjYW5kaWRhdGVEb21haW47XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kb2N1bWVudC5jb29raWUuaW5kZXhPZihcImRvbWFpbnRlc3Q9dmFsdWVcIikgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kb2N1bWVudC5jb29raWUgPVxyXG4gICAgICAgICAgICAgICAgICAgIFwiZG9tYWludGVzdD07IHBhdGg9LzsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVDsgZG9tYWluPVwiICtcclxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVEb21haW47XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlRG9tYWluO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdGFydEluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBGb3JtYXQge1xyXG4gICAgSnNvbixcclxuICAgIFN0cmluZyxcclxuICAgIFJhd1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBVUE7QUFGQTtBQWVBO0FBUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQS9SQTtBQWlTQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/CookieManager.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/CrossDomainRequest/CrossDomainRequest.ts":
/*!****************************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/CrossDomainRequest/CrossDomainRequest.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/* tslint:disable:strict-boolean-expressions */\r\n/// <reference path=\"../../libs/es6-promise.d.ts\" />\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar es6_promise_1 = __webpack_require__(/*! ../../libs/es6-promise */ \"./Javascript.SDK/Tracker/libs/es6-promise.js\");\r\nvar services_responses_ts_1 = __webpack_require__(/*! @mindbox/services-responses-ts */ \"./node_modules/@mindbox/services-responses-ts/index.js\");\r\nvar HttpMethods_1 = __webpack_require__(/*! ./HttpMethods */ \"./Javascript.SDK/Tracker/v1/CrossDomainRequest/HttpMethods.ts\");\r\nvar FormPayloadSerializer_1 = __webpack_require__(/*! ../PayloadSerializer/FormPayloadSerializer */ \"./Javascript.SDK/Tracker/v1/PayloadSerializer/FormPayloadSerializer.ts\");\r\nvar Errors_1 = __webpack_require__(/*! ../Errors */ \"./Javascript.SDK/Tracker/v1/Errors/index.ts\");\r\nexports.CrossDomainRequestFactory = function (httpMethod, url, payload) {\r\n    return new CrossDomainRequest(httpMethod, url, payload);\r\n};\r\nvar CrossDomainRequest = /** @class */ (function () {\r\n    function CrossDomainRequest(httpMethod, url, payload) {\r\n        this.timeout = 60000;\r\n        this._httpMethod = httpMethod;\r\n        this._url = url;\r\n        this._payload = FormPayloadSerializer_1.PayloadSerializer.serialize(payload);\r\n    }\r\n    CrossDomainRequest.prototype.sendAndGetResult = function () {\r\n        var requestPromise = this.sendViaXmlHttpRequest() ||\r\n            this.sendViaJsonp();\r\n        if (requestPromise == null) {\r\n            throw new Error(\"Browser doesn't support big cross domain requests.\");\r\n        }\r\n        return requestPromise;\r\n    };\r\n    CrossDomainRequest.prototype.sendAndForget = function () {\r\n        var requestPromise = this.sendViaBeacon() ||\r\n            this.sendViaImage() ||\r\n            this.sendViaXmlHttpRequest();\r\n        if (requestPromise == null) {\r\n            throw new Error(\"Browser doesn't support big cross domain requests.\");\r\n        }\r\n        return requestPromise;\r\n    };\r\n    CrossDomainRequest.prototype.sendViaBeacon = function () {\r\n        var url = CrossDomainRequest.appendQueryString(this._url, \"transport=beacon\");\r\n        try {\r\n            if (typeof navigator.sendBeacon !== \"undefined\" &&\r\n                navigator.sendBeacon(url, this._payload)) {\r\n                return es6_promise_1.Promise.resolve();\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        catch (error) {\r\n            // In Edge 14 and 15 sendBeacon randomly fails with error.\r\n            return null;\r\n        }\r\n    };\r\n    CrossDomainRequest.prototype.sendViaImage = function () {\r\n        var _this = this;\r\n        var url = CrossDomainRequest.appendQueryString(this._url, \"transport=image&\" + this._payload);\r\n        if (url.length > CrossDomainRequest.maxUrlLength) {\r\n            return null;\r\n        }\r\n        // Create script\r\n        var image = document.createElement(\"img\");\r\n        image.width = 1;\r\n        image.height = 1;\r\n        image.src = url;\r\n        var requestPromise = new es6_promise_1.Promise(function (resolve, reject) {\r\n            image.onload = image.onerror = function (event) {\r\n                image.onload = null;\r\n                image.onerror = null;\r\n                resolve();\r\n            };\r\n        });\r\n        var timeoutPromise = new es6_promise_1.Promise(function (resolve, reject) {\r\n            setTimeout(function () { return reject(new Errors_1.Timeout(\"Timeout in sendViaImage.\")); }, _this.timeout);\r\n        });\r\n        return es6_promise_1.Promise.race([requestPromise, timeoutPromise]);\r\n    };\r\n    CrossDomainRequest.prototype.sendViaJsonp = function () {\r\n        var _this = this;\r\n        // INIT\r\n        var name = \"Mindbox_jsonp_\" + CrossDomainRequest.jsonpRequestNumber++;\r\n        var resolveName = name + \"resolve\";\r\n        var url = CrossDomainRequest.appendQueryString(this._url, \"transport=jsonp&\" +\r\n            this._payload +\r\n            \"&jsonpCallback=\" +\r\n            'window[\"' +\r\n            name +\r\n            '\"]');\r\n        if (url.length > CrossDomainRequest.maxUrlLength) {\r\n            return null;\r\n        }\r\n        // Create script\r\n        var script = document.createElement(\"script\");\r\n        script.type = \"text/javascript\";\r\n        script.src = url;\r\n        var requestPromise = new es6_promise_1.Promise(function (resolve) {\r\n            // Setup handler\r\n            window[resolveName] = resolve;\r\n            window[name] = function (aData) {\r\n                try {\r\n                    window[resolveName](aData);\r\n                }\r\n                finally {\r\n                    document\r\n                        .getElementsByTagName(\"head\")[0]\r\n                        .removeChild(script);\r\n                    script = null;\r\n                    try {\r\n                        delete window[name];\r\n                        delete window[resolveName];\r\n                    }\r\n                    catch (e) {\r\n                        window[name] = undefined;\r\n                        window[resolveName] = undefined;\r\n                    }\r\n                }\r\n            };\r\n        });\r\n        // Load JSON\r\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n        var timeoutPromise = new es6_promise_1.Promise(function (resolve, reject) {\r\n            setTimeout(function () {\r\n                reject(new Errors_1.Timeout(\"Timeout in sendViaJsonp.\"));\r\n            }, _this.timeout);\r\n        });\r\n        requestPromise = requestPromise.then(function (response) {\r\n            if (services_responses_ts_1.ServiceResponses.isError(response)) {\r\n                throw new Errors_1.HttpError(response.httpStatusCode, response.errorMessage);\r\n            }\r\n            else {\r\n                return response;\r\n            }\r\n        });\r\n        return es6_promise_1.Promise.race([requestPromise, timeoutPromise]);\r\n    };\r\n    CrossDomainRequest.prototype.sendViaXmlHttpRequest = function () {\r\n        if (typeof XMLHttpRequest === \"undefined\") {\r\n            return null;\r\n        }\r\n        var xhr = new XMLHttpRequest();\r\n        if (!(\"withCredentials\" in xhr)) {\r\n            return null;\r\n        }\r\n        var url = CrossDomainRequest.appendQueryString(this._url, \"transport=XmlHttpRequest\");\r\n        if (this._httpMethod == HttpMethods_1.HttpMethods.GET) {\r\n            url = CrossDomainRequest.appendQueryString(url, this._payload);\r\n        }\r\n        xhr.open(this._httpMethod, url, true);\r\n        xhr.withCredentials = true;\r\n        xhr.timeout = this.timeout;\r\n        xhr.setRequestHeader(\"Accept\", \"application/json\");\r\n        xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        var requestPromise = new es6_promise_1.Promise(function (resolve, reject) {\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4) {\r\n                    if (xhr.status >= 200 && xhr.status < 300) {\r\n                        resolve(JSON.parse(xhr.responseText));\r\n                    }\r\n                    else if (xhr.status == 0) {\r\n                        // xhr.status == 0 - таймаут\r\n                        reject(new Errors_1.Timeout(\"Timeout in sendViaXmlHttpRequest.\"));\r\n                    }\r\n                    else {\r\n                        var errorMessage = void 0;\r\n                        var requestId = void 0;\r\n                        try {\r\n                            var response = JSON.parse(xhr.responseText);\r\n                            if (services_responses_ts_1.ServiceResponses.isError(response)) {\r\n                                errorMessage = response.errorMessage;\r\n                            }\r\n                            var trackerResponse = response;\r\n                            if (trackerResponse.requestId)\r\n                                requestId = trackerResponse.requestId;\r\n                        }\r\n                        catch (e) {\r\n                            // Если не удалось распарсить, запихнем в ошибку весь текст ответа\r\n                        }\r\n                        reject(new Errors_1.HttpError(xhr.status, errorMessage || xhr.responseText, requestId));\r\n                    }\r\n                }\r\n            };\r\n        });\r\n        if (this._httpMethod == HttpMethods_1.HttpMethods.GET) {\r\n            xhr.send();\r\n        }\r\n        else {\r\n            xhr.send(this._payload);\r\n        }\r\n        return requestPromise;\r\n    };\r\n    CrossDomainRequest.appendQueryString = function (url, queryString) {\r\n        return url + (url.match(/\\?/) ? \"&\" : \"?\") + queryString;\r\n    };\r\n    // from google analytics\r\n    CrossDomainRequest.maxUrlLength = 2036;\r\n    CrossDomainRequest.jsonpRequestNumber = 0;\r\n    return CrossDomainRequest;\r\n}());\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Nyb3NzRG9tYWluUmVxdWVzdC9Dcm9zc0RvbWFpblJlcXVlc3QudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Nyb3NzRG9tYWluUmVxdWVzdC9Dcm9zc0RvbWFpblJlcXVlc3QudHM/MTk4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpzdHJpY3QtYm9vbGVhbi1leHByZXNzaW9ucyAqL1xyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vbGlicy9lczYtcHJvbWlzZS5kLnRzXCIgLz5cclxuXHJcbmltcG9ydCB7IFByb21pc2UgfSBmcm9tIFwiLi4vLi4vbGlicy9lczYtcHJvbWlzZVwiO1xyXG5pbXBvcnQgeyBTZXJ2aWNlUmVzcG9uc2VzIH0gZnJvbSBcIkBtaW5kYm94L3NlcnZpY2VzLXJlc3BvbnNlcy10c1wiO1xyXG5pbXBvcnQgeyBUcmFja2VyU2VydmljZVJlc3BvbnNlIH0gZnJvbSBcIi4uL01lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IEh0dHBNZXRob2RzIH0gZnJvbSBcIi4vSHR0cE1ldGhvZHNcIjtcclxuaW1wb3J0IHsgUGF5bG9hZFNlcmlhbGl6ZXIgfSBmcm9tIFwiLi4vUGF5bG9hZFNlcmlhbGl6ZXIvRm9ybVBheWxvYWRTZXJpYWxpemVyXCI7XHJcbmltcG9ydCB7XHJcbiAgICBJQ3Jvc3NEb21haW5SZXF1ZXN0LFxyXG4gICAgSUNyb3NzRG9tYWluUmVxdWVzdEZhY3RvcnlcclxufSBmcm9tIFwiLi9JQ3Jvc3NEb21haW5SZXF1ZXN0XCI7XHJcbmltcG9ydCB7IFRpbWVvdXQsIEh0dHBFcnJvciB9IGZyb20gXCIuLi9FcnJvcnNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBDcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5OiBJQ3Jvc3NEb21haW5SZXF1ZXN0RmFjdG9yeSA9IChcclxuICAgIGh0dHBNZXRob2Q6IHN0cmluZyxcclxuICAgIHVybDogc3RyaW5nLFxyXG4gICAgcGF5bG9hZDogYW55XHJcbik6IElDcm9zc0RvbWFpblJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBDcm9zc0RvbWFpblJlcXVlc3QoaHR0cE1ldGhvZCwgdXJsLCBwYXlsb2FkKTtcclxufTtcclxuXHJcbmNsYXNzIENyb3NzRG9tYWluUmVxdWVzdCBpbXBsZW1lbnRzIElDcm9zc0RvbWFpblJlcXVlc3Qge1xyXG4gICAgLy8gZnJvbSBnb29nbGUgYW5hbHl0aWNzXHJcbiAgICBwcml2YXRlIHN0YXRpYyBtYXhVcmxMZW5ndGg6IG51bWJlciA9IDIwMzY7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBqc29ucFJlcXVlc3ROdW1iZXI6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdXJsOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9wYXlsb2FkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9odHRwTWV0aG9kOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaHR0cE1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgcGF5bG9hZDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5faHR0cE1ldGhvZCA9IGh0dHBNZXRob2Q7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX3BheWxvYWQgPSBQYXlsb2FkU2VyaWFsaXplci5zZXJpYWxpemUocGF5bG9hZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRpbWVvdXQ6IG51bWJlciA9IDYwMDAwO1xyXG5cclxuICAgIHB1YmxpYyBzZW5kQW5kR2V0UmVzdWx0PFRSZXN1bHQ+KCk6IFByb21pc2U8VFJlc3VsdD4ge1xyXG4gICAgICAgIHZhciByZXF1ZXN0UHJvbWlzZSA9XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZFZpYVhtbEh0dHBSZXF1ZXN0PFRSZXN1bHQ+KCkgfHxcclxuICAgICAgICAgICAgdGhpcy5zZW5kVmlhSnNvbnA8VFJlc3VsdD4oKTtcclxuXHJcbiAgICAgICAgaWYgKHJlcXVlc3RQcm9taXNlID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgXCJCcm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBiaWcgY3Jvc3MgZG9tYWluIHJlcXVlc3RzLlwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVxdWVzdFByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlbmRBbmRGb3JnZXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQcm9taXNlID1cclxuICAgICAgICAgICAgdGhpcy5zZW5kVmlhQmVhY29uKCkgfHxcclxuICAgICAgICAgICAgdGhpcy5zZW5kVmlhSW1hZ2UoKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNlbmRWaWFYbWxIdHRwUmVxdWVzdDx2b2lkPigpO1xyXG5cclxuICAgICAgICBpZiAocmVxdWVzdFByb21pc2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBcIkJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGJpZyBjcm9zcyBkb21haW4gcmVxdWVzdHMuXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0UHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRWaWFCZWFjb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gQ3Jvc3NEb21haW5SZXF1ZXN0LmFwcGVuZFF1ZXJ5U3RyaW5nKFxyXG4gICAgICAgICAgICB0aGlzLl91cmwsXHJcbiAgICAgICAgICAgIFwidHJhbnNwb3J0PWJlYWNvblwiXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5zZW5kQmVhY29uICE9PSBcInVuZGVmaW5lZFwiICYmXHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbih1cmwsIHRoaXMuX3BheWxvYWQpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBJbiBFZGdlIDE0IGFuZCAxNSBzZW5kQmVhY29uIHJhbmRvbWx5IGZhaWxzIHdpdGggZXJyb3IuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRWaWFJbWFnZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBDcm9zc0RvbWFpblJlcXVlc3QuYXBwZW5kUXVlcnlTdHJpbmcoXHJcbiAgICAgICAgICAgIHRoaXMuX3VybCxcclxuICAgICAgICAgICAgXCJ0cmFuc3BvcnQ9aW1hZ2UmXCIgKyB0aGlzLl9wYXlsb2FkXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHVybC5sZW5ndGggPiBDcm9zc0RvbWFpblJlcXVlc3QubWF4VXJsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNjcmlwdFxyXG4gICAgICAgIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWFnZS53aWR0aCA9IDE7XHJcbiAgICAgICAgaW1hZ2UuaGVpZ2h0ID0gMTtcclxuICAgICAgICBpbWFnZS5zcmMgPSB1cmw7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBpbWFnZS5vbmVycm9yID0gZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGltYWdlLm9uZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICgpID0+IHJlamVjdChuZXcgVGltZW91dChcIlRpbWVvdXQgaW4gc2VuZFZpYUltYWdlLlwiKSksXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbcmVxdWVzdFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kVmlhSnNvbnA8VFJlc3VsdD4oKTogUHJvbWlzZTxUUmVzdWx0PiB7XHJcbiAgICAgICAgLy8gSU5JVFxyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBcIk1pbmRib3hfanNvbnBfXCIgKyBDcm9zc0RvbWFpblJlcXVlc3QuanNvbnBSZXF1ZXN0TnVtYmVyKys7XHJcbiAgICAgICAgY29uc3QgcmVzb2x2ZU5hbWUgPSBuYW1lICsgXCJyZXNvbHZlXCI7XHJcbiAgICAgICAgY29uc3QgdXJsID0gQ3Jvc3NEb21haW5SZXF1ZXN0LmFwcGVuZFF1ZXJ5U3RyaW5nKFxyXG4gICAgICAgICAgICB0aGlzLl91cmwsXHJcbiAgICAgICAgICAgIFwidHJhbnNwb3J0PWpzb25wJlwiICtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BheWxvYWQgK1xyXG4gICAgICAgICAgICAgICAgXCImanNvbnBDYWxsYmFjaz1cIiArXHJcbiAgICAgICAgICAgICAgICAnd2luZG93W1wiJyArXHJcbiAgICAgICAgICAgICAgICBuYW1lICtcclxuICAgICAgICAgICAgICAgICdcIl0nXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHVybC5sZW5ndGggPiBDcm9zc0RvbWFpblJlcXVlc3QubWF4VXJsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNjcmlwdFxyXG4gICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICAgIHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgICBzY3JpcHQuc3JjID0gdXJsO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWVzdFByb21pc2UgPSBuZXcgUHJvbWlzZTxhbnk+KHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAvLyBTZXR1cCBoYW5kbGVyXHJcbiAgICAgICAgICAgIHdpbmRvd1tyZXNvbHZlTmFtZV0gPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB3aW5kb3dbbmFtZV0gPSBhRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd1tyZXNvbHZlTmFtZV0oYURhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDaGlsZChzY3JpcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbcmVzb2x2ZU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93W25hbWVdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dbcmVzb2x2ZU5hbWVdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCBKU09OXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcblxyXG4gICAgICAgIHZhciB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlPFRSZXN1bHQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IFRpbWVvdXQoXCJUaW1lb3V0IGluIHNlbmRWaWFKc29ucC5cIikpO1xyXG4gICAgICAgICAgICB9LCB0aGlzLnRpbWVvdXQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXF1ZXN0UHJvbWlzZSA9IHJlcXVlc3RQcm9taXNlLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICBpZiAoU2VydmljZVJlc3BvbnNlcy5pc0Vycm9yKHJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5odHRwU3RhdHVzQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5lcnJvck1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbcmVxdWVzdFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kVmlhWG1sSHR0cFJlcXVlc3Q8VFJlc3VsdD4oKTogUHJvbWlzZTxUUmVzdWx0PiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICBpZiAoIShcIndpdGhDcmVkZW50aWFsc1wiIGluIHhocikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdXJsID0gQ3Jvc3NEb21haW5SZXF1ZXN0LmFwcGVuZFF1ZXJ5U3RyaW5nKFxyXG4gICAgICAgICAgICB0aGlzLl91cmwsXHJcbiAgICAgICAgICAgIFwidHJhbnNwb3J0PVhtbEh0dHBSZXF1ZXN0XCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICh0aGlzLl9odHRwTWV0aG9kID09IEh0dHBNZXRob2RzLkdFVCkge1xyXG4gICAgICAgICAgICB1cmwgPSBDcm9zc0RvbWFpblJlcXVlc3QuYXBwZW5kUXVlcnlTdHJpbmcodXJsLCB0aGlzLl9wYXlsb2FkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHhoci5vcGVuKHRoaXMuX2h0dHBNZXRob2QsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgeGhyLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQ7XHJcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFxyXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiLFxyXG4gICAgICAgICAgICBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIHJlcXVlc3RQcm9taXNlID0gbmV3IFByb21pc2U8VFJlc3VsdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeGhyLnN0YXR1cyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHhoci5zdGF0dXMgPT0gMCAtINGC0LDQudC80LDRg9GCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBUaW1lb3V0KFwiVGltZW91dCBpbiBzZW5kVmlhWG1sSHR0cFJlcXVlc3QuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdElkOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2VydmljZVJlc3BvbnNlcy5pc0Vycm9yKHJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLmVycm9yTWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFja2VyUmVzcG9uc2UgPSByZXNwb25zZSBhcyBUcmFja2VyU2VydmljZVJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrZXJSZXNwb25zZS5yZXF1ZXN0SWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkID0gdHJhY2tlclJlc3BvbnNlLnJlcXVlc3RJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L3QtSDRg9C00LDQu9C+0YHRjCDRgNCw0YHQv9Cw0YDRgdC40YLRjCwg0LfQsNC/0LjRhdC90LXQvCDQsiDQvtGI0LjQsdC60YMg0LLQtdGB0Ywg0YLQtdC60YHRgiDQvtGC0LLQtdGC0LBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEh0dHBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSB8fCB4aHIucmVzcG9uc2VUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2h0dHBNZXRob2QgPT0gSHR0cE1ldGhvZHMuR0VUKSB7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeGhyLnNlbmQodGhpcy5fcGF5bG9hZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVxdWVzdFByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXBwZW5kUXVlcnlTdHJpbmcodXJsOiBzdHJpbmcsIHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB1cmwgKyAodXJsLm1hdGNoKC9cXD8vKSA/IFwiJlwiIDogXCI/XCIpICsgcXVlcnlTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFTQTtBQU1BO0FBTEE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXJQQTtBQUNBO0FBQ0E7QUFvUEE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/CrossDomainRequest/CrossDomainRequest.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/CrossDomainRequest/HttpMethods.ts":
/*!*********************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/CrossDomainRequest/HttpMethods.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar HttpMethods = /** @class */ (function () {\r\n    function HttpMethods() {\r\n    }\r\n    HttpMethods.GET = \"GET\";\r\n    HttpMethods.POST = \"POST\";\r\n    HttpMethods.PUT = \"PUT\";\r\n    HttpMethods.DELETE = \"DELETE\";\r\n    return HttpMethods;\r\n}());\r\nexports.HttpMethods = HttpMethods;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Nyb3NzRG9tYWluUmVxdWVzdC9IdHRwTWV0aG9kcy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvQ3Jvc3NEb21haW5SZXF1ZXN0L0h0dHBNZXRob2RzLnRzPzc0NDQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEh0dHBNZXRob2RzIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR0VUID0gXCJHRVRcIjtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUE9TVCA9IFwiUE9TVFwiO1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBQVVQgPSBcIlBVVFwiO1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBERUxFVEUgPSBcIkRFTEVURVwiO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUFBO0FBS0E7QUFKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFMQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/CrossDomainRequest/HttpMethods.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/CustomerSessionStorage.ts":
/*!*************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/CustomerSessionStorage.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar storageKey = \"directCrm-session\";\r\nvar CustomerSessionStorage = /** @class */ (function () {\r\n    function CustomerSessionStorage(cookieManager, windowOverride) {\r\n        this.MindboxDeviceUUIDName = \"mindboxDeviceUUID\";\r\n        this._window = windowOverride ? windowOverride : window;\r\n        this._cookieManager = cookieManager;\r\n    }\r\n    CustomerSessionStorage.prototype.setSession = function (session) {\r\n        var currentDate = new Date();\r\n        var expirationDate = new Date(currentDate.getFullYear() + 2, currentDate.getMonth(), currentDate.getDate());\r\n        this._cookieManager.removeAcrossBaseDomain(storageKey);\r\n        this._cookieManager.setJson(storageKey, session, expirationDate);\r\n        try {\r\n            this._window.localStorage[storageKey] = JSON.stringify(session);\r\n        }\r\n        catch (e) {\r\n            // не удалось записать в локальное хранилище и ладно.\r\n        }\r\n    };\r\n    CustomerSessionStorage.prototype.getDeviceUUID = function () {\r\n        var deviceUUID = this.tryGetDeviceUUID();\r\n        if (deviceUUID == null)\r\n            throw new Error(\"DeviceUUID not set\");\r\n        return deviceUUID;\r\n    };\r\n    CustomerSessionStorage.prototype.tryGetDeviceUUID = function () {\r\n        var deviceUUID = this.tryGetDeviceUUIDFromLocalStorage();\r\n        if (!deviceUUID) {\r\n            deviceUUID = this._cookieManager.tryGet(this.MindboxDeviceUUIDName);\r\n        }\r\n        return deviceUUID;\r\n    };\r\n    CustomerSessionStorage.prototype.tryGetDeviceUUIDFromLocalStorage = function () {\r\n        try {\r\n            return this._window.localStorage[this.MindboxDeviceUUIDName];\r\n        }\r\n        catch (_a) {\r\n            return null;\r\n        }\r\n    };\r\n    CustomerSessionStorage.prototype.setDeviceUUID = function (deviceUUID) {\r\n        this._cookieManager.removeAcrossBaseDomain(this.MindboxDeviceUUIDName);\r\n        this._cookieManager.set(this.MindboxDeviceUUIDName, deviceUUID, this._cookieManager.MaxCookieExpirationDate);\r\n        this.setSession({ deviceGuid: deviceUUID });\r\n        this.setDeviceUUIDToLocalStorage(deviceUUID);\r\n        this.removeOldLocalStorage();\r\n    };\r\n    CustomerSessionStorage.prototype.setDeviceUUIDToLocalStorage = function (deviceUUID) {\r\n        try {\r\n            this._window.localStorage[this.MindboxDeviceUUIDName] = deviceUUID;\r\n        }\r\n        catch (_a) {\r\n            // Не добавилось ну и ладно\r\n        }\r\n    };\r\n    CustomerSessionStorage.prototype.removeOldLocalStorage = function () {\r\n        try {\r\n            this._window.localStorage.removeItem(storageKey);\r\n        }\r\n        catch (_a) {\r\n            // Не удалилось ну и ладно\r\n        }\r\n    };\r\n    CustomerSessionStorage.prototype.isUsingDeviceUUIDInLocalStorage = function () {\r\n        try {\r\n            var sessionFromNewLocalStorage = this._window.localStorage[this.MindboxDeviceUUIDName];\r\n            if (sessionFromNewLocalStorage)\r\n                return true;\r\n            return false;\r\n        }\r\n        catch (_a) {\r\n            return false;\r\n        }\r\n    };\r\n    CustomerSessionStorage.prototype.deviceUUIDIsSet = function () {\r\n        // Если не заполнена кука mindboxDeviceUUID, считаем, что у нас нет актуального deviceUUID\r\n        var deviceUUID = this._cookieManager.tryGet(this.MindboxDeviceUUIDName);\r\n        return deviceUUID ? true : false;\r\n    };\r\n    return CustomerSessionStorage;\r\n}());\r\nexports.CustomerSessionStorage = CustomerSessionStorage;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0N1c3RvbWVyU2Vzc2lvblN0b3JhZ2UudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0N1c3RvbWVyU2Vzc2lvblN0b3JhZ2UudHM/NDczYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpzdHJpY3QtYm9vbGVhbi1leHByZXNzaW9ucyAqL1xyXG5pbXBvcnQgeyBTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4vTWVzc2FnZXNcIjtcclxuaW1wb3J0IHsgTWFuYWdlciBhcyBDb29raWVNYW5hZ2VyIH0gZnJvbSBcIi4vQ29va2llTWFuYWdlclwiO1xyXG5cclxuY29uc3Qgc3RvcmFnZUtleSA9IFwiZGlyZWN0Q3JtLXNlc3Npb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDdXN0b21lclNlc3Npb25TdG9yYWdlIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgTWluZGJveERldmljZVVVSUROYW1lID0gXCJtaW5kYm94RGV2aWNlVVVJRFwiO1xyXG5cclxuICAgIHByaXZhdGUgX3dpbmRvdzogUGFydGlhbDxXaW5kb3c+O1xyXG4gICAgcHJpdmF0ZSBfY29va2llTWFuYWdlcjogQ29va2llTWFuYWdlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBjb29raWVNYW5hZ2VyOiBDb29raWVNYW5hZ2VyLFxyXG4gICAgICAgIHdpbmRvd092ZXJyaWRlPzogUGFydGlhbDxXaW5kb3c+XHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3dPdmVycmlkZSA/IHdpbmRvd092ZXJyaWRlIDogd2luZG93O1xyXG4gICAgICAgIHRoaXMuX2Nvb2tpZU1hbmFnZXIgPSBjb29raWVNYW5hZ2VyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U2Vzc2lvbihzZXNzaW9uOiBTZXNzaW9uQ29va2llKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgZXhwaXJhdGlvbkRhdGUgPSBuZXcgRGF0ZShcclxuICAgICAgICAgICAgY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSArIDIsXHJcbiAgICAgICAgICAgIGN1cnJlbnREYXRlLmdldE1vbnRoKCksXHJcbiAgICAgICAgICAgIGN1cnJlbnREYXRlLmdldERhdGUoKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5fY29va2llTWFuYWdlci5yZW1vdmVBY3Jvc3NCYXNlRG9tYWluKHN0b3JhZ2VLZXkpO1xyXG4gICAgICAgIHRoaXMuX2Nvb2tpZU1hbmFnZXIuc2V0SnNvbihzdG9yYWdlS2V5LCBzZXNzaW9uLCBleHBpcmF0aW9uRGF0ZSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvdy5sb2NhbFN0b3JhZ2Vbc3RvcmFnZUtleV0gPSBKU09OLnN0cmluZ2lmeShzZXNzaW9uKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vINC90LUg0YPQtNCw0LvQvtGB0Ywg0LfQsNC/0LjRgdCw0YLRjCDQsiDQu9C+0LrQsNC70YzQvdC+0LUg0YXRgNCw0L3QuNC70LjRidC1INC4INC70LDQtNC90L4uXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXREZXZpY2VVVUlEKCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZGV2aWNlVVVJRCA9IHRoaXMudHJ5R2V0RGV2aWNlVVVJRCgpO1xyXG4gICAgICAgIGlmIChkZXZpY2VVVUlEID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIkRldmljZVVVSUQgbm90IHNldFwiKTtcclxuICAgICAgICByZXR1cm4gZGV2aWNlVVVJRDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJ5R2V0RGV2aWNlVVVJRCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBkZXZpY2VVVUlEID0gdGhpcy50cnlHZXREZXZpY2VVVUlERnJvbUxvY2FsU3RvcmFnZSgpO1xyXG5cclxuICAgICAgICBpZiAoIWRldmljZVVVSUQpIHtcclxuICAgICAgICAgICAgZGV2aWNlVVVJRCA9IHRoaXMuX2Nvb2tpZU1hbmFnZXIudHJ5R2V0KHRoaXMuTWluZGJveERldmljZVVVSUROYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRldmljZVVVSUQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRyeUdldERldmljZVVVSURGcm9tTG9jYWxTdG9yYWdlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvdy5sb2NhbFN0b3JhZ2VbdGhpcy5NaW5kYm94RGV2aWNlVVVJRE5hbWVdO1xyXG4gICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldERldmljZVVVSUQoZGV2aWNlVVVJRDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fY29va2llTWFuYWdlci5yZW1vdmVBY3Jvc3NCYXNlRG9tYWluKHRoaXMuTWluZGJveERldmljZVVVSUROYW1lKTtcclxuICAgICAgICB0aGlzLl9jb29raWVNYW5hZ2VyLnNldChcclxuICAgICAgICAgICAgdGhpcy5NaW5kYm94RGV2aWNlVVVJRE5hbWUsXHJcbiAgICAgICAgICAgIGRldmljZVVVSUQsXHJcbiAgICAgICAgICAgIHRoaXMuX2Nvb2tpZU1hbmFnZXIuTWF4Q29va2llRXhwaXJhdGlvbkRhdGVcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuc2V0U2Vzc2lvbih7IGRldmljZUd1aWQ6IGRldmljZVVVSUQgfSk7XHJcbiAgICAgICAgdGhpcy5zZXREZXZpY2VVVUlEVG9Mb2NhbFN0b3JhZ2UoZGV2aWNlVVVJRCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVPbGRMb2NhbFN0b3JhZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldERldmljZVVVSURUb0xvY2FsU3RvcmFnZShkZXZpY2VVVUlEOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cubG9jYWxTdG9yYWdlW3RoaXMuTWluZGJveERldmljZVVVSUROYW1lXSA9IGRldmljZVVVSUQ7XHJcbiAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgIC8vINCd0LUg0LTQvtCx0LDQstC40LvQvtGB0Ywg0L3RgyDQuCDQu9Cw0LTQvdC+XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVPbGRMb2NhbFN0b3JhZ2UoKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5fd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHN0b3JhZ2VLZXkpO1xyXG4gICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAvLyDQndC1INGD0LTQsNC70LjQu9C+0YHRjCDQvdGDINC4INC70LDQtNC90L5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVXNpbmdEZXZpY2VVVUlESW5Mb2NhbFN0b3JhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHNlc3Npb25Gcm9tTmV3TG9jYWxTdG9yYWdlID0gdGhpcy5fd2luZG93LmxvY2FsU3RvcmFnZVtcclxuICAgICAgICAgICAgICAgIHRoaXMuTWluZGJveERldmljZVVVSUROYW1lXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmIChzZXNzaW9uRnJvbU5ld0xvY2FsU3RvcmFnZSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGV2aWNlVVVJRElzU2V0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vINCV0YHQu9C4INC90LUg0LfQsNC/0L7Qu9C90LXQvdCwINC60YPQutCwIG1pbmRib3hEZXZpY2VVVUlELCDRgdGH0LjRgtCw0LXQvCwg0YfRgtC+INGDINC90LDRgSDQvdC10YIg0LDQutGC0YPQsNC70YzQvdC+0LPQviBkZXZpY2VVVUlEXHJcbiAgICAgICAgY29uc3QgZGV2aWNlVVVJRCA9IHRoaXMuX2Nvb2tpZU1hbmFnZXIudHJ5R2V0KFxyXG4gICAgICAgICAgICB0aGlzLk1pbmRib3hEZXZpY2VVVUlETmFtZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGRldmljZVVVSUQgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOztBQUlBO0FBRUE7QUFNQTtBQUxBO0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQXJHQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/CustomerSessionStorage.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Deployment.ts":
/*!*************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Deployment.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.version = \"0.21.0\";\r\nvar defaultServiceDomainTemplateKey = \"serviceDomainDefinedByDeployment\";\r\nvar defaultServiceDomain = \"api.mindbox.ru\";\r\nexports.getDefaultServiceDomain = function () {\r\n    if (defaultServiceDomain.indexOf(defaultServiceDomainTemplateKey) != -1) {\r\n        return \"api.mindbox.ru\";\r\n    }\r\n    return defaultServiceDomain;\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0RlcGxveW1lbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0RlcGxveW1lbnQudHM/YzFhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJkZWNsYXJlIGNvbnN0IF9fVkVSU0lPTl9fOiBzdHJpbmc7XHJcbmV4cG9ydCBjb25zdCB2ZXJzaW9uID0gX19WRVJTSU9OX187XHJcblxyXG5jb25zdCBkZWZhdWx0U2VydmljZURvbWFpblRlbXBsYXRlS2V5ID0gXCJzZXJ2aWNlRG9tYWluRGVmaW5lZEJ5RGVwbG95bWVudFwiO1xyXG5jb25zdCBkZWZhdWx0U2VydmljZURvbWFpbiA9IFwie3NlcnZpY2VEb21haW5EZWZpbmVkQnlEZXBsb3ltZW50fVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRTZXJ2aWNlRG9tYWluID0gKCkgPT4ge1xyXG4gICAgaWYgKGRlZmF1bHRTZXJ2aWNlRG9tYWluLmluZGV4T2YoZGVmYXVsdFNlcnZpY2VEb21haW5UZW1wbGF0ZUtleSkgIT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gXCJhcGkubWluZGJveC5ydVwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWZhdWx0U2VydmljZURvbWFpbjtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Deployment.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Errors/HttpError.ts":
/*!*******************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Errors/HttpError.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar HttpError = /** @class */ (function () {\r\n    function HttpError(statusCode, message, requestId) {\r\n        this.statusCode = statusCode;\r\n        this.name = \"HttpError\";\r\n        this.message = message;\r\n        this.requestId = requestId;\r\n        // К сожалению здесь только гуси (по другому заставить это работать во всех браузерах не получилось)\r\n        try {\r\n            throw new Error();\r\n        }\r\n        catch (e) {\r\n            this.stack = e.stack;\r\n        }\r\n    }\r\n    return HttpError;\r\n}());\r\nexports.HttpError = HttpError;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Vycm9ycy9IdHRwRXJyb3IudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Vycm9ycy9IdHRwRXJyb3IudHM/OWU1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0RXJyb3IgfSBmcm9tIFwiLi9SZXF1ZXN0RXJyb3JcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwRXJyb3IgaW1wbGVtZW50cyBFcnJvciwgUmVxdWVzdEVycm9yIHtcclxuICAgIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHN0YWNrOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc3RhdHVzQ29kZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHJlcXVlc3RJZDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IFwiSHR0cEVycm9yXCI7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcclxuXHJcbiAgICAgICAgLy8g0Jog0YHQvtC20LDQu9C10L3QuNGOINC30LTQtdGB0Ywg0YLQvtC70YzQutC+INCz0YPRgdC4ICjQv9C+INC00YDRg9Cz0L7QvNGDINC30LDRgdGC0LDQstC40YLRjCDRjdGC0L4g0YDQsNCx0L7RgtCw0YLRjCDQstC+INCy0YHQtdGFINCx0YDQsNGD0LfQtdGA0LDRhSDQvdC1INC/0L7Qu9GD0YfQuNC70L7RgdGMKVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFjayA9IGUuc3RhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXBCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Errors/HttpError.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Errors/MultipleCallsToCreateError.ts":
/*!************************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Errors/MultipleCallsToCreateError.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar MultipleCallsToCreateError = /** @class */ (function () {\r\n    function MultipleCallsToCreateError(settingsDiff) {\r\n        this.stack = null;\r\n        if (settingsDiff == null)\r\n            throw new Error(\"'settingsDiff' cannot be null\");\r\n        this.name = \"MultipleCallsToCreateError\";\r\n        var description = \"Multiple call for create. These settings are different from current\";\r\n        var differentSettings = settingsDiff\r\n            .map(function (sd) { return sd.key + \": \" + sd.message; })\r\n            .join(\"; \");\r\n        this.message = description + \": \" + differentSettings;\r\n    }\r\n    return MultipleCallsToCreateError;\r\n}());\r\nexports.MultipleCallsToCreateError = MultipleCallsToCreateError;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Vycm9ycy9NdWx0aXBsZUNhbGxzVG9DcmVhdGVFcnJvci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvRXJyb3JzL011bHRpcGxlQ2FsbHNUb0NyZWF0ZUVycm9yLnRzPzhiNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2V0dGluZ3NDb21wYXJpc29uUmVzdWx0IH0gZnJvbSBcInRyYWNrZXIvdjEvVHJhY2tlclNldHRpbmdzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTXVsdGlwbGVDYWxsc1RvQ3JlYXRlRXJyb3IgaW1wbGVtZW50cyBFcnJvciB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyByZWFkb25seSBzdGFjazogc3RyaW5nID0gbnVsbDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2V0dGluZ3NEaWZmOiBTZXR0aW5nc0NvbXBhcmlzb25SZXN1bHRbXSkge1xyXG4gICAgICAgIGlmIChzZXR0aW5nc0RpZmYgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3NldHRpbmdzRGlmZicgY2Fubm90IGJlIG51bGxcIik7XHJcblxyXG4gICAgICAgIHRoaXMubmFtZSA9IFwiTXVsdGlwbGVDYWxsc1RvQ3JlYXRlRXJyb3JcIjtcclxuXHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPVxyXG4gICAgICAgICAgICBcIk11bHRpcGxlIGNhbGwgZm9yIGNyZWF0ZS4gVGhlc2Ugc2V0dGluZ3MgYXJlIGRpZmZlcmVudCBmcm9tIGN1cnJlbnRcIjtcclxuICAgICAgICBjb25zdCBkaWZmZXJlbnRTZXR0aW5ncyA9IHNldHRpbmdzRGlmZlxyXG4gICAgICAgICAgICAubWFwKHNkID0+IGAke3NkLmtleX06ICR7c2QubWVzc2FnZX1gKVxyXG4gICAgICAgICAgICAuam9pbihcIjsgXCIpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGAke2Rlc2NyaXB0aW9ufTogJHtkaWZmZXJlbnRTZXR0aW5nc31gO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUtBO0FBRkE7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBbEJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Errors/MultipleCallsToCreateError.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Errors/RequestError.ts":
/*!**********************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Errors/RequestError.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Vycm9ycy9SZXF1ZXN0RXJyb3IudHMuanMiLCJzb3VyY2VzIjpbXSwibWFwcGluZ3MiOiI7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Errors/RequestError.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Errors/Timeout.ts":
/*!*****************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Errors/Timeout.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Timeout = /** @class */ (function () {\r\n    function Timeout(message) {\r\n        this.name = \"Timeout\";\r\n        this.message = message;\r\n        // К сожалению здесь только гуси (по другому заставить это работать во всех браузерах не получилось)\r\n        try {\r\n            throw new Error();\r\n        }\r\n        catch (e) {\r\n            this.stack = e.stack;\r\n        }\r\n    }\r\n    return Timeout;\r\n}());\r\nexports.Timeout = Timeout;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Vycm9ycy9UaW1lb3V0LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vSmF2YXNjcmlwdC5TREsvVHJhY2tlci92MS9FcnJvcnMvVGltZW91dC50cz84OWE3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBUaW1lb3V0IGltcGxlbWVudHMgRXJyb3Ige1xyXG4gICAgcHVibGljIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc3RhY2s6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gXCJUaW1lb3V0XCI7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuXHJcbiAgICAgICAgLy8g0Jog0YHQvtC20LDQu9C10L3QuNGOINC30LTQtdGB0Ywg0YLQvtC70YzQutC+INCz0YPRgdC4ICjQv9C+INC00YDRg9Cz0L7QvNGDINC30LDRgdGC0LDQstC40YLRjCDRjdGC0L4g0YDQsNCx0L7RgtCw0YLRjCDQstC+INCy0YHQtdGFINCx0YDQsNGD0LfQtdGA0LDRhSDQvdC1INC/0L7Qu9GD0YfQuNC70L7RgdGMKVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFjayA9IGUuc3RhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBaEJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Errors/Timeout.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Errors/index.ts":
/*!***************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Errors/index.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar RequestError_1 = __webpack_require__(/*! ./RequestError */ \"./Javascript.SDK/Tracker/v1/Errors/RequestError.ts\");\r\nexports.RequestError = RequestError_1.RequestError;\r\nvar HttpError_1 = __webpack_require__(/*! ./HttpError */ \"./Javascript.SDK/Tracker/v1/Errors/HttpError.ts\");\r\nexports.HttpError = HttpError_1.HttpError;\r\nvar Timeout_1 = __webpack_require__(/*! ./Timeout */ \"./Javascript.SDK/Tracker/v1/Errors/Timeout.ts\");\r\nexports.Timeout = Timeout_1.Timeout;\r\nvar MultipleCallsToCreateError_1 = __webpack_require__(/*! ./MultipleCallsToCreateError */ \"./Javascript.SDK/Tracker/v1/Errors/MultipleCallsToCreateError.ts\");\r\nexports.MultipleCallsToCreateError = MultipleCallsToCreateError_1.MultipleCallsToCreateError;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0Vycm9ycy9pbmRleC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvRXJyb3JzL2luZGV4LnRzP2NhNjIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgUmVxdWVzdEVycm9yIH0gZnJvbSBcIi4vUmVxdWVzdEVycm9yXCI7XHJcbmV4cG9ydCB7IEh0dHBFcnJvciB9IGZyb20gXCIuL0h0dHBFcnJvclwiO1xyXG5leHBvcnQgeyBUaW1lb3V0IH0gZnJvbSBcIi4vVGltZW91dFwiO1xyXG5leHBvcnQgeyBNdWx0aXBsZUNhbGxzVG9DcmVhdGVFcnJvciB9IGZyb20gXCIuL011bHRpcGxlQ2FsbHNUb0NyZWF0ZUVycm9yXCI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Errors/index.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/GlobalTypes.ts":
/*!**************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/GlobalTypes.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL0dsb2JhbFR5cGVzLnRzLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiOzsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/GlobalTypes.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/ModuleManager.ts":
/*!****************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/ModuleManager.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar es6_promise_1 = __webpack_require__(/*! ../libs/es6-promise */ \"./Javascript.SDK/Tracker/libs/es6-promise.js\");\r\nvar SdkModules_1 = __webpack_require__(/*! ../../Modules/SdkModules */ \"./Javascript.SDK/Modules/SdkModules.ts\");\r\nvar Deployment_1 = __webpack_require__(/*! tracker/v1/Deployment */ \"./Javascript.SDK/Tracker/v1/Deployment.ts\");\r\nvar ModuleManager = /** @class */ (function () {\r\n    function ModuleManager(trackerSettings, sessionStorage, deviceUUIDObtainingPromiseProvider, logger) {\r\n        this.loadingModulePromise = null;\r\n        this.previousCommandPromise = es6_promise_1.Promise.resolve();\r\n        this.isSupportedByBrowserCommand = function (command, params) {\r\n            return command === \"isSupportedByBrowser\";\r\n        };\r\n        if (trackerSettings == null)\r\n            throw new Error(\"'trackerSettings' cannot be null\");\r\n        if (sessionStorage == null)\r\n            throw new Error(\"'sessionStorage' cannot be null\");\r\n        if (deviceUUIDObtainingPromiseProvider == null)\r\n            throw new Error(\"'deviceUUIDObtainingPromiseProvider' cannot be null\");\r\n        if (logger == null)\r\n            throw new Error(\"'logger' cannot be null\");\r\n        this.trackerSettings = trackerSettings;\r\n        this.sessionStorage = sessionStorage;\r\n        this.deviceUUIDObtainingPromiseProvider = deviceUUIDObtainingPromiseProvider;\r\n        this.logger = logger;\r\n    }\r\n    ModuleManager.prototype.tryGetModuleCommand = function (methodName) {\r\n        var indexOfDot = methodName.indexOf(\".\");\r\n        if (indexOfDot <= 0)\r\n            return null;\r\n        var moduleName = methodName.substr(0, indexOfDot);\r\n        if (SdkModules_1.moduleExists(moduleName)) {\r\n            var command = methodName.substr(indexOfDot + 1);\r\n            return {\r\n                moduleName: moduleName,\r\n                command: command\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    ModuleManager.prototype.invokeModule = function (moduleCommand, arrayParams) {\r\n        var _this = this;\r\n        var moduleName = moduleCommand.moduleName, command = moduleCommand.command;\r\n        if (arrayParams instanceof Array) {\r\n            if (arrayParams.length > 1)\r\n                throw new Error(\"[Mindbox.SDK] <\" + moduleName + \"> Too many arguments for command.\");\r\n        }\r\n        var params = arrayParams instanceof Array ? arrayParams[0] : arrayParams;\r\n        var moduleInfo = SdkModules_1.getModuleInfo(moduleName);\r\n        var isSupportedByBrowser = moduleInfo.isSupportedByBrowser();\r\n        if (this.isSupportedByBrowserCommand(command, params)) {\r\n            if (params == null || typeof params.callback !== \"function\")\r\n                throw new Error(\"[Mindbox.SDK] <\" + moduleName + \"> Callback for command \\\"isSupportedByBrowser\\\" not set.\");\r\n            params.callback(isSupportedByBrowser);\r\n            return;\r\n        }\r\n        if (!isSupportedByBrowser)\r\n            return;\r\n        this.moduleThen(moduleName, function (module) {\r\n            if (typeof module[command] === \"undefined\")\r\n                throw new Error(\"[Mindbox.SDK] <\" + moduleName + \"> Unknown command \\\"\" + command + \"\\\".\");\r\n            return module[command](_this.trackerSettings, _this.sessionStorage.getDeviceUUID(), params);\r\n        });\r\n    };\r\n    // TODO: Map of <module, prevPromise<Module>> for support of different modules\r\n    ModuleManager.prototype.moduleThen = function (moduleName, moduleCommand) {\r\n        var _this = this;\r\n        var deviceUUIDObtainingPromise = this.deviceUUIDObtainingPromiseProvider();\r\n        if (deviceUUIDObtainingPromise == null) {\r\n            throw new Error(\"Previous request promise is expected to be set. \" +\r\n                \"'mindbox(\\\"create\\\")' is expected to be called ahead of every other command\");\r\n        }\r\n        if (this.loadingModulePromise == null) {\r\n            var moduleLoadingPromise = new es6_promise_1.Promise(function (resolve, reject) {\r\n                SdkModules_1.loadModule(_this.trackerSettings, moduleName, Deployment_1.version, _this.logger).then(function (module) { return resolve(module); }, function (moduleLoadingError) { return reject(moduleLoadingError); });\r\n            });\r\n            this.loadingModulePromise = es6_promise_1.Promise.all([\r\n                moduleLoadingPromise,\r\n                deviceUUIDObtainingPromise\r\n            ]).then(\r\n            // Take first element of array that represents results of `Promise.all<Module, void>`\r\n            // It is fixed-sized strongly typed array [Module, void]\r\n            function (results) { return results[0]; }, function (moduleLoadingOrInitialRequestError) {\r\n                return es6_promise_1.Promise.reject(moduleLoadingOrInitialRequestError);\r\n            });\r\n        }\r\n        this.loadingModulePromise.then(function (module) {\r\n            _this.previousCommandPromise = _this.previousCommandPromise.then(function () {\r\n                return new es6_promise_1.Promise(function (resolve) {\r\n                    moduleCommand(module).then(resolve, function (moduleCommandError) {\r\n                        _this.logger.logError(moduleCommandError);\r\n                        resolve();\r\n                    });\r\n                });\r\n            });\r\n        }, function (error) { return _this.logger.logError(error); });\r\n    };\r\n    return ModuleManager;\r\n}());\r\nexports.ModuleManager = ModuleManager;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL01vZHVsZU1hbmFnZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL01vZHVsZU1hbmFnZXIudHM/Yzk1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm9taXNlIH0gZnJvbSBcIi4uL2xpYnMvZXM2LXByb21pc2VcIjtcclxuaW1wb3J0IHtcclxuICAgIGdldE1vZHVsZUluZm8sXHJcbiAgICBsb2FkTW9kdWxlLFxyXG4gICAgbW9kdWxlRXhpc3RzXHJcbn0gZnJvbSBcIi4uLy4uL01vZHVsZXMvU2RrTW9kdWxlc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgSXNTdXBwb3J0ZWRCeUJyb3dzZXJDb21tYW5kUGFyYW1ldGVycyxcclxuICAgIE1vZHVsZU5hbWVcclxufSBmcm9tIFwiLi4vLi4vTW9kdWxlcy9Nb2R1bGVJbmZvXCI7XHJcbmltcG9ydCB7IE1vZHVsZSB9IGZyb20gXCIuLi8uLi9Nb2R1bGVzL01vZHVsZVwiO1xyXG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcInRyYWNrZXIvdjEvRGVwbG95bWVudFwiO1xyXG5pbXBvcnQgeyBDdXN0b21lclNlc3Npb25TdG9yYWdlIH0gZnJvbSBcInRyYWNrZXIvdjEvQ3VzdG9tZXJTZXNzaW9uU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBUcmFja2VyU2V0dGluZ3MgfSBmcm9tIFwidHJhY2tlci92MS9UcmFja2VyU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgSVRyYWNrZXJMb2dnZXIgfSBmcm9tIFwidHJhY2tlci92MS9UcmFja2VyTG9nZ2VyL0lUcmFja2VyTG9nZ2VyXCI7XHJcblxyXG5pbnRlcmZhY2UgTW9kdWxlQ29tbWFuZCB7XHJcbiAgICBtb2R1bGVOYW1lOiBNb2R1bGVOYW1lO1xyXG4gICAgY29tbWFuZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTW9kdWxlTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRyYWNrZXJTZXR0aW5nczogVHJhY2tlclNldHRpbmdzO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBzZXNzaW9uU3RvcmFnZTogQ3VzdG9tZXJTZXNzaW9uU3RvcmFnZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBJVHJhY2tlckxvZ2dlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGV2aWNlVVVJRE9idGFpbmluZ1Byb21pc2VQcm92aWRlcjogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICBwcml2YXRlIGxvYWRpbmdNb2R1bGVQcm9taXNlOiBQcm9taXNlPE1vZHVsZSB8IG5ldmVyPiA9IG51bGw7XHJcbiAgICBwcml2YXRlIHByZXZpb3VzQ29tbWFuZFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgICAgdHJhY2tlclNldHRpbmdzOiBUcmFja2VyU2V0dGluZ3MsXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2U6IEN1c3RvbWVyU2Vzc2lvblN0b3JhZ2UsXHJcbiAgICAgICAgZGV2aWNlVVVJRE9idGFpbmluZ1Byb21pc2VQcm92aWRlcjogKCkgPT4gUHJvbWlzZTx2b2lkPixcclxuICAgICAgICBsb2dnZXI6IElUcmFja2VyTG9nZ2VyXHJcbiAgICApIHtcclxuICAgICAgICBpZiAodHJhY2tlclNldHRpbmdzID09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIid0cmFja2VyU2V0dGluZ3MnIGNhbm5vdCBiZSBudWxsXCIpO1xyXG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInc2Vzc2lvblN0b3JhZ2UnIGNhbm5vdCBiZSBudWxsXCIpO1xyXG4gICAgICAgIGlmIChkZXZpY2VVVUlET2J0YWluaW5nUHJvbWlzZVByb3ZpZGVyID09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwiJ2RldmljZVVVSURPYnRhaW5pbmdQcm9taXNlUHJvdmlkZXInIGNhbm5vdCBiZSBudWxsXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBpZiAobG9nZ2VyID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIidsb2dnZXInIGNhbm5vdCBiZSBudWxsXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRyYWNrZXJTZXR0aW5ncyA9IHRyYWNrZXJTZXR0aW5ncztcclxuICAgICAgICB0aGlzLnNlc3Npb25TdG9yYWdlID0gc2Vzc2lvblN0b3JhZ2U7XHJcbiAgICAgICAgdGhpcy5kZXZpY2VVVUlET2J0YWluaW5nUHJvbWlzZVByb3ZpZGVyID0gZGV2aWNlVVVJRE9idGFpbmluZ1Byb21pc2VQcm92aWRlcjtcclxuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJ5R2V0TW9kdWxlQ29tbWFuZChtZXRob2ROYW1lOiBzdHJpbmcpOiBNb2R1bGVDb21tYW5kIHtcclxuICAgICAgICBjb25zdCBpbmRleE9mRG90ID0gbWV0aG9kTmFtZS5pbmRleE9mKFwiLlwiKTtcclxuICAgICAgICBpZiAoaW5kZXhPZkRvdCA8PSAwKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgbW9kdWxlTmFtZSA9IG1ldGhvZE5hbWUuc3Vic3RyKDAsIGluZGV4T2ZEb3QpO1xyXG4gICAgICAgIGlmIChtb2R1bGVFeGlzdHMobW9kdWxlTmFtZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG1ldGhvZE5hbWUuc3Vic3RyKGluZGV4T2ZEb3QgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgY29tbWFuZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGludm9rZU1vZHVsZShtb2R1bGVDb21tYW5kOiBNb2R1bGVDb21tYW5kLCBhcnJheVBhcmFtczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgeyBtb2R1bGVOYW1lLCBjb21tYW5kIH0gPSBtb2R1bGVDb21tYW5kO1xyXG5cclxuICAgICAgICBpZiAoYXJyYXlQYXJhbXMgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoYXJyYXlQYXJhbXMubGVuZ3RoID4gMSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgW01pbmRib3guU0RLXSA8JHttb2R1bGVOYW1lfT4gVG9vIG1hbnkgYXJndW1lbnRzIGZvciBjb21tYW5kLmBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwYXJhbXMgPVxyXG4gICAgICAgICAgICBhcnJheVBhcmFtcyBpbnN0YW5jZW9mIEFycmF5ID8gYXJyYXlQYXJhbXNbMF0gOiBhcnJheVBhcmFtcztcclxuXHJcbiAgICAgICAgY29uc3QgbW9kdWxlSW5mbyA9IGdldE1vZHVsZUluZm8obW9kdWxlTmFtZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzU3VwcG9ydGVkQnlCcm93c2VyID0gbW9kdWxlSW5mby5pc1N1cHBvcnRlZEJ5QnJvd3NlcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1N1cHBvcnRlZEJ5QnJvd3NlckNvbW1hbmQoY29tbWFuZCwgcGFyYW1zKSkge1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zID09IG51bGwgfHwgdHlwZW9mIHBhcmFtcy5jYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBbTWluZGJveC5TREtdIDwke21vZHVsZU5hbWV9PiBDYWxsYmFjayBmb3IgY29tbWFuZCBcImlzU3VwcG9ydGVkQnlCcm93c2VyXCIgbm90IHNldC5gXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrKGlzU3VwcG9ydGVkQnlCcm93c2VyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFpc1N1cHBvcnRlZEJ5QnJvd3NlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLm1vZHVsZVRoZW4obW9kdWxlTmFtZSwgbW9kdWxlID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGVbY29tbWFuZF0gPT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYFtNaW5kYm94LlNES10gPCR7bW9kdWxlTmFtZX0+IFVua25vd24gY29tbWFuZCBcIiR7Y29tbWFuZH1cIi5gXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlW2NvbW1hbmRdKFxyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VyU2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25TdG9yYWdlLmdldERldmljZVVVSUQoKSxcclxuICAgICAgICAgICAgICAgIHBhcmFtc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNTdXBwb3J0ZWRCeUJyb3dzZXJDb21tYW5kID0gKFxyXG4gICAgICAgIGNvbW1hbmQ6IHN0cmluZyxcclxuICAgICAgICBwYXJhbXM6IGFueVxyXG4gICAgKTogcGFyYW1zIGlzIElzU3VwcG9ydGVkQnlCcm93c2VyQ29tbWFuZFBhcmFtZXRlcnMgPT4ge1xyXG4gICAgICAgIHJldHVybiBjb21tYW5kID09PSBcImlzU3VwcG9ydGVkQnlCcm93c2VyXCI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRPRE86IE1hcCBvZiA8bW9kdWxlLCBwcmV2UHJvbWlzZTxNb2R1bGU+PiBmb3Igc3VwcG9ydCBvZiBkaWZmZXJlbnQgbW9kdWxlc1xyXG4gICAgcHJpdmF0ZSBtb2R1bGVUaGVuKFxyXG4gICAgICAgIG1vZHVsZU5hbWU6IE1vZHVsZU5hbWUsXHJcbiAgICAgICAgbW9kdWxlQ29tbWFuZDogKG1vZHVsZTogTW9kdWxlKSA9PiBQcm9taXNlPHZvaWQ+XHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBkZXZpY2VVVUlET2J0YWluaW5nUHJvbWlzZSA9IHRoaXMuZGV2aWNlVVVJRE9idGFpbmluZ1Byb21pc2VQcm92aWRlcigpO1xyXG4gICAgICAgIGlmIChkZXZpY2VVVUlET2J0YWluaW5nUHJvbWlzZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwiUHJldmlvdXMgcmVxdWVzdCBwcm9taXNlIGlzIGV4cGVjdGVkIHRvIGJlIHNldC4gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiJ21pbmRib3goXFxcImNyZWF0ZVxcXCIpJyBpcyBleHBlY3RlZCB0byBiZSBjYWxsZWQgYWhlYWQgb2YgZXZlcnkgb3RoZXIgY29tbWFuZFwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nTW9kdWxlUHJvbWlzZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZUxvYWRpbmdQcm9taXNlID0gbmV3IFByb21pc2U8TW9kdWxlPihcclxuICAgICAgICAgICAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkTW9kdWxlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZXJTZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXJcclxuICAgICAgICAgICAgICAgICAgICApLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9PiByZXNvbHZlKG1vZHVsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUxvYWRpbmdFcnJvciA9PiByZWplY3QobW9kdWxlTG9hZGluZ0Vycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ01vZHVsZVByb21pc2UgPSBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgICAgICBtb2R1bGVMb2FkaW5nUHJvbWlzZSxcclxuICAgICAgICAgICAgICAgIGRldmljZVVVSURPYnRhaW5pbmdQcm9taXNlXHJcbiAgICAgICAgICAgIF0pLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAvLyBUYWtlIGZpcnN0IGVsZW1lbnQgb2YgYXJyYXkgdGhhdCByZXByZXNlbnRzIHJlc3VsdHMgb2YgYFByb21pc2UuYWxsPE1vZHVsZSwgdm9pZD5gXHJcbiAgICAgICAgICAgICAgICAvLyBJdCBpcyBmaXhlZC1zaXplZCBzdHJvbmdseSB0eXBlZCBhcnJheSBbTW9kdWxlLCB2b2lkXVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9PiByZXN1bHRzWzBdLFxyXG4gICAgICAgICAgICAgICAgbW9kdWxlTG9hZGluZ09ySW5pdGlhbFJlcXVlc3RFcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1vZHVsZUxvYWRpbmdPckluaXRpYWxSZXF1ZXN0RXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2FkaW5nTW9kdWxlUHJvbWlzZS50aGVuKFxyXG4gICAgICAgICAgICBtb2R1bGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0NvbW1hbmRQcm9taXNlID0gdGhpcy5wcmV2aW91c0NvbW1hbmRQcm9taXNlLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb21tYW5kKG1vZHVsZSkudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbW1hbmRFcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZ0Vycm9yKG1vZHVsZUNvbW1hbmRFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvciA9PiB0aGlzLmxvZ2dlci5sb2dFcnJvcihlcnJvcilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBVUE7QUFVQTtBQVNBO0FBSEE7QUFDQTtBQW1GQTtBQUlBO0FBQ0E7QUFoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUNBO0FBU0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFBQTtBQTVKQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/ModuleManager.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/PayloadSerializer/FormPayloadSerializer.ts":
/*!******************************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/PayloadSerializer/FormPayloadSerializer.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FormPayloadSerializer = /** @class */ (function () {\r\n    function FormPayloadSerializer() {\r\n    }\r\n    FormPayloadSerializer.prototype.serialize = function (obj, prefix) {\r\n        var str = [];\r\n        var hasProperties = false;\r\n        if (typeof obj != \"string\") {\r\n            for (var property in obj) {\r\n                if (obj.hasOwnProperty(property)) {\r\n                    hasProperties = true;\r\n                    var key = prefix ? prefix + \".\" + property : property;\r\n                    var value = obj[property];\r\n                    if (Array.isArray(value)) {\r\n                        for (var i = 0; i < value.length; i++) {\r\n                            str.push(this.serialize(value[i], key + \"[\" + i + \"]\"));\r\n                        }\r\n                    }\r\n                    else if (typeof value === \"object\") {\r\n                        str.push(this.serialize(value, key));\r\n                    }\r\n                    else if (typeof value !== \"undefined\") {\r\n                        str.push(encodeURIComponent(key) +\r\n                            \"=\" +\r\n                            encodeURIComponent(value));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!hasProperties && typeof obj !== \"undefined\" && obj !== null) {\r\n            str.push(encodeURIComponent(prefix ? prefix + \"=\" : \"\") +\r\n                encodeURIComponent(obj));\r\n        }\r\n        return str.filter(function (s) { return s; }).join(\"&\");\r\n    };\r\n    return FormPayloadSerializer;\r\n}());\r\nexports.PayloadSerializer = new FormPayloadSerializer();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1BheWxvYWRTZXJpYWxpemVyL0Zvcm1QYXlsb2FkU2VyaWFsaXplci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvUGF5bG9hZFNlcmlhbGl6ZXIvRm9ybVBheWxvYWRTZXJpYWxpemVyLnRzP2JlZTkiXSwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6c3RyaWN0LWJvb2xlYW4tZXhwcmVzc2lvbnMgKi9cclxuaW1wb3J0IHsgSVBheWxvYWRTZXJpYWxpemVyIH0gZnJvbSBcIi4vSVBheWxvYWRTZXJpYWxpemVyXCI7XHJcblxyXG5jbGFzcyBGb3JtUGF5bG9hZFNlcmlhbGl6ZXIgaW1wbGVtZW50cyBJUGF5bG9hZFNlcmlhbGl6ZXIge1xyXG4gICAgcHVibGljIHNlcmlhbGl6ZShvYmosIHByZWZpeD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHN0ciA9IFtdO1xyXG4gICAgICAgIGxldCBoYXNQcm9wZXJ0aWVzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wZXJ0eSBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzUHJvcGVydGllcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleSA9IHByZWZpeCA/IHByZWZpeCArIFwiLlwiICsgcHJvcGVydHkgOiBwcm9wZXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBvYmpbcHJvcGVydHldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxpemUodmFsdWVbaV0sIGtleSArIFwiW1wiICsgaSArIFwiXVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ci5wdXNoKHRoaXMuc2VyaWFsaXplKHZhbHVlLCBrZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWhhc1Byb3BlcnRpZXMgJiYgdHlwZW9mIG9iaiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvYmogIT09IG51bGwpIHtcclxuICAgICAgICAgICAgc3RyLnB1c2goXHJcbiAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQocHJlZml4ID8gcHJlZml4ICsgXCI9XCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG9iailcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0ci5maWx0ZXIocyA9PiBzKS5qb2luKFwiJlwiKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFBheWxvYWRTZXJpYWxpemVyOiBJUGF5bG9hZFNlcmlhbGl6ZXIgPSBuZXcgRm9ybVBheWxvYWRTZXJpYWxpemVyKCk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFHQTtBQUFBO0FBcUNBO0FBcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/PayloadSerializer/FormPayloadSerializer.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/RequestSender.ts":
/*!****************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/RequestSender.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CrossDomainRequest_1 = __webpack_require__(/*! ./CrossDomainRequest/CrossDomainRequest */ \"./Javascript.SDK/Tracker/v1/CrossDomainRequest/CrossDomainRequest.ts\");\r\nvar Deployment_1 = __webpack_require__(/*! ./Deployment */ \"./Javascript.SDK/Tracker/v1/Deployment.ts\");\r\nvar HttpMethods_1 = __webpack_require__(/*! ./CrossDomainRequest/HttpMethods */ \"./Javascript.SDK/Tracker/v1/CrossDomainRequest/HttpMethods.ts\");\r\nvar RequestSender = /** @class */ (function () {\r\n    function RequestSender(sessionStorage, serviceDomain, projectDomain, useHttp, crossDomainRequestFactory) {\r\n        this._sessionStorage = sessionStorage;\r\n        this._serviceDomain = serviceDomain;\r\n        this._projectDomain = projectDomain;\r\n        this._useHttp = useHttp ? useHttp : false;\r\n        this._crossDomainRequestFactory =\r\n            crossDomainRequestFactory || CrossDomainRequest_1.CrossDomainRequestFactory;\r\n    }\r\n    RequestSender.prototype.getProtocol = function () {\r\n        return this._useHttp ? \"http://\" : \"https://\";\r\n    };\r\n    RequestSender.prototype.sendToTrackerAndForget = function (url, request, additionalParameters) {\r\n        var _this = this;\r\n        var crossDomainRequest = this.createCrossDomainRequest(HttpMethods_1.HttpMethods.POST, this._serviceDomain + url, request, additionalParameters);\r\n        if (this._sessionStorage.deviceUUIDIsSet() &&\r\n            this._sessionStorage.isUsingDeviceUUIDInLocalStorage()) {\r\n            return crossDomainRequest.sendAndForget();\r\n        }\r\n        else {\r\n            return crossDomainRequest\r\n                .sendAndGetResult()\r\n                .then(function (response) { return _this.processResponse(response); });\r\n        }\r\n    };\r\n    RequestSender.prototype.sendToTrackerAndGetResult = function (url, request, additionalParameters) {\r\n        var _this = this;\r\n        var crossDomainRequest = this.createCrossDomainRequest(HttpMethods_1.HttpMethods.POST, this._serviceDomain + url, request, additionalParameters);\r\n        return crossDomainRequest.sendAndGetResult().then(function (response) {\r\n            _this.processResponse(response);\r\n            return response;\r\n        });\r\n    };\r\n    RequestSender.prototype.sendToTrackerWithoutSessionAndGetResult = function (url, request) {\r\n        var crossDomainRequest = this.createCrossDomainRequest(HttpMethods_1.HttpMethods.POST, this._serviceDomain + url, request);\r\n        return crossDomainRequest.sendAndGetResult();\r\n    };\r\n    RequestSender.prototype.createCrossDomainRequest = function (httpMethod, url, payload, additionalParameters) {\r\n        url =\r\n            this.getProtocol() +\r\n                url +\r\n                (url.match(/\\?/) ? \"&\" : \"?\") +\r\n                \"version=\" +\r\n                Deployment_1.version;\r\n        if (additionalParameters && additionalParameters.length > 0)\r\n            url +=\r\n                \"&\" +\r\n                    additionalParameters.map(function (p) { return p.name + \"=\" + p.value; }).join(\"&\");\r\n        return this._crossDomainRequestFactory(httpMethod, url, payload);\r\n    };\r\n    //#region LEGACY\r\n    RequestSender.prototype.sendToDirectCrm = function (url, request) {\r\n        if (!this._projectDomain)\r\n            throw new Error(\"You should initialize tracker with projectDomain property.\");\r\n        var session = {\r\n            deviceGuid: this._sessionStorage.tryGetDeviceUUID()\r\n        };\r\n        request.customerSession = encodeURIComponent(JSON.stringify(session));\r\n        request.deviceUUID = this._sessionStorage.tryGetDeviceUUID();\r\n        var crossDomainRequest = this.createCrossDomainRequest(HttpMethods_1.HttpMethods.GET, this._projectDomain + url, request);\r\n        return crossDomainRequest.sendAndGetResult();\r\n    };\r\n    //#endregion LEGACY\r\n    RequestSender.prototype.processResponse = function (response) {\r\n        if (response.deviceUUID) {\r\n            this._sessionStorage.setDeviceUUID(response.deviceUUID);\r\n        }\r\n        else {\r\n            throw new Error(\"Uncorrect server response: \" + JSON.stringify(response));\r\n        }\r\n    };\r\n    return RequestSender;\r\n}());\r\nexports.RequestSender = RequestSender;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1JlcXVlc3RTZW5kZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1JlcXVlc3RTZW5kZXIudHM/ZTBiMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpzdHJpY3QtYm9vbGVhbi1leHByZXNzaW9ucyAqL1xyXG5pbXBvcnQgeyBQcm9taXNlIH0gZnJvbSBcIi4uL2xpYnMvZXM2LXByb21pc2VcIjtcclxuaW1wb3J0ICogYXMgVjFNZXNzYWdlcyBmcm9tIFwiLi9NZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBDdXN0b21lclNlc3Npb25TdG9yYWdlIH0gZnJvbSBcIi4vQ3VzdG9tZXJTZXNzaW9uU3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBDcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5IH0gZnJvbSBcIi4vQ3Jvc3NEb21haW5SZXF1ZXN0L0Nyb3NzRG9tYWluUmVxdWVzdFwiO1xyXG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4vRGVwbG95bWVudFwiO1xyXG5pbXBvcnQgeyBRdWVyeVN0cmluZ1BhcmFtZXRlciB9IGZyb20gXCIuLi92My9RdWVyeVN0cmluZ1BhcmFtZXRlclwiO1xyXG5pbXBvcnQgeyBIdHRwTWV0aG9kcyB9IGZyb20gXCIuL0Nyb3NzRG9tYWluUmVxdWVzdC9IdHRwTWV0aG9kc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgSUNyb3NzRG9tYWluUmVxdWVzdCxcclxuICAgIElDcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5XHJcbn0gZnJvbSBcIi4vQ3Jvc3NEb21haW5SZXF1ZXN0L0lDcm9zc0RvbWFpblJlcXVlc3RcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXF1ZXN0U2VuZGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Nlc3Npb25TdG9yYWdlOiBDdXN0b21lclNlc3Npb25TdG9yYWdlO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2VydmljZURvbWFpbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcHJvamVjdERvbWFpbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdXNlSHR0cDogYm9vbGVhbjtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5OiBJQ3Jvc3NEb21haW5SZXF1ZXN0RmFjdG9yeTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZTogQ3VzdG9tZXJTZXNzaW9uU3RvcmFnZSxcclxuICAgICAgICBzZXJ2aWNlRG9tYWluOiBzdHJpbmcsXHJcbiAgICAgICAgcHJvamVjdERvbWFpbjogc3RyaW5nLFxyXG4gICAgICAgIHVzZUh0dHA/OiBib29sZWFuLFxyXG4gICAgICAgIGNyb3NzRG9tYWluUmVxdWVzdEZhY3Rvcnk/OiBJQ3Jvc3NEb21haW5SZXF1ZXN0RmFjdG9yeVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5fc2Vzc2lvblN0b3JhZ2UgPSBzZXNzaW9uU3RvcmFnZTtcclxuICAgICAgICB0aGlzLl9zZXJ2aWNlRG9tYWluID0gc2VydmljZURvbWFpbjtcclxuICAgICAgICB0aGlzLl9wcm9qZWN0RG9tYWluID0gcHJvamVjdERvbWFpbjtcclxuICAgICAgICB0aGlzLl91c2VIdHRwID0gdXNlSHR0cCA/IHVzZUh0dHAgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLl9jcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5ID1cclxuICAgICAgICAgICAgY3Jvc3NEb21haW5SZXF1ZXN0RmFjdG9yeSB8fCBDcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UHJvdG9jb2woKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlSHR0cCA/IFwiaHR0cDovL1wiIDogXCJodHRwczovL1wiO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZW5kVG9UcmFja2VyQW5kRm9yZ2V0KFxyXG4gICAgICAgIHVybDogc3RyaW5nLFxyXG4gICAgICAgIHJlcXVlc3Q6IGFueSxcclxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVycz86IFF1ZXJ5U3RyaW5nUGFyYW1ldGVyW11cclxuICAgICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGNyb3NzRG9tYWluUmVxdWVzdCA9IHRoaXMuY3JlYXRlQ3Jvc3NEb21haW5SZXF1ZXN0KFxyXG4gICAgICAgICAgICBIdHRwTWV0aG9kcy5QT1NULFxyXG4gICAgICAgICAgICB0aGlzLl9zZXJ2aWNlRG9tYWluICsgdXJsLFxyXG4gICAgICAgICAgICByZXF1ZXN0LFxyXG4gICAgICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvblN0b3JhZ2UuZGV2aWNlVVVJRElzU2V0KCkgJiZcclxuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvblN0b3JhZ2UuaXNVc2luZ0RldmljZVVVSURJbkxvY2FsU3RvcmFnZSgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcm9zc0RvbWFpblJlcXVlc3Quc2VuZEFuZEZvcmdldCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcm9zc0RvbWFpblJlcXVlc3RcclxuICAgICAgICAgICAgICAgIC5zZW5kQW5kR2V0UmVzdWx0PFYxTWVzc2FnZXMuVHJhY2tlclJlc3BvbnNlPigpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB0aGlzLnByb2Nlc3NSZXNwb25zZShyZXNwb25zZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VuZFRvVHJhY2tlckFuZEdldFJlc3VsdDxcclxuICAgICAgICBUUmVzdWx0IGV4dGVuZHMgVjFNZXNzYWdlcy5UcmFja2VyUmVzcG9uc2VcclxuICAgID4oXHJcbiAgICAgICAgdXJsOiBzdHJpbmcsXHJcbiAgICAgICAgcmVxdWVzdDogYW55LFxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzPzogUXVlcnlTdHJpbmdQYXJhbWV0ZXJbXVxyXG4gICAgKTogUHJvbWlzZTxUUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3QgY3Jvc3NEb21haW5SZXF1ZXN0ID0gdGhpcy5jcmVhdGVDcm9zc0RvbWFpblJlcXVlc3QoXHJcbiAgICAgICAgICAgIEh0dHBNZXRob2RzLlBPU1QsXHJcbiAgICAgICAgICAgIHRoaXMuX3NlcnZpY2VEb21haW4gKyB1cmwsXHJcbiAgICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNyb3NzRG9tYWluUmVxdWVzdC5zZW5kQW5kR2V0UmVzdWx0PFRSZXN1bHQ+KCkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZW5kVG9UcmFja2VyV2l0aG91dFNlc3Npb25BbmRHZXRSZXN1bHQ8VFJlc3VsdD4oXHJcbiAgICAgICAgdXJsOiBzdHJpbmcsXHJcbiAgICAgICAgcmVxdWVzdDogVjFNZXNzYWdlcy5SZWRpcmVjdFJlcXVlc3RcclxuICAgICk6IFByb21pc2U8VFJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IGNyb3NzRG9tYWluUmVxdWVzdCA9IHRoaXMuY3JlYXRlQ3Jvc3NEb21haW5SZXF1ZXN0KFxyXG4gICAgICAgICAgICBIdHRwTWV0aG9kcy5QT1NULFxyXG4gICAgICAgICAgICB0aGlzLl9zZXJ2aWNlRG9tYWluICsgdXJsLFxyXG4gICAgICAgICAgICByZXF1ZXN0XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gY3Jvc3NEb21haW5SZXF1ZXN0LnNlbmRBbmRHZXRSZXN1bHQ8VFJlc3VsdD4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUNyb3NzRG9tYWluUmVxdWVzdChcclxuICAgICAgICBodHRwTWV0aG9kOiBzdHJpbmcsXHJcbiAgICAgICAgdXJsOiBzdHJpbmcsXHJcbiAgICAgICAgcGF5bG9hZDogYW55LFxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzPzogUXVlcnlTdHJpbmdQYXJhbWV0ZXJbXVxyXG4gICAgKTogSUNyb3NzRG9tYWluUmVxdWVzdCB7XHJcbiAgICAgICAgdXJsID1cclxuICAgICAgICAgICAgdGhpcy5nZXRQcm90b2NvbCgpICtcclxuICAgICAgICAgICAgdXJsICtcclxuICAgICAgICAgICAgKHVybC5tYXRjaCgvXFw/LykgPyBcIiZcIiA6IFwiP1wiKSArXHJcbiAgICAgICAgICAgIFwidmVyc2lvbj1cIiArXHJcbiAgICAgICAgICAgIHZlcnNpb247XHJcblxyXG4gICAgICAgIGlmIChhZGRpdGlvbmFsUGFyYW1ldGVycyAmJiBhZGRpdGlvbmFsUGFyYW1ldGVycy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB1cmwgKz1cclxuICAgICAgICAgICAgICAgIFwiJlwiICtcclxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzLm1hcChwID0+IHAubmFtZSArIFwiPVwiICsgcC52YWx1ZSkuam9pbihcIiZcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5KGh0dHBNZXRob2QsIHVybCwgcGF5bG9hZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIExFR0FDWVxyXG4gICAgcHVibGljIHNlbmRUb0RpcmVjdENybShcclxuICAgICAgICB1cmw6IHN0cmluZyxcclxuICAgICAgICByZXF1ZXN0OiBWMU1lc3NhZ2VzLlBlcmZvcm1PcGVyYXRpb25SZXF1ZXN0XHJcbiAgICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5fcHJvamVjdERvbWFpbilcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgXCJZb3Ugc2hvdWxkIGluaXRpYWxpemUgdHJhY2tlciB3aXRoIHByb2plY3REb21haW4gcHJvcGVydHkuXCJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbjogVjFNZXNzYWdlcy5TZXNzaW9uQ29va2llID0ge1xyXG4gICAgICAgICAgICBkZXZpY2VHdWlkOiB0aGlzLl9zZXNzaW9uU3RvcmFnZS50cnlHZXREZXZpY2VVVUlEKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcXVlc3QuY3VzdG9tZXJTZXNzaW9uID0gZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNlc3Npb24pKTtcclxuICAgICAgICByZXF1ZXN0LmRldmljZVVVSUQgPSB0aGlzLl9zZXNzaW9uU3RvcmFnZS50cnlHZXREZXZpY2VVVUlEKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNyb3NzRG9tYWluUmVxdWVzdCA9IHRoaXMuY3JlYXRlQ3Jvc3NEb21haW5SZXF1ZXN0KFxyXG4gICAgICAgICAgICBIdHRwTWV0aG9kcy5HRVQsXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2plY3REb21haW4gKyB1cmwsXHJcbiAgICAgICAgICAgIHJlcXVlc3RcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBjcm9zc0RvbWFpblJlcXVlc3Quc2VuZEFuZEdldFJlc3VsdDxhbnk+KCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb24gTEVHQUNZXHJcblxyXG4gICAgcHJpdmF0ZSBwcm9jZXNzUmVzcG9uc2UocmVzcG9uc2U6IFYxTWVzc2FnZXMuVHJhY2tlclJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRldmljZVVVSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvblN0b3JhZ2Uuc2V0RGV2aWNlVVVJRChyZXNwb25zZS5kZXZpY2VVVUlEKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgVW5jb3JyZWN0IHNlcnZlciByZXNwb25zZTogJHtKU09OLnN0cmluZ2lmeShyZXNwb25zZSl9YFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7O0FBSUE7QUFDQTtBQUVBO0FBTUE7QUFRQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUtBO0FBT0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBT0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUtBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUExSUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/RequestSender.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/TimeZoneProvider/TimeZoneProvider.ts":
/*!************************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/TimeZoneProvider/TimeZoneProvider.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar IanaTimeZoneProvider = /** @class */ (function () {\r\n    function IanaTimeZoneProvider() {\r\n    }\r\n    IanaTimeZoneProvider.prototype.tryGetTimeZone = function () {\r\n        try {\r\n            return Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n    };\r\n    return IanaTimeZoneProvider;\r\n}());\r\nexports.IanaTimeZoneProvider = IanaTimeZoneProvider;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1RpbWVab25lUHJvdmlkZXIvVGltZVpvbmVQcm92aWRlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvVGltZVpvbmVQcm92aWRlci9UaW1lWm9uZVByb3ZpZGVyLnRzPzBhOGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVRpbWVab25lUHJvdmlkZXIgfSBmcm9tIFwiLi9JVGltZVpvbmVQcm92aWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIElhbmFUaW1lWm9uZVByb3ZpZGVyIGltcGxlbWVudHMgSVRpbWVab25lUHJvdmlkZXIge1xyXG4gICAgcHVibGljIHRyeUdldFRpbWVab25lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBQUE7QUFRQTtBQVBBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBUkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/TimeZoneProvider/TimeZoneProvider.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/TrackerLogger/TrackerLogger.ts":
/*!******************************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/TrackerLogger/TrackerLogger.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Errors = __webpack_require__(/*! ../Errors */ \"./Javascript.SDK/Tracker/v1/Errors/index.ts\");\r\nvar applicationinsights_js_1 = __webpack_require__(/*! @mindbox/applicationinsights-js */ \"./node_modules/@mindbox/applicationinsights-js/dist/index.js\");\r\nvar AppInsightsConfig_1 = __webpack_require__(/*! ../AppInsightsConfig */ \"./Javascript.SDK/Tracker/v1/AppInsightsConfig.ts\");\r\nvar TrackerLogger = /** @class */ (function () {\r\n    function TrackerLogger() {\r\n        this.appInsights = applicationinsights_js_1.getAppInsights(AppInsightsConfig_1.appInsightsConfig);\r\n    }\r\n    TrackerLogger.prototype.logError = function (error, additionalData) {\r\n        console.error(error);\r\n        if (error instanceof Errors.Timeout) {\r\n            this.appInsights.trackEvent(\"Timeout\", additionalData);\r\n        }\r\n        else if (error instanceof Errors.HttpError) {\r\n            var isBlockedOrInvalidRequestStatus = error.statusCode !== 400 &&\r\n                error.statusCode !== 401 &&\r\n                error.statusCode !== 403;\r\n            // Не трекаем ошибки о том, что клиент заблокирован или неправильно нас дергает\r\n            if (isBlockedOrInvalidRequestStatus)\r\n                this.appInsights.trackException(error, null, additionalData);\r\n        }\r\n        else if (error instanceof Errors.MultipleCallsToCreateError) {\r\n            // Disabling tracking for multiple attepmts to 'create' tracker\r\n            return;\r\n        }\r\n        else {\r\n            this.appInsights.trackException(error, null, additionalData);\r\n        }\r\n    };\r\n    TrackerLogger.prototype.trackEvent = function (name, additionalData) {\r\n        this.appInsights.trackEvent(name, additionalData);\r\n    };\r\n    return TrackerLogger;\r\n}());\r\nexports.TrackerLogger = TrackerLogger;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1RyYWNrZXJMb2dnZXIvVHJhY2tlckxvZ2dlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvVHJhY2tlckxvZ2dlci9UcmFja2VyTG9nZ2VyLnRzPzdmMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gXCIuLi9FcnJvcnNcIjtcclxuXHJcbmltcG9ydCB7IElBcHBJbnNpZ2h0cywgZ2V0QXBwSW5zaWdodHMgfSBmcm9tIFwiQG1pbmRib3gvYXBwbGljYXRpb25pbnNpZ2h0cy1qc1wiO1xyXG5pbXBvcnQgeyBhcHBJbnNpZ2h0c0NvbmZpZyB9IGZyb20gXCIuLi9BcHBJbnNpZ2h0c0NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBJVHJhY2tlckxvZ2dlciB9IGZyb20gXCIuL0lUcmFja2VyTG9nZ2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJhY2tlckxvZ2dlciBpbXBsZW1lbnRzIElUcmFja2VyTG9nZ2VyIHtcclxuICAgIHByaXZhdGUgYXBwSW5zaWdodHM6IElBcHBJbnNpZ2h0cztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5hcHBJbnNpZ2h0cyA9IGdldEFwcEluc2lnaHRzKGFwcEluc2lnaHRzQ29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9nRXJyb3IoZXJyb3I6IEVycm9yLCBhZGRpdGlvbmFsRGF0YT86IE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcnMuVGltZW91dCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcEluc2lnaHRzLnRyYWNrRXZlbnQoXCJUaW1lb3V0XCIsIGFkZGl0aW9uYWxEYXRhKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3JzLkh0dHBFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zdCBpc0Jsb2NrZWRPckludmFsaWRSZXF1ZXN0U3RhdHVzID1cclxuICAgICAgICAgICAgICAgIGVycm9yLnN0YXR1c0NvZGUgIT09IDQwMCAmJlxyXG4gICAgICAgICAgICAgICAgZXJyb3Iuc3RhdHVzQ29kZSAhPT0gNDAxICYmXHJcbiAgICAgICAgICAgICAgICBlcnJvci5zdGF0dXNDb2RlICE9PSA0MDM7XHJcbiAgICAgICAgICAgIC8vINCd0LUg0YLRgNC10LrQsNC10Lwg0L7RiNC40LHQutC4INC+INGC0L7QvCwg0YfRgtC+INC60LvQuNC10L3RgiDQt9Cw0LHQu9C+0LrQuNGA0L7QstCw0L0g0LjQu9C4INC90LXQv9GA0LDQstC40LvRjNC90L4g0L3QsNGBINC00LXRgNCz0LDQtdGCXHJcbiAgICAgICAgICAgIGlmIChpc0Jsb2NrZWRPckludmFsaWRSZXF1ZXN0U3RhdHVzKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBJbnNpZ2h0cy50cmFja0V4Y2VwdGlvbihlcnJvciwgbnVsbCwgYWRkaXRpb25hbERhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcnMuTXVsdGlwbGVDYWxsc1RvQ3JlYXRlRXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gRGlzYWJsaW5nIHRyYWNraW5nIGZvciBtdWx0aXBsZSBhdHRlcG10cyB0byAnY3JlYXRlJyB0cmFja2VyXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFwcEluc2lnaHRzLnRyYWNrRXhjZXB0aW9uKGVycm9yLCBudWxsLCBhZGRpdGlvbmFsRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0cmFja0V2ZW50KG5hbWU6IHN0cmluZywgYWRkaXRpb25hbERhdGE/OiBPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFwcEluc2lnaHRzLnRyYWNrRXZlbnQobmFtZSwgYWRkaXRpb25hbERhdGEpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUEvQkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/TrackerLogger/TrackerLogger.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/TrackerSettings.ts":
/*!******************************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/TrackerSettings.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar compareSettings = function (ownSettings, newSettings) {\r\n    var result = new Array();\r\n    for (var _i = 0, _a = Object.keys(ownSettings); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        var comparisonResult = compareSettingsField(key, ownSettings, newSettings);\r\n        if (comparisonResult != null)\r\n            result.push(comparisonResult);\r\n    }\r\n    return result.length === 0 ? null : result;\r\n};\r\nexports.compareSettings = compareSettings;\r\nvar compareSettingsField = function (key, ownSettings, newSettings) {\r\n    var message;\r\n    switch (key) {\r\n        case \"serviceDomain\":\r\n            message = null;\r\n            break;\r\n        case \"customer\":\r\n            message = compareCustomerCookie(ownSettings[key], newSettings[key])\r\n                ? null\r\n                : \"customer cookies are different\";\r\n            break;\r\n        case \"redirectedFrom\":\r\n            message = compareRedirectedFrom(ownSettings[key], newSettings[key])\r\n                ? null\r\n                : \"redirectedFrom objects are different\";\r\n            break;\r\n        default:\r\n            message =\r\n                ownSettings[key] === newSettings[key]\r\n                    ? null\r\n                    : ownSettings[key] + \" !== \" + newSettings[key];\r\n    }\r\n    return message == null ? null : { key: key, message: message };\r\n};\r\nvar compareCustomerCookie = function (ownCookie, newCookie) {\r\n    return (ownCookie.id === newCookie.id &&\r\n        ownCookie.sessionKey === newCookie.sessionKey);\r\n};\r\nvar compareRedirectedFrom = function (ownObject, newObject) {\r\n    return (ownObject.requestUrl === newObject.requestUrl &&\r\n        ownObject.referrerUrl === newObject.referrerUrl);\r\n};\r\nvar defaultApiDomain = \"api.mindbox.ru\";\r\nvar getEffectiveApiUri = function (settings) {\r\n    if (settings == null)\r\n        throw new Error(\"'settings' cannot be null\");\r\n    var protocol = settings.useHttp ? \"http\" : \"https\";\r\n    var domain = settings.serviceDomain != null\r\n        ? settings.serviceDomain\r\n        : defaultApiDomain;\r\n    return protocol + \"://\" + domain;\r\n};\r\nexports.getEffectiveApiUri = getEffectiveApiUri;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1RyYWNrZXJTZXR0aW5ncy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0phdmFzY3JpcHQuU0RLL1RyYWNrZXIvdjEvVHJhY2tlclNldHRpbmdzLnRzP2MxNTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ3VzdG9tZXJDb29raWUgfSBmcm9tIFwiLi9NZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBJVHJhY2tlckxvZ2dlciB9IGZyb20gXCIuL1RyYWNrZXJMb2dnZXIvSVRyYWNrZXJMb2dnZXJcIjtcclxuaW1wb3J0IHsgSUNyb3NzRG9tYWluUmVxdWVzdEZhY3RvcnkgfSBmcm9tIFwiLi9Dcm9zc0RvbWFpblJlcXVlc3QvSUNyb3NzRG9tYWluUmVxdWVzdFwiO1xyXG5pbXBvcnQgeyBJVGltZVpvbmVQcm92aWRlciB9IGZyb20gXCIuL1RpbWVab25lUHJvdmlkZXIvSVRpbWVab25lUHJvdmlkZXJcIjtcclxuXHJcbmludGVyZmFjZSBUcmFja2VyU2V0dGluZ3Mge1xyXG4gICAgZW5kcG9pbnRJZD86IHN0cmluZztcclxuICAgIGJyYW5kU3lzdGVtTmFtZT86IHN0cmluZztcclxuICAgIHBvaW50T2ZDb250YWN0U3lzdGVtTmFtZT86IHN0cmluZztcclxuICAgIHNlcnZpY2VEb21haW4/OiBzdHJpbmc7XHJcbiAgICBwcm9qZWN0RG9tYWluPzogc3RyaW5nO1xyXG4gICAgY3VzdG9tZXI/OiBDdXN0b21lckNvb2tpZTtcclxuICAgIGtlZXBBbGl2ZT86IGJvb2xlYW47XHJcbiAgICByZWRpcmVjdGVkRnJvbT86IFJlZGlyZWN0ZWRGcm9tO1xyXG5cclxuICAgIHVzZUh0dHA/OiBib29sZWFuO1xyXG5cclxuICAgIGNyb3NzRG9tYWluUmVxdWVzdEZhY3RvcnlPdmVycmlkZT86IElDcm9zc0RvbWFpblJlcXVlc3RGYWN0b3J5O1xyXG4gICAgd2luZG93T3ZlcnJpZGU/OiBQYXJ0aWFsPFdpbmRvdz47XHJcbiAgICBsb2dnZXJPdmVycmlkZT86IElUcmFja2VyTG9nZ2VyO1xyXG4gICAgdGltZVpvbmVQcm92aWRlck92ZXJyaWRlPzogSVRpbWVab25lUHJvdmlkZXI7XHJcblxyXG4gICAgZmlyZWJhc2VNZXNzYWdpbmdTZW5kZXJJZD86IHN0cmluZztcclxuICAgIHNlcnZpY2VXb3JrZXJQYXRoPzogc3RyaW5nO1xyXG4gICAgc2VydmljZVdvcmtlclNjb3BlPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmVkaXJlY3RlZEZyb20ge1xyXG4gICAgcmVxdWVzdFVybD86IHN0cmluZztcclxuICAgIHJlZmVycmVyVXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU2V0dGluZ3NDb21wYXJpc29uUmVzdWx0IHtcclxuICAgIGtleTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVHJhY2tlckRpYWdub3N0aWNzSW5mbyB7XHJcbiAgICBlbmRwb2ludElkPzogc3RyaW5nO1xyXG4gICAgY3JlYXRlUmVxdWVzdHNDb3VudDogbnVtYmVyO1xyXG59XHJcblxyXG5jb25zdCBjb21wYXJlU2V0dGluZ3MgPSAoXHJcbiAgICBvd25TZXR0aW5nczogVHJhY2tlclNldHRpbmdzLFxyXG4gICAgbmV3U2V0dGluZ3M6IFRyYWNrZXJTZXR0aW5nc1xyXG4pOiBTZXR0aW5nc0NvbXBhcmlzb25SZXN1bHRbXSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXk8U2V0dGluZ3NDb21wYXJpc29uUmVzdWx0PigpO1xyXG5cclxuICAgIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyhvd25TZXR0aW5ncykgYXMgKGtleW9mIFRyYWNrZXJTZXR0aW5ncylbXSkge1xyXG4gICAgICAgIGNvbnN0IGNvbXBhcmlzb25SZXN1bHQgPSBjb21wYXJlU2V0dGluZ3NGaWVsZChcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICBvd25TZXR0aW5ncyxcclxuICAgICAgICAgICAgbmV3U2V0dGluZ3NcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChjb21wYXJpc29uUmVzdWx0ICE9IG51bGwpIHJlc3VsdC5wdXNoKGNvbXBhcmlzb25SZXN1bHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQubGVuZ3RoID09PSAwID8gbnVsbCA6IHJlc3VsdDtcclxufTtcclxuXHJcbmNvbnN0IGNvbXBhcmVTZXR0aW5nc0ZpZWxkID0gKFxyXG4gICAga2V5OiBrZXlvZiBUcmFja2VyU2V0dGluZ3MsXHJcbiAgICBvd25TZXR0aW5nczogVHJhY2tlclNldHRpbmdzLFxyXG4gICAgbmV3U2V0dGluZ3M6IFRyYWNrZXJTZXR0aW5nc1xyXG4pOiBTZXR0aW5nc0NvbXBhcmlzb25SZXN1bHQgPT4ge1xyXG4gICAgbGV0IG1lc3NhZ2U6IHN0cmluZztcclxuICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgY2FzZSBcInNlcnZpY2VEb21haW5cIjpcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJjdXN0b21lclwiOlxyXG4gICAgICAgICAgICBtZXNzYWdlID0gY29tcGFyZUN1c3RvbWVyQ29va2llKG93blNldHRpbmdzW2tleV0sIG5ld1NldHRpbmdzW2tleV0pXHJcbiAgICAgICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgICAgIDogXCJjdXN0b21lciBjb29raWVzIGFyZSBkaWZmZXJlbnRcIjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInJlZGlyZWN0ZWRGcm9tXCI6XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBjb21wYXJlUmVkaXJlY3RlZEZyb20ob3duU2V0dGluZ3Nba2V5XSwgbmV3U2V0dGluZ3Nba2V5XSlcclxuICAgICAgICAgICAgICAgID8gbnVsbFxyXG4gICAgICAgICAgICAgICAgOiBcInJlZGlyZWN0ZWRGcm9tIG9iamVjdHMgYXJlIGRpZmZlcmVudFwiO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBtZXNzYWdlID1cclxuICAgICAgICAgICAgICAgIG93blNldHRpbmdzW2tleV0gPT09IG5ld1NldHRpbmdzW2tleV1cclxuICAgICAgICAgICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICA6IGAke293blNldHRpbmdzW2tleV19ICE9PSAke25ld1NldHRpbmdzW2tleV19YDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbWVzc2FnZSA9PSBudWxsID8gbnVsbCA6IHsga2V5LCBtZXNzYWdlIH07XHJcbn07XHJcblxyXG5jb25zdCBjb21wYXJlQ3VzdG9tZXJDb29raWUgPSAoXHJcbiAgICBvd25Db29raWU6IEN1c3RvbWVyQ29va2llLFxyXG4gICAgbmV3Q29va2llOiBDdXN0b21lckNvb2tpZVxyXG4pOiBib29sZWFuID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgb3duQ29va2llLmlkID09PSBuZXdDb29raWUuaWQgJiZcclxuICAgICAgICBvd25Db29raWUuc2Vzc2lvbktleSA9PT0gbmV3Q29va2llLnNlc3Npb25LZXlcclxuICAgICk7XHJcbn07XHJcblxyXG5jb25zdCBjb21wYXJlUmVkaXJlY3RlZEZyb20gPSAoXHJcbiAgICBvd25PYmplY3Q6IFJlZGlyZWN0ZWRGcm9tLFxyXG4gICAgbmV3T2JqZWN0OiBSZWRpcmVjdGVkRnJvbVxyXG4pOiBib29sZWFuID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgb3duT2JqZWN0LnJlcXVlc3RVcmwgPT09IG5ld09iamVjdC5yZXF1ZXN0VXJsICYmXHJcbiAgICAgICAgb3duT2JqZWN0LnJlZmVycmVyVXJsID09PSBuZXdPYmplY3QucmVmZXJyZXJVcmxcclxuICAgICk7XHJcbn07XHJcblxyXG5jb25zdCBkZWZhdWx0QXBpRG9tYWluID0gXCJhcGkubWluZGJveC5ydVwiO1xyXG5cclxuY29uc3QgZ2V0RWZmZWN0aXZlQXBpVXJpID0gKHNldHRpbmdzOiBUcmFja2VyU2V0dGluZ3MpID0+IHtcclxuICAgIGlmIChzZXR0aW5ncyA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCInc2V0dGluZ3MnIGNhbm5vdCBiZSBudWxsXCIpO1xyXG5cclxuICAgIGNvbnN0IHByb3RvY29sID0gc2V0dGluZ3MudXNlSHR0cCA/IFwiaHR0cFwiIDogXCJodHRwc1wiO1xyXG5cclxuICAgIGNvbnN0IGRvbWFpbiA9XHJcbiAgICAgICAgc2V0dGluZ3Muc2VydmljZURvbWFpbiAhPSBudWxsXHJcbiAgICAgICAgICAgID8gc2V0dGluZ3Muc2VydmljZURvbWFpblxyXG4gICAgICAgICAgICA6IGRlZmF1bHRBcGlEb21haW47XHJcblxyXG4gICAgcmV0dXJuIGAke3Byb3RvY29sfTovLyR7ZG9tYWlufWA7XHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gICAgVHJhY2tlclNldHRpbmdzLFxyXG4gICAgUmVkaXJlY3RlZEZyb20sXHJcbiAgICBnZXRFZmZlY3RpdmVBcGlVcmksXHJcbiAgICBTZXR0aW5nc0NvbXBhcmlzb25SZXN1bHQsXHJcbiAgICBjb21wYXJlU2V0dGluZ3MsXHJcbiAgICBUcmFja2VyRGlhZ25vc3RpY3NJbmZvXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUEwQ0E7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUtBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUF3RUE7QUF0RUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBRUE7QUFFQTtBQUlBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/TrackerSettings.ts\n");

/***/ }),

/***/ "./Javascript.SDK/Tracker/v1/Tracking.ts":
/*!***********************************************!*\
  !*** ./Javascript.SDK/Tracker/v1/Tracking.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/* tslint:disable:strict-boolean-expressions */\r\n__webpack_require__(/*! ../libs/console-polyfill */ \"./Javascript.SDK/Tracker/libs/console-polyfill.js\");\r\nvar Deployment_1 = __webpack_require__(/*! ./Deployment */ \"./Javascript.SDK/Tracker/v1/Deployment.ts\");\r\nvar Deployment_2 = __webpack_require__(/*! ./Deployment */ \"./Javascript.SDK/Tracker/v1/Deployment.ts\");\r\nvar RequestSender_1 = __webpack_require__(/*! ./RequestSender */ \"./Javascript.SDK/Tracker/v1/RequestSender.ts\");\r\nvar Errors_1 = __webpack_require__(/*! ./Errors */ \"./Javascript.SDK/Tracker/v1/Errors/index.ts\");\r\nvar CookieManager_1 = __webpack_require__(/*! ./CookieManager */ \"./Javascript.SDK/Tracker/v1/CookieManager.ts\");\r\nvar CustomerSessionStorage_1 = __webpack_require__(/*! ./CustomerSessionStorage */ \"./Javascript.SDK/Tracker/v1/CustomerSessionStorage.ts\");\r\nvar TrackerLogger_1 = __webpack_require__(/*! ./TrackerLogger/TrackerLogger */ \"./Javascript.SDK/Tracker/v1/TrackerLogger/TrackerLogger.ts\");\r\nvar TrackerSettings_1 = __webpack_require__(/*! ./TrackerSettings */ \"./Javascript.SDK/Tracker/v1/TrackerSettings.ts\");\r\nvar ModuleManager_1 = __webpack_require__(/*! tracker/v1/ModuleManager */ \"./Javascript.SDK/Tracker/v1/ModuleManager.ts\");\r\nvar services_responses_ts_1 = __webpack_require__(/*! @mindbox/services-responses-ts */ \"./node_modules/@mindbox/services-responses-ts/index.js\");\r\nvar TimeZoneProvider_1 = __webpack_require__(/*! ./TimeZoneProvider/TimeZoneProvider */ \"./Javascript.SDK/Tracker/v1/TimeZoneProvider/TimeZoneProvider.ts\");\r\n__webpack_require__(/*! ./GlobalTypes */ \"./Javascript.SDK/Tracker/v1/GlobalTypes.ts\");\r\nvar MultipleCallsToCreateError_1 = __webpack_require__(/*! tracker/v1/Errors/MultipleCallsToCreateError */ \"./Javascript.SDK/Tracker/v1/Errors/MultipleCallsToCreateError.ts\");\r\nvar Tracker = /** @class */ (function () {\r\n    function Tracker(queue) {\r\n        var _this = this;\r\n        this._previousRequestPromise = null;\r\n        this.createRequestsCounter = 0;\r\n        this.process = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            var item = Array.prototype.slice.call(args);\r\n            _this.invoke(item.shift(), item);\r\n        };\r\n        this.isPrerenderOrPreview = function () {\r\n            var visibiltyState = _this._window.document.visibilityState ||\r\n                _this._window.document[\"webkitVisibilityState\"] ||\r\n                \"visible\";\r\n            return visibiltyState == \"preview\" || visibiltyState == \"prerender\";\r\n        };\r\n        this.invoke = function (methodName, params) {\r\n            try {\r\n                if (!methodName)\r\n                    throw new Error(\"methodName required\");\r\n                if (methodName !== \"create\" && !_this._settings)\r\n                    throw new Error('You should call \"create\" first');\r\n                if (methodName !== \"create\" &&\r\n                    (!_this._cookieManager.isCookieEnabled() ||\r\n                        _this.isPrerenderOrPreview()))\r\n                    return;\r\n                if (methodName === \"create\") {\r\n                    _this.tryCreate(params[0]);\r\n                    return;\r\n                }\r\n                if (methodName === \"getDiagnosticsInfo\" &&\r\n                    params[0] instanceof Function) {\r\n                    _this.getDiagnosticsInfo(params[0]);\r\n                    return;\r\n                }\r\n                var moduleCommand = _this.moduleManager.tryGetModuleCommand(methodName);\r\n                if (moduleCommand != null) {\r\n                    _this.moduleManager.invokeModule(moduleCommand, params);\r\n                    return;\r\n                }\r\n                var ownMethodName_1 = methodName.replace(\".\", \"_\");\r\n                if (typeof _this[ownMethodName_1] === \"undefined\")\r\n                    throw new Error(\"Unknown method: \" + ownMethodName_1);\r\n                if (params instanceof Array)\r\n                    _this.then(function () { return _this[ownMethodName_1].apply(_this, params); });\r\n                else\r\n                    _this.then(function () { return _this[ownMethodName_1].call(_this, params); });\r\n            }\r\n            catch (e) {\r\n                _this.logErrorWithDataFromTracker(e);\r\n            }\r\n        };\r\n        this.then = function (callBack) {\r\n            if (_this._sessionStorage.deviceUUIDIsSet()) {\r\n                callBack().then(undefined, function (error) {\r\n                    return _this.logErrorWithDataFromTracker(error);\r\n                });\r\n            }\r\n            else {\r\n                if (_this._previousRequestPromise == null) {\r\n                    _this._previousRequestPromise = callBack().then(undefined, function (error) { return _this.logErrorWithDataFromTracker(error); });\r\n                }\r\n                else {\r\n                    _this._previousRequestPromise = _this._previousRequestPromise\r\n                        .then(function () { return callBack(); })\r\n                        .then(undefined, function (error) {\r\n                        return _this.logErrorWithDataFromTracker(error);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        this.getTrackerAdditionalData = function () {\r\n            var deviceUUID = null;\r\n            try {\r\n                deviceUUID = _this._sessionStorage.tryGetDeviceUUID();\r\n            }\r\n            catch (e) {\r\n                // Если не удалось получить deviceUUID, залогируем без него.\r\n            }\r\n            var trackerAdditionalData = {\r\n                Version: Deployment_1.version,\r\n                \"Point of contact\": _this._settings.pointOfContactSystemName,\r\n                Endpoint: _this._settings.endpointId,\r\n                Origin: location.origin,\r\n                DeviceUUID: deviceUUID\r\n            };\r\n            return trackerAdditionalData;\r\n        };\r\n        this.logErrorWithDataFromTracker = function (error, additionalData) {\r\n            var trackerAdditionalData = _this.getTrackerAdditionalData();\r\n            var requestError = error;\r\n            if (requestError.requestId)\r\n                trackerAdditionalData[\"RequestId\"] = requestError.requestId;\r\n            _this._logger.logError(error, __assign({}, trackerAdditionalData, additionalData));\r\n        };\r\n        this.trackEventWithDataFromTracker = function (name, additionalData) {\r\n            var trackerAdditionalData = _this.getTrackerAdditionalData();\r\n            _this._logger.trackEvent(name, __assign({}, trackerAdditionalData, additionalData));\r\n        };\r\n        this.getDiagnosticsInfo = function (callback) {\r\n            callback({\r\n                createRequestsCount: _this.createRequestsCounter,\r\n                endpointId: _this._settings != null ? _this._settings.endpointId : null\r\n            });\r\n        };\r\n        this.tryCreate = function (settings) {\r\n            ++_this.createRequestsCounter;\r\n            if (!_this._previousRequestPromise) {\r\n                _this.create(settings);\r\n                return;\r\n            }\r\n            var settingsDiff = TrackerSettings_1.compareSettings(_this._settings, settings);\r\n            if (settingsDiff == null)\r\n                return;\r\n            _this.logErrorWithDataFromTracker(new MultipleCallsToCreateError_1.MultipleCallsToCreateError(settingsDiff));\r\n        };\r\n        this.create = function (settings) {\r\n            _this._settings = settings || {};\r\n            if (_this._settings.serviceDomain == null ||\r\n                _this._settings.serviceDomain === \"tracker.directcrm.ru\") {\r\n                _this._settings.serviceDomain = Deployment_2.getDefaultServiceDomain();\r\n            }\r\n            else if (_this._settings.serviceDomain === \"tracker.staging.directcrm.ru\") {\r\n                _this._settings.serviceDomain = \"api.staging.directcrm.ru\";\r\n            }\r\n            _this._window = _this._settings.windowOverride\r\n                ? _this._settings.windowOverride\r\n                : window;\r\n            _this._cookieManager = new CookieManager_1.Manager(_this._window);\r\n            _this._cookieManager.setBaseDomain();\r\n            _this._sessionStorage = new CustomerSessionStorage_1.CustomerSessionStorage(_this._cookieManager, _this._window);\r\n            _this._sender = new RequestSender_1.RequestSender(_this._sessionStorage, _this._settings.serviceDomain, _this._settings.projectDomain, _this._settings.useHttp, _this._settings.crossDomainRequestFactoryOverride);\r\n            _this._logger =\r\n                _this._settings.loggerOverride == null\r\n                    ? new TrackerLogger_1.TrackerLogger()\r\n                    : _this._settings.loggerOverride;\r\n            _this.timeZoneProvider =\r\n                _this._settings.timeZoneProviderOverride == null\r\n                    ? new TimeZoneProvider_1.IanaTimeZoneProvider()\r\n                    : _this._settings.timeZoneProviderOverride;\r\n            var loggerWithAdditionalDataFromTracker = {\r\n                logError: _this.logErrorWithDataFromTracker,\r\n                trackEvent: _this.trackEventWithDataFromTracker\r\n            };\r\n            _this.moduleManager = new ModuleManager_1.ModuleManager(_this._settings, _this._sessionStorage, function () { return _this._previousRequestPromise; }, loggerWithAdditionalDataFromTracker);\r\n            if (!_this._cookieManager.isCookieEnabled() ||\r\n                _this.isPrerenderOrPreview()) {\r\n                return;\r\n            }\r\n            var shouldRedirect = _this._window.location.search != null &&\r\n                _this._window.location.search.indexOf(\"s=\") !== -1;\r\n            _this._previousRequestPromise = (shouldRedirect\r\n                ? _this.attemptRedirect()\r\n                : _this.trackVisit()).then(undefined, function (error) { return _this.logErrorWithDataFromTracker(error); });\r\n            if (_this._settings.keepAlive) {\r\n                var timer_1 = setInterval(function () {\r\n                    _this._previousRequestPromise = _this._previousRequestPromise\r\n                        .then(function () { return _this.keepAlive(); })\r\n                        .then(undefined, function (error) {\r\n                        if (!(error && error instanceof Errors_1.Timeout)) {\r\n                            clearInterval(timer_1);\r\n                        }\r\n                        _this.logErrorWithDataFromTracker(error);\r\n                    });\r\n                }, 5 * 60 * 1000);\r\n            }\r\n        };\r\n        this.attemptRedirect = function () {\r\n            var request = {\r\n                options: {\r\n                    pointOfContactSystemName: _this._settings\r\n                        .pointOfContactSystemName\r\n                },\r\n                originDomain: _this._window.document.location.host,\r\n                requestUrl: _this._window.document.location.href\r\n            };\r\n            if (_this._settings.endpointId != null) {\r\n                request.endpointId = _this._settings.endpointId;\r\n            }\r\n            return _this._sender\r\n                .sendToTrackerWithoutSessionAndGetResult(\"/v1.1/redirect\", request)\r\n                .then(function (response) {\r\n                if (response.redirectUrl != null) {\r\n                    _this._window.location.replace(response.redirectUrl);\r\n                }\r\n                else {\r\n                    _this.trackVisit();\r\n                }\r\n            });\r\n        };\r\n        this.validateOperationParameters = function (parameters) {\r\n            if (!parameters)\r\n                throw new Error(\"parameters required\");\r\n            if (!parameters.operation)\r\n                throw new Error(\"operation required\");\r\n        };\r\n        this.createV3Request = function (parameters) {\r\n            var request = {\r\n                originDomain: _this._window.location.host,\r\n                deviceUUID: _this._sessionStorage.tryGetDeviceUUID(),\r\n                operation: parameters.operation,\r\n                ianaTimeZone: _this.timeZoneProvider.tryGetTimeZone()\r\n            };\r\n            if (_this._settings.endpointId != null) {\r\n                request.endpointId = _this._settings.endpointId;\r\n            }\r\n            if (parameters.data) {\r\n                request.data = JSON.stringify(parameters.data);\r\n            }\r\n            var additionalParameters = Object.keys(parameters)\r\n                .filter(function (p) {\r\n                return p != \"operation\" &&\r\n                    p != \"data\" &&\r\n                    p != \"onSuccess\" &&\r\n                    p != \"onValidationError\" &&\r\n                    p != \"onError\";\r\n            })\r\n                .map(function (key) { return ({ name: key, value: parameters[key] }); });\r\n            return { request: request, additionalParameters: additionalParameters };\r\n        };\r\n        this.fillMessageData = function (message) {\r\n            var deviceUUID = _this._sessionStorage.tryGetDeviceUUID();\r\n            if (deviceUUID != null && deviceUUID != \"\") {\r\n                if (deviceUUID != \"undefined\") {\r\n                    message.session = {\r\n                        deviceGuid: deviceUUID\r\n                    };\r\n                }\r\n                else {\r\n                    _this.logErrorWithDataFromTracker(new Error(\"deviceUUID = \" + deviceUUID));\r\n                    _this._cookieManager.remove(\"mindboxDeviceUUID\");\r\n                    _this._cookieManager.remove(\"directCrm-session\");\r\n                    try {\r\n                        _this._window.localStorage.removeItem(\"directCrm-session\");\r\n                    }\r\n                    catch (e) {\r\n                        // не удалось и ладно.\r\n                    }\r\n                }\r\n            }\r\n            message.options = {\r\n                pointOfContactSystemName: _this._settings.pointOfContactSystemName\r\n            };\r\n            if (_this._settings.endpointId != null) {\r\n                message.endpointId = _this._settings.endpointId;\r\n            }\r\n            message.originDomain = _this._window.document.location.host;\r\n            var customer = _this._settings.customer;\r\n            if (customer) {\r\n                message.customerId = customer.id;\r\n                message.sessionKey = customer.sessionKey;\r\n            }\r\n            try {\r\n                message.screenResolution =\r\n                    window.screen.width + \"x\" + window.screen.height;\r\n            }\r\n            catch (e) {\r\n                //не шмогла\r\n            }\r\n        };\r\n        try {\r\n            this._previousRequestPromise = undefined;\r\n            for (var index = 0; index < queue.length; ++index) {\r\n                var item = Array.prototype.slice.call(queue[index]);\r\n                if (item[0] == \"create\") {\r\n                    this.invoke(item.shift(), item);\r\n                    queue.splice(index, 1);\r\n                }\r\n            }\r\n            for (var index = 0; index < queue.length; ++index) {\r\n                var item = Array.prototype.slice.call(queue[index]);\r\n                this.invoke(item.shift(), item);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // TODO: Починить потенциальный undefined\r\n            this.logErrorWithDataFromTracker(e);\r\n        }\r\n    }\r\n    Tracker.initialize = function () {\r\n        if (window.mindboxInitialized)\r\n            throw new Error(\"Multiple attepmts to initialize tracker. Look for duplicate mindbox script-blocks.\");\r\n        var queue;\r\n        if (window.mindbox != null && window.mindbox.queue != null) {\r\n            queue = window.mindbox.queue;\r\n        }\r\n        else if (window.directCrm != null && window.directCrm.Queue != null) {\r\n            queue = window.directCrm.Queue;\r\n        }\r\n        else {\r\n            queue = new Array();\r\n        }\r\n        var tracker = new Tracker(queue);\r\n        window.mindbox = tracker.process;\r\n        window.mindboxInitialized = true;\r\n        window.directCrm = tracker.process;\r\n    };\r\n    Tracker.dispose = function () {\r\n        delete window.mindbox;\r\n        delete window.mindboxInitialized;\r\n        delete window.directCrm;\r\n    };\r\n    Tracker.prototype.trackVisit = function () {\r\n        var message = {\r\n            requestUrl: this._window.document.location.href,\r\n            referrerUrl: this._window.document.referrer,\r\n            ianaTimeZone: this.timeZoneProvider.tryGetTimeZone()\r\n        };\r\n        // Если нам передали пустой redirectedFrom, игнорируем его.\r\n        if (this._settings.redirectedFrom &&\r\n            (this._settings.redirectedFrom.requestUrl ||\r\n                this._settings.redirectedFrom.referrerUrl)) {\r\n            message.redirectedFrom = {\r\n                requestUrl: this._settings.redirectedFrom.requestUrl,\r\n                referrerUrl: this._settings.redirectedFrom.referrerUrl\r\n            };\r\n        }\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/customer/track-visit\", message);\r\n    };\r\n    Tracker.prototype.keepAlive = function () {\r\n        var message = {};\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/customer/keep-alive\", message);\r\n    };\r\n    Tracker.prototype.sync = function (parameters) {\r\n        var _this = this;\r\n        this.validateOperationParameters(parameters);\r\n        if (parameters.onSuccess && typeof parameters.onSuccess !== \"function\")\r\n            throw new Error(\"onSuccess should be a function\");\r\n        if (parameters.onValidationError &&\r\n            typeof parameters.onValidationError !== \"function\")\r\n            throw new Error(\"onValidationError should be a function\");\r\n        if (parameters.onError && typeof parameters.onError !== \"function\")\r\n            throw new Error(\"onError should be a function\");\r\n        var _a = this.createV3Request(parameters), request = _a.request, additionalParameters = _a.additionalParameters;\r\n        var handleError = function (error) {\r\n            if (parameters.onError) {\r\n                parameters.onError(error);\r\n            }\r\n            _this.logErrorWithDataFromTracker(error);\r\n        };\r\n        return this._sender\r\n            .sendToTrackerAndGetResult(\"/v3/js/operations/sync\", request, additionalParameters)\r\n            .then(function (response) {\r\n            if (services_responses_ts_1.ServiceResponses.isSuccess(response)) {\r\n                if (parameters.onSuccess) {\r\n                    var sanitizedResponse = __assign({}, response);\r\n                    delete sanitizedResponse.deviceUUID;\r\n                    delete sanitizedResponse.requestId;\r\n                    delete sanitizedResponse.status;\r\n                    parameters.onSuccess(sanitizedResponse);\r\n                }\r\n            }\r\n            else if (services_responses_ts_1.ServiceResponses.isValidationError(response)) {\r\n                if (parameters.onValidationError) {\r\n                    parameters.onValidationError(response.validationMessages);\r\n                }\r\n                else {\r\n                    var error = {\r\n                        name: \"Unhandled validation error\",\r\n                        message: JSON.stringify(response.validationMessages),\r\n                        requestId: response.requestId\r\n                    };\r\n                    handleError(error);\r\n                }\r\n            }\r\n            else {\r\n                handleError({\r\n                    name: \"Malformed server response\",\r\n                    message: JSON.stringify(response)\r\n                });\r\n            }\r\n        }, handleError);\r\n    };\r\n    Tracker.prototype.async = function (parameters) {\r\n        var _this = this;\r\n        this.validateOperationParameters(parameters);\r\n        if (parameters.onSuccess && typeof parameters.onSuccess !== \"function\")\r\n            throw new Error(\"onSuccess should be a function\");\r\n        if (parameters.onError && typeof parameters.onError !== \"function\")\r\n            throw new Error(\"onError should be a function\");\r\n        var _a = this.createV3Request(parameters), request = _a.request, additionalParameters = _a.additionalParameters;\r\n        return this._sender\r\n            .sendToTrackerAndForget(\"/v3/js/operations/async\", request, additionalParameters)\r\n            .then(function () {\r\n            if (parameters.onSuccess) {\r\n                parameters.onSuccess();\r\n            }\r\n        }, function (error) {\r\n            if (parameters.onError) {\r\n                parameters.onError(error);\r\n            }\r\n            _this.logErrorWithDataFromTracker(error);\r\n        });\r\n    };\r\n    //#region LEGACY\r\n    Tracker.prototype.authenticate = function (ticket) {\r\n        var message = {\r\n            ticket: ticket\r\n        };\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/customer/authenticate/by-ticket\", message);\r\n    };\r\n    Tracker.prototype.identify = function (parameters) {\r\n        var _this = this;\r\n        if (!parameters)\r\n            throw new Error(\"parameters required\");\r\n        if (!parameters.operation)\r\n            throw new Error(\"operation required\");\r\n        if (!parameters.identificator)\r\n            throw new Error(\"identificator required\");\r\n        if (!parameters.identificator.provider)\r\n            throw new Error(\"provider required\");\r\n        if (!parameters.identificator.identity)\r\n            throw new Error(\"identity required\");\r\n        var message = {\r\n            operation: parameters.operation,\r\n            identity: parameters.identificator.identity,\r\n            provider: parameters.identificator.provider,\r\n            ianaTimeZone: this.timeZoneProvider.tryGetTimeZone()\r\n        };\r\n        if (parameters.data) {\r\n            message.data = JSON.stringify(parameters.data);\r\n        }\r\n        this.fillMessageData(message);\r\n        var onSuccess = parameters.success && typeof parameters.success === \"function\"\r\n            ? parameters.success\r\n            : function () { };\r\n        var onError = parameters.error && typeof parameters.error === \"function\"\r\n            ? parameters.error\r\n            : function (error) { };\r\n        return this._sender\r\n            .sendToTrackerAndForget(\"/v1.1/customer/identify\", message)\r\n            .then(onSuccess, function (error) {\r\n            onError(error);\r\n            _this.logErrorWithDataFromTracker(error);\r\n        });\r\n    };\r\n    Tracker.prototype.performOperation = function (parameters) {\r\n        var _this = this;\r\n        if (!parameters)\r\n            throw new Error(\"parameters required\");\r\n        var onSuccess = parameters.success && typeof parameters.success === \"function\"\r\n            ? parameters.success\r\n            : function () { };\r\n        var onError = parameters.error && typeof parameters.error === \"function\"\r\n            ? parameters.error\r\n            : function (error) { };\r\n        var operationSystemName = typeof parameters === \"string\"\r\n            ? parameters\r\n            : parameters.operation;\r\n        var message = {\r\n            operationSystemName: operationSystemName\r\n        };\r\n        this.fillMessageData(message);\r\n        if (parameters.data) {\r\n            message.data = JSON.stringify(parameters.data);\r\n        }\r\n        return this._sender\r\n            .sendToTrackerAndForget(\"/v1.1/customer/track-event\", message)\r\n            .then(onSuccess, function (error) {\r\n            onError(error);\r\n            _this.logErrorWithDataFromTracker(error);\r\n        });\r\n    };\r\n    Tracker.prototype.closeSession = function () {\r\n        var message = {};\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/customer/close-session\", message);\r\n    };\r\n    Tracker.prototype.order_create = function (order) {\r\n        var message = {\r\n            order: order\r\n        };\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/order/create\", message);\r\n    };\r\n    Tracker.prototype.cart_addProduct = function (item) {\r\n        var message = {\r\n            item: item\r\n        };\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/cart/add-product\", message);\r\n    };\r\n    Tracker.prototype.cart_removeProduct = function (item) {\r\n        var message = {\r\n            item: item\r\n        };\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/cart/remove-product\", message);\r\n    };\r\n    Tracker.prototype.cart_setProductQuantity = function (item) {\r\n        var message = {\r\n            item: item\r\n        };\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/cart/set-product-quantity\", message);\r\n    };\r\n    Tracker.prototype.cart_clear = function () {\r\n        var message = {};\r\n        this.fillMessageData(message);\r\n        return this._sender.sendToTrackerAndForget(\"/v1.1/cart/clear\", message);\r\n    };\r\n    Tracker.prototype.getSegments = function (operationName, callback) {\r\n        if (!operationName)\r\n            throw new Error(\"OperationName required\");\r\n        if (!callback)\r\n            throw new Error(\"Callback required\");\r\n        var customer = this._settings.customer;\r\n        var message = {\r\n            operation: operationName,\r\n            DirectCrmBrand: this._settings.brandSystemName,\r\n            DirectCrmPointOfContactSystemName: this._settings\r\n                .pointOfContactSystemName\r\n        };\r\n        if (customer) {\r\n            message.DirectCrmAuthorizationCustomerId = customer.id;\r\n            message.DirectCrmAuthorizationSessionKey = customer.sessionKey;\r\n        }\r\n        return this._sender\r\n            .sendToDirectCrm(\"/v3/customers/current/segments\", message)\r\n            .then(function (data) {\r\n            try {\r\n                callback(data);\r\n            }\r\n            catch (error) {\r\n                // Ошибки клиентов логируем только в консоль\r\n                console.error(error);\r\n            }\r\n        });\r\n    };\r\n    return Tracker;\r\n}());\r\nexports.Tracker = Tracker;\r\nTracker.initialize();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9KYXZhc2NyaXB0LlNESy9UcmFja2VyL3YxL1RyYWNraW5nLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vSmF2YXNjcmlwdC5TREsvVHJhY2tlci92MS9UcmFja2luZy50cz8zYjg4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIHRzbGludDpkaXNhYmxlOnN0cmljdC1ib29sZWFuLWV4cHJlc3Npb25zICovXHJcbmltcG9ydCBcIi4uL2xpYnMvY29uc29sZS1wb2x5ZmlsbFwiO1xyXG5cclxuaW1wb3J0IHsgUHJvbWlzZSB9IGZyb20gXCIuLi9saWJzL2VzNi1wcm9taXNlXCI7XHJcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi9EZXBsb3ltZW50XCI7XHJcbmltcG9ydCB7IGdldERlZmF1bHRTZXJ2aWNlRG9tYWluIH0gZnJvbSBcIi4vRGVwbG95bWVudFwiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0U2VuZGVyIH0gZnJvbSBcIi4vUmVxdWVzdFNlbmRlclwiO1xyXG5pbXBvcnQgKiBhcyBWMU1lc3NhZ2VzIGZyb20gXCIuL01lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IFJlcXVlc3RFcnJvciwgVGltZW91dCB9IGZyb20gXCIuL0Vycm9yc1wiO1xyXG5pbXBvcnQgeyBNYW5hZ2VyIGFzIENvb2tpZU1hbmFnZXIgfSBmcm9tIFwiLi9Db29raWVNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IEN1c3RvbWVyU2Vzc2lvblN0b3JhZ2UgfSBmcm9tIFwiLi9DdXN0b21lclNlc3Npb25TdG9yYWdlXCI7XHJcbmltcG9ydCB7IFRyYWNrZXJMb2dnZXIgfSBmcm9tIFwiLi9UcmFja2VyTG9nZ2VyL1RyYWNrZXJMb2dnZXJcIjtcclxuaW1wb3J0IHsgSVRyYWNrZXJMb2dnZXIgfSBmcm9tIFwiLi9UcmFja2VyTG9nZ2VyL0lUcmFja2VyTG9nZ2VyXCI7XHJcbmltcG9ydCB7XHJcbiAgICBUcmFja2VyU2V0dGluZ3MsXHJcbiAgICBjb21wYXJlU2V0dGluZ3MsXHJcbiAgICBUcmFja2VyRGlhZ25vc3RpY3NJbmZvXHJcbn0gZnJvbSBcIi4vVHJhY2tlclNldHRpbmdzXCI7XHJcbmltcG9ydCB7IE1vZHVsZU1hbmFnZXIgfSBmcm9tIFwidHJhY2tlci92MS9Nb2R1bGVNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IElkZW50aWZpY2F0aW9uUGFyYW1ldGVycyB9IGZyb20gXCIuL0lkZW50aWZpY2F0aW9uUGFyYW1ldGVyc1wiO1xyXG5pbXBvcnQgeyBWM09wZXJhdGlvblJlcXVlc3QgfSBmcm9tIFwiLi4vdjMvTWVzc2FnZXNcIjtcclxuaW1wb3J0IHtcclxuICAgIEFzeW5jT3BlcmF0aW9uUGFyYW1ldGVycyxcclxuICAgIE9wZXJhdGlvblBhcmFtZXRlcnMsXHJcbiAgICBTeW5jT3BlcmF0aW9uUGFyYW1ldGVyc1xyXG59IGZyb20gXCIuLi92My9PcGVyYXRpb25QYXJhbWV0ZXJzXCI7XHJcbmltcG9ydCB7IFN5bmNUcmFja2VyUmVzcG9uc2UgfSBmcm9tIFwiLi9NZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBTZXJ2aWNlUmVzcG9uc2VzIH0gZnJvbSBcIkBtaW5kYm94L3NlcnZpY2VzLXJlc3BvbnNlcy10c1wiO1xyXG5pbXBvcnQgeyBJVGltZVpvbmVQcm92aWRlciB9IGZyb20gXCIuL1RpbWVab25lUHJvdmlkZXIvSVRpbWVab25lUHJvdmlkZXJcIjtcclxuaW1wb3J0IHsgSWFuYVRpbWVab25lUHJvdmlkZXIgfSBmcm9tIFwiLi9UaW1lWm9uZVByb3ZpZGVyL1RpbWVab25lUHJvdmlkZXJcIjtcclxuXHJcbmltcG9ydCBcIi4vR2xvYmFsVHlwZXNcIjtcclxuaW1wb3J0IHsgTXVsdGlwbGVDYWxsc1RvQ3JlYXRlRXJyb3IgfSBmcm9tIFwidHJhY2tlci92MS9FcnJvcnMvTXVsdGlwbGVDYWxsc1RvQ3JlYXRlRXJyb3JcIjtcclxuXHJcbmNsYXNzIFRyYWNrZXIge1xyXG4gICAgcHJpdmF0ZSBfc2VuZGVyOiBSZXF1ZXN0U2VuZGVyO1xyXG4gICAgcHJpdmF0ZSBfc2V0dGluZ3M6IFRyYWNrZXJTZXR0aW5ncztcclxuICAgIHByaXZhdGUgX2Nvb2tpZU1hbmFnZXI6IENvb2tpZU1hbmFnZXI7XHJcbiAgICBwcml2YXRlIF9zZXNzaW9uU3RvcmFnZTogQ3VzdG9tZXJTZXNzaW9uU3RvcmFnZTtcclxuICAgIHByaXZhdGUgX3dpbmRvdzogV2luZG93O1xyXG4gICAgcHJpdmF0ZSBfcHJldmlvdXNSZXF1ZXN0UHJvbWlzZTogUHJvbWlzZTx2b2lkPiA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9sb2dnZXI6IElUcmFja2VyTG9nZ2VyO1xyXG4gICAgcHJpdmF0ZSB0aW1lWm9uZVByb3ZpZGVyOiBJVGltZVpvbmVQcm92aWRlcjtcclxuICAgIHByaXZhdGUgbW9kdWxlTWFuYWdlcjogTW9kdWxlTWFuYWdlcjtcclxuICAgIHByaXZhdGUgY3JlYXRlUmVxdWVzdHNDb3VudGVyID0gMDtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5taW5kYm94SW5pdGlhbGl6ZWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwiTXVsdGlwbGUgYXR0ZXBtdHMgdG8gaW5pdGlhbGl6ZSB0cmFja2VyLiBMb29rIGZvciBkdXBsaWNhdGUgbWluZGJveCBzY3JpcHQtYmxvY2tzLlwiXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBxdWV1ZTogYW55W107XHJcbiAgICAgICAgaWYgKHdpbmRvdy5taW5kYm94ICE9IG51bGwgJiYgd2luZG93Lm1pbmRib3gucXVldWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWV1ZSA9IHdpbmRvdy5taW5kYm94LnF1ZXVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LmRpcmVjdENybSAhPSBudWxsICYmIHdpbmRvdy5kaXJlY3RDcm0uUXVldWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBxdWV1ZSA9IHdpbmRvdy5kaXJlY3RDcm0uUXVldWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcXVldWUgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0cmFja2VyID0gbmV3IFRyYWNrZXIocXVldWUpO1xyXG4gICAgICAgIHdpbmRvdy5taW5kYm94ID0gdHJhY2tlci5wcm9jZXNzO1xyXG4gICAgICAgIHdpbmRvdy5taW5kYm94SW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIHdpbmRvdy5kaXJlY3RDcm0gPSB0cmFja2VyLnByb2Nlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgIGRlbGV0ZSB3aW5kb3cubWluZGJveDtcclxuICAgICAgICBkZWxldGUgd2luZG93Lm1pbmRib3hJbml0aWFsaXplZDtcclxuICAgICAgICBkZWxldGUgd2luZG93LmRpcmVjdENybTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHF1ZXVlOiBhbnlbXSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzUmVxdWVzdFByb21pc2UgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcXVldWUubGVuZ3RoOyArK2luZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocXVldWVbaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtWzBdID09IFwiY3JlYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmludm9rZShpdGVtLnNoaWZ0KCksIGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBxdWV1ZS5sZW5ndGg7ICsraW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChxdWV1ZVtpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnZva2UoaXRlbS5zaGlmdCgpLCBpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzog0J/QvtGH0LjQvdC40YLRjCDQv9C+0YLQtdC90YbQuNCw0LvRjNC90YvQuSB1bmRlZmluZWRcclxuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJvY2VzcyA9ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpO1xyXG4gICAgICAgIHRoaXMuaW52b2tlKGl0ZW0uc2hpZnQoKSwgaXRlbSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgaXNQcmVyZW5kZXJPclByZXZpZXcgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgY29uc3QgdmlzaWJpbHR5U3RhdGUgPVxyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvdy5kb2N1bWVudFtcIndlYmtpdFZpc2liaWxpdHlTdGF0ZVwiXSB8fFxyXG4gICAgICAgICAgICBcInZpc2libGVcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc2liaWx0eVN0YXRlID09IFwicHJldmlld1wiIHx8IHZpc2liaWx0eVN0YXRlID09IFwicHJlcmVuZGVyXCI7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgaW52b2tlID0gKG1ldGhvZE5hbWU6IHN0cmluZywgcGFyYW1zOiBhbnkpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIW1ldGhvZE5hbWUpIHRocm93IG5ldyBFcnJvcihcIm1ldGhvZE5hbWUgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChtZXRob2ROYW1lICE9PSBcImNyZWF0ZVwiICYmICF0aGlzLl9zZXR0aW5ncylcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IHNob3VsZCBjYWxsIFwiY3JlYXRlXCIgZmlyc3QnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIG1ldGhvZE5hbWUgIT09IFwiY3JlYXRlXCIgJiZcclxuICAgICAgICAgICAgICAgICghdGhpcy5fY29va2llTWFuYWdlci5pc0Nvb2tpZUVuYWJsZWQoKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmVyZW5kZXJPclByZXZpZXcoKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09IFwiY3JlYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJ5Q3JlYXRlKHBhcmFtc1swXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIG1ldGhvZE5hbWUgPT09IFwiZ2V0RGlhZ25vc3RpY3NJbmZvXCIgJiZcclxuICAgICAgICAgICAgICAgIHBhcmFtc1swXSBpbnN0YW5jZW9mIEZ1bmN0aW9uXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXREaWFnbm9zdGljc0luZm8ocGFyYW1zWzBdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9kdWxlQ29tbWFuZCA9IHRoaXMubW9kdWxlTWFuYWdlci50cnlHZXRNb2R1bGVDb21tYW5kKFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kTmFtZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAobW9kdWxlQ29tbWFuZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZHVsZU1hbmFnZXIuaW52b2tlTW9kdWxlKG1vZHVsZUNvbW1hbmQsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG93bk1ldGhvZE5hbWUgPSBtZXRob2ROYW1lLnJlcGxhY2UoXCIuXCIsIFwiX1wiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW293bk1ldGhvZE5hbWVdID09PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtZXRob2Q6IFwiICsgb3duTWV0aG9kTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFyYW1zIGluc3RhbmNlb2YgQXJyYXkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRoZW4oKCkgPT4gdGhpc1tvd25NZXRob2ROYW1lXS5hcHBseSh0aGlzLCBwYXJhbXMpKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnRoZW4oKCkgPT4gdGhpc1tvd25NZXRob2ROYW1lXS5jYWxsKHRoaXMsIHBhcmFtcykpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHRoZW4gPSAoY2FsbEJhY2s6ICgpID0+IFByb21pc2U8dm9pZD4pOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fc2Vzc2lvblN0b3JhZ2UuZGV2aWNlVVVJRElzU2V0KCkpIHtcclxuICAgICAgICAgICAgY2FsbEJhY2soKS50aGVuKHVuZGVmaW5lZCwgZXJyb3IgPT5cclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRXJyb3JXaXRoRGF0YUZyb21UcmFja2VyKGVycm9yKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wcmV2aW91c1JlcXVlc3RQcm9taXNlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzUmVxdWVzdFByb21pc2UgPSBjYWxsQmFjaygpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0+IHRoaXMubG9nRXJyb3JXaXRoRGF0YUZyb21UcmFja2VyKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzUmVxdWVzdFByb21pc2UgPSB0aGlzLl9wcmV2aW91c1JlcXVlc3RQcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gY2FsbEJhY2soKSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbih1bmRlZmluZWQsIGVycm9yID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nRXJyb3JXaXRoRGF0YUZyb21UcmFja2VyKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgZ2V0VHJhY2tlckFkZGl0aW9uYWxEYXRhID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBkZXZpY2VVVUlEID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBkZXZpY2VVVUlEID0gdGhpcy5fc2Vzc2lvblN0b3JhZ2UudHJ5R2V0RGV2aWNlVVVJRCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L3QtSDRg9C00LDQu9C+0YHRjCDQv9C+0LvRg9GH0LjRgtGMIGRldmljZVVVSUQsINC30LDQu9C+0LPQuNGA0YPQtdC8INCx0LXQtyDQvdC10LPQvi5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0cmFja2VyQWRkaXRpb25hbERhdGEgPSB7XHJcbiAgICAgICAgICAgIFZlcnNpb246IHZlcnNpb24sXHJcbiAgICAgICAgICAgIFwiUG9pbnQgb2YgY29udGFjdFwiOiB0aGlzLl9zZXR0aW5ncy5wb2ludE9mQ29udGFjdFN5c3RlbU5hbWUsXHJcbiAgICAgICAgICAgIEVuZHBvaW50OiB0aGlzLl9zZXR0aW5ncy5lbmRwb2ludElkLFxyXG4gICAgICAgICAgICBPcmlnaW46IGxvY2F0aW9uLm9yaWdpbixcclxuICAgICAgICAgICAgRGV2aWNlVVVJRDogZGV2aWNlVVVJRFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0cmFja2VyQWRkaXRpb25hbERhdGE7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgbG9nRXJyb3JXaXRoRGF0YUZyb21UcmFja2VyID0gKFxyXG4gICAgICAgIGVycm9yOiBFcnJvcixcclxuICAgICAgICBhZGRpdGlvbmFsRGF0YT86IE9iamVjdFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdHJhY2tlckFkZGl0aW9uYWxEYXRhID0gdGhpcy5nZXRUcmFja2VyQWRkaXRpb25hbERhdGEoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVxdWVzdEVycm9yID0gZXJyb3IgYXMgUmVxdWVzdEVycm9yO1xyXG4gICAgICAgIGlmIChyZXF1ZXN0RXJyb3IucmVxdWVzdElkKVxyXG4gICAgICAgICAgICB0cmFja2VyQWRkaXRpb25hbERhdGFbXCJSZXF1ZXN0SWRcIl0gPSByZXF1ZXN0RXJyb3IucmVxdWVzdElkO1xyXG5cclxuICAgICAgICB0aGlzLl9sb2dnZXIubG9nRXJyb3IoZXJyb3IsIHtcclxuICAgICAgICAgICAgLi4udHJhY2tlckFkZGl0aW9uYWxEYXRhLFxyXG4gICAgICAgICAgICAuLi5hZGRpdGlvbmFsRGF0YVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHRyYWNrRXZlbnRXaXRoRGF0YUZyb21UcmFja2VyID0gKFxyXG4gICAgICAgIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBhZGRpdGlvbmFsRGF0YT86IE9iamVjdFxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdHJhY2tlckFkZGl0aW9uYWxEYXRhID0gdGhpcy5nZXRUcmFja2VyQWRkaXRpb25hbERhdGEoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbG9nZ2VyLnRyYWNrRXZlbnQobmFtZSwge1xyXG4gICAgICAgICAgICAuLi50cmFja2VyQWRkaXRpb25hbERhdGEsXHJcbiAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxEYXRhXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlhZ25vc3RpY3NJbmZvID0gKFxyXG4gICAgICAgIGNhbGxiYWNrOiAoYXJnOiBUcmFja2VyRGlhZ25vc3RpY3NJbmZvKSA9PiB2b2lkXHJcbiAgICApID0+IHtcclxuICAgICAgICBjYWxsYmFjayh7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJlcXVlc3RzQ291bnQ6IHRoaXMuY3JlYXRlUmVxdWVzdHNDb3VudGVyLFxyXG4gICAgICAgICAgICBlbmRwb2ludElkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgIT0gbnVsbCA/IHRoaXMuX3NldHRpbmdzLmVuZHBvaW50SWQgOiBudWxsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgdHJ5Q3JlYXRlID0gKHNldHRpbmdzOiBUcmFja2VyU2V0dGluZ3MpOiB2b2lkID0+IHtcclxuICAgICAgICArK3RoaXMuY3JlYXRlUmVxdWVzdHNDb3VudGVyO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3ByZXZpb3VzUmVxdWVzdFByb21pc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGUoc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5nc0RpZmYgPSBjb21wYXJlU2V0dGluZ3ModGhpcy5fc2V0dGluZ3MsIHNldHRpbmdzKTtcclxuICAgICAgICBpZiAoc2V0dGluZ3NEaWZmID09IG51bGwpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoXHJcbiAgICAgICAgICAgIG5ldyBNdWx0aXBsZUNhbGxzVG9DcmVhdGVFcnJvcihzZXR0aW5nc0RpZmYpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGUgPSAoc2V0dGluZ3M6IFRyYWNrZXJTZXR0aW5ncykgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3MgfHwge307XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3Muc2VydmljZURvbWFpbiA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNlcnZpY2VEb21haW4gPT09IFwidHJhY2tlci5kaXJlY3Rjcm0ucnVcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5zZXJ2aWNlRG9tYWluID0gZ2V0RGVmYXVsdFNlcnZpY2VEb21haW4oKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5zZXJ2aWNlRG9tYWluID09PSBcInRyYWNrZXIuc3RhZ2luZy5kaXJlY3Rjcm0ucnVcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5zZXJ2aWNlRG9tYWluID0gXCJhcGkuc3RhZ2luZy5kaXJlY3Rjcm0ucnVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3dpbmRvdyA9IHRoaXMuX3NldHRpbmdzLndpbmRvd092ZXJyaWRlXHJcbiAgICAgICAgICAgID8gKHRoaXMuX3NldHRpbmdzLndpbmRvd092ZXJyaWRlIGFzIFdpbmRvdylcclxuICAgICAgICAgICAgOiB3aW5kb3c7XHJcblxyXG4gICAgICAgIHRoaXMuX2Nvb2tpZU1hbmFnZXIgPSBuZXcgQ29va2llTWFuYWdlcih0aGlzLl93aW5kb3cpO1xyXG4gICAgICAgIHRoaXMuX2Nvb2tpZU1hbmFnZXIuc2V0QmFzZURvbWFpbigpO1xyXG4gICAgICAgIHRoaXMuX3Nlc3Npb25TdG9yYWdlID0gbmV3IEN1c3RvbWVyU2Vzc2lvblN0b3JhZ2UoXHJcbiAgICAgICAgICAgIHRoaXMuX2Nvb2tpZU1hbmFnZXIsXHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvd1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NlbmRlciA9IG5ldyBSZXF1ZXN0U2VuZGVyKFxyXG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uU3RvcmFnZSxcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3Muc2VydmljZURvbWFpbixcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MucHJvamVjdERvbWFpbixcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MudXNlSHR0cCxcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MuY3Jvc3NEb21haW5SZXF1ZXN0RmFjdG9yeU92ZXJyaWRlXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbG9nZ2VyID1cclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MubG9nZ2VyT3ZlcnJpZGUgPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgPyBuZXcgVHJhY2tlckxvZ2dlcigpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuX3NldHRpbmdzLmxvZ2dlck92ZXJyaWRlO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVab25lUHJvdmlkZXIgPVxyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy50aW1lWm9uZVByb3ZpZGVyT3ZlcnJpZGUgPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgPyBuZXcgSWFuYVRpbWVab25lUHJvdmlkZXIoKVxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLl9zZXR0aW5ncy50aW1lWm9uZVByb3ZpZGVyT3ZlcnJpZGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZ2dlcldpdGhBZGRpdGlvbmFsRGF0YUZyb21UcmFja2VyOiBJVHJhY2tlckxvZ2dlciA9IHtcclxuICAgICAgICAgICAgbG9nRXJyb3I6IHRoaXMubG9nRXJyb3JXaXRoRGF0YUZyb21UcmFja2VyLFxyXG4gICAgICAgICAgICB0cmFja0V2ZW50OiB0aGlzLnRyYWNrRXZlbnRXaXRoRGF0YUZyb21UcmFja2VyXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2R1bGVNYW5hZ2VyID0gbmV3IE1vZHVsZU1hbmFnZXIoXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLFxyXG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uU3RvcmFnZSxcclxuICAgICAgICAgICAgKCkgPT4gdGhpcy5fcHJldmlvdXNSZXF1ZXN0UHJvbWlzZSxcclxuICAgICAgICAgICAgbG9nZ2VyV2l0aEFkZGl0aW9uYWxEYXRhRnJvbVRyYWNrZXJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICF0aGlzLl9jb29raWVNYW5hZ2VyLmlzQ29va2llRW5hYmxlZCgpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuaXNQcmVyZW5kZXJPclByZXZpZXcoKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzaG91bGRSZWRpcmVjdCA9XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoXCJzPVwiKSAhPT0gLTE7XHJcblxyXG4gICAgICAgIHRoaXMuX3ByZXZpb3VzUmVxdWVzdFByb21pc2UgPSAoc2hvdWxkUmVkaXJlY3RcclxuICAgICAgICAgICAgPyB0aGlzLmF0dGVtcHRSZWRpcmVjdCgpXHJcbiAgICAgICAgICAgIDogdGhpcy50cmFja1Zpc2l0KClcclxuICAgICAgICApLnRoZW4odW5kZWZpbmVkLCBlcnJvciA9PiB0aGlzLmxvZ0Vycm9yV2l0aERhdGFGcm9tVHJhY2tlcihlcnJvcikpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3Mua2VlcEFsaXZlKSB7XHJcbiAgICAgICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzUmVxdWVzdFByb21pc2UgPSB0aGlzLl9wcmV2aW91c1JlcXVlc3RQcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5rZWVwQWxpdmUoKSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbih1bmRlZmluZWQsIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyb3IgJiYgZXJyb3IgaW5zdGFuY2VvZiBUaW1lb3V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCA1ICogNjAgKiAxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyB0cmFja1Zpc2l0KCkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFYxTWVzc2FnZXMuVHJhY2tWaXNpdFJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmw6IHRoaXMuX3dpbmRvdy5kb2N1bWVudC5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICByZWZlcnJlclVybDogdGhpcy5fd2luZG93LmRvY3VtZW50LnJlZmVycmVyLFxyXG4gICAgICAgICAgICBpYW5hVGltZVpvbmU6IHRoaXMudGltZVpvbmVQcm92aWRlci50cnlHZXRUaW1lWm9uZSgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8g0JXRgdC70Lgg0L3QsNC8INC/0LXRgNC10LTQsNC70Lgg0L/Rg9GB0YLQvtC5IHJlZGlyZWN0ZWRGcm9tLCDQuNCz0L3QvtGA0LjRgNGD0LXQvCDQtdCz0L4uXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5yZWRpcmVjdGVkRnJvbSAmJlxyXG4gICAgICAgICAgICAodGhpcy5fc2V0dGluZ3MucmVkaXJlY3RlZEZyb20ucmVxdWVzdFVybCB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MucmVkaXJlY3RlZEZyb20ucmVmZXJyZXJVcmwpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UucmVkaXJlY3RlZEZyb20gPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXJsOiB0aGlzLl9zZXR0aW5ncy5yZWRpcmVjdGVkRnJvbS5yZXF1ZXN0VXJsLFxyXG4gICAgICAgICAgICAgICAgcmVmZXJyZXJVcmw6IHRoaXMuX3NldHRpbmdzLnJlZGlyZWN0ZWRGcm9tLnJlZmVycmVyVXJsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmlsbE1lc3NhZ2VEYXRhKG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVyLnNlbmRUb1RyYWNrZXJBbmRGb3JnZXQoXHJcbiAgICAgICAgICAgIFwiL3YxLjEvY3VzdG9tZXIvdHJhY2stdmlzaXRcIixcclxuICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhdHRlbXB0UmVkaXJlY3QgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdDogVjFNZXNzYWdlcy5SZWRpcmVjdFJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHBvaW50T2ZDb250YWN0U3lzdGVtTmFtZTogdGhpcy5fc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAucG9pbnRPZkNvbnRhY3RTeXN0ZW1OYW1lXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9yaWdpbkRvbWFpbjogdGhpcy5fd2luZG93LmRvY3VtZW50LmxvY2F0aW9uLmhvc3QsXHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmw6IHRoaXMuX3dpbmRvdy5kb2N1bWVudC5sb2NhdGlvbi5ocmVmXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmVuZHBvaW50SWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmVuZHBvaW50SWQgPSB0aGlzLl9zZXR0aW5ncy5lbmRwb2ludElkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlclxyXG4gICAgICAgICAgICAuc2VuZFRvVHJhY2tlcldpdGhvdXRTZXNzaW9uQW5kR2V0UmVzdWx0PFxyXG4gICAgICAgICAgICAgICAgVjFNZXNzYWdlcy5SZWRpcmVjdFRyYWNrZXJSZXNwb25zZVxyXG4gICAgICAgICAgICA+KFwiL3YxLjEvcmVkaXJlY3RcIiwgcmVxdWVzdClcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlZGlyZWN0VXJsICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW5kb3cubG9jYXRpb24ucmVwbGFjZShyZXNwb25zZS5yZWRpcmVjdFVybCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tWaXNpdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGtlZXBBbGl2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlOiBWMU1lc3NhZ2VzLlRyYWNrZXJSZXF1ZXN0ID0ge307XHJcbiAgICAgICAgdGhpcy5maWxsTWVzc2FnZURhdGEobWVzc2FnZSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXIuc2VuZFRvVHJhY2tlckFuZEZvcmdldChcclxuICAgICAgICAgICAgXCIvdjEuMS9jdXN0b21lci9rZWVwLWFsaXZlXCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVPcGVyYXRpb25QYXJhbWV0ZXJzID0gKFxyXG4gICAgICAgIHBhcmFtZXRlcnM6IE9wZXJhdGlvblBhcmFtZXRlcnNcclxuICAgICk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmICghcGFyYW1ldGVycykgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1ldGVycyByZXF1aXJlZFwiKTtcclxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMub3BlcmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJvcGVyYXRpb24gcmVxdWlyZWRcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVjNSZXF1ZXN0ID0gKFxyXG4gICAgICAgIHBhcmFtZXRlcnM6IE9wZXJhdGlvblBhcmFtZXRlcnNcclxuICAgICk6IHtcclxuICAgICAgICByZXF1ZXN0OiBWM09wZXJhdGlvblJlcXVlc3Q7XHJcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnM6IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXTtcclxuICAgIH0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3Q6IFYzT3BlcmF0aW9uUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgb3JpZ2luRG9tYWluOiB0aGlzLl93aW5kb3cubG9jYXRpb24uaG9zdCxcclxuICAgICAgICAgICAgZGV2aWNlVVVJRDogdGhpcy5fc2Vzc2lvblN0b3JhZ2UudHJ5R2V0RGV2aWNlVVVJRCgpLFxyXG4gICAgICAgICAgICBvcGVyYXRpb246IHBhcmFtZXRlcnMub3BlcmF0aW9uLFxyXG4gICAgICAgICAgICBpYW5hVGltZVpvbmU6IHRoaXMudGltZVpvbmVQcm92aWRlci50cnlHZXRUaW1lWm9uZSgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmVuZHBvaW50SWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmVuZHBvaW50SWQgPSB0aGlzLl9zZXR0aW5ncy5lbmRwb2ludElkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuZGF0YSkge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmRhdGEgPSBKU09OLnN0cmluZ2lmeShwYXJhbWV0ZXJzLmRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtZXRlcnMgPSBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKVxyXG4gICAgICAgICAgICAuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgcCA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHAgIT0gXCJvcGVyYXRpb25cIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHAgIT0gXCJkYXRhXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICBwICE9IFwib25TdWNjZXNzXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICBwICE9IFwib25WYWxpZGF0aW9uRXJyb3JcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHAgIT0gXCJvbkVycm9yXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAubWFwKGtleSA9PiAoeyBuYW1lOiBrZXksIHZhbHVlOiBwYXJhbWV0ZXJzW2tleV0gYXMgc3RyaW5nIH0pKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgcmVxdWVzdCwgYWRkaXRpb25hbFBhcmFtZXRlcnMgfTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHN5bmMocGFyYW1ldGVyczogU3luY09wZXJhdGlvblBhcmFtZXRlcnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlT3BlcmF0aW9uUGFyYW1ldGVycyhwYXJhbWV0ZXJzKTtcclxuICAgICAgICBpZiAocGFyYW1ldGVycy5vblN1Y2Nlc3MgJiYgdHlwZW9mIHBhcmFtZXRlcnMub25TdWNjZXNzICE9PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9uU3VjY2VzcyBzaG91bGQgYmUgYSBmdW5jdGlvblwiKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnMub25WYWxpZGF0aW9uRXJyb3IgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHBhcmFtZXRlcnMub25WYWxpZGF0aW9uRXJyb3IgIT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgIClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib25WYWxpZGF0aW9uRXJyb3Igc2hvdWxkIGJlIGEgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMub25FcnJvciAmJiB0eXBlb2YgcGFyYW1ldGVycy5vbkVycm9yICE9PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9uRXJyb3Igc2hvdWxkIGJlIGEgZnVuY3Rpb25cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgcmVxdWVzdCwgYWRkaXRpb25hbFBhcmFtZXRlcnMgfSA9IHRoaXMuY3JlYXRlVjNSZXF1ZXN0KFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGFuZGxlRXJyb3IgPSAoZXJyb3I6IEVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbWV0ZXJzLm9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMub25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXJcclxuICAgICAgICAgICAgLnNlbmRUb1RyYWNrZXJBbmRHZXRSZXN1bHQ8U3luY1RyYWNrZXJSZXNwb25zZT4oXHJcbiAgICAgICAgICAgICAgICBcIi92My9qcy9vcGVyYXRpb25zL3N5bmNcIixcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChTZXJ2aWNlUmVzcG9uc2VzLmlzU3VjY2VzcyhyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5vblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNhbml0aXplZFJlc3BvbnNlID0geyAuLi5yZXNwb25zZSB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2FuaXRpemVkUmVzcG9uc2UuZGV2aWNlVVVJRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNhbml0aXplZFJlc3BvbnNlLnJlcXVlc3RJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNhbml0aXplZFJlc3BvbnNlLnN0YXR1cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMub25TdWNjZXNzKHNhbml0aXplZFJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFNlcnZpY2VSZXNwb25zZXMuaXNWYWxpZGF0aW9uRXJyb3IocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMub25WYWxpZGF0aW9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vblZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnZhbGlkYXRpb25NZXNzYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yOiBSZXF1ZXN0RXJyb3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlVuaGFuZGxlZCB2YWxpZGF0aW9uIGVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBKU09OLnN0cmluZ2lmeShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS52YWxpZGF0aW9uTWVzc2FnZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHJlc3BvbnNlLnJlcXVlc3RJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIk1hbGZvcm1lZCBzZXJ2ZXIgcmVzcG9uc2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGhhbmRsZUVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMocGFyYW1ldGVyczogQXN5bmNPcGVyYXRpb25QYXJhbWV0ZXJzKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZU9wZXJhdGlvblBhcmFtZXRlcnMocGFyYW1ldGVycyk7XHJcblxyXG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLm9uU3VjY2VzcyAmJiB0eXBlb2YgcGFyYW1ldGVycy5vblN1Y2Nlc3MgIT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib25TdWNjZXNzIHNob3VsZCBiZSBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLm9uRXJyb3IgJiYgdHlwZW9mIHBhcmFtZXRlcnMub25FcnJvciAhPT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvbkVycm9yIHNob3VsZCBiZSBhIGZ1bmN0aW9uXCIpO1xyXG5cclxuICAgICAgICBjb25zdCB7IHJlcXVlc3QsIGFkZGl0aW9uYWxQYXJhbWV0ZXJzIH0gPSB0aGlzLmNyZWF0ZVYzUmVxdWVzdChcclxuICAgICAgICAgICAgcGFyYW1ldGVyc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXJcclxuICAgICAgICAgICAgLnNlbmRUb1RyYWNrZXJBbmRGb3JnZXQoXHJcbiAgICAgICAgICAgICAgICBcIi92My9qcy9vcGVyYXRpb25zL2FzeW5jXCIsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnNcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbihcclxuICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5vblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vblN1Y2Nlc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0ZXJzLm9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBMRUdBQ1lcclxuICAgIHB1YmxpYyBhdXRoZW50aWNhdGUodGlja2V0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlOiBWMU1lc3NhZ2VzLkF1dGhlbnRpY2F0aW9uQnlUaWNrZXRSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICB0aWNrZXQ6IHRpY2tldFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5maWxsTWVzc2FnZURhdGEobWVzc2FnZSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXIuc2VuZFRvVHJhY2tlckFuZEZvcmdldChcclxuICAgICAgICAgICAgXCIvdjEuMS9jdXN0b21lci9hdXRoZW50aWNhdGUvYnktdGlja2V0XCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpZGVudGlmeShwYXJhbWV0ZXJzOiBJZGVudGlmaWNhdGlvblBhcmFtZXRlcnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMpIHRocm93IG5ldyBFcnJvcihcInBhcmFtZXRlcnMgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgaWYgKCFwYXJhbWV0ZXJzLm9wZXJhdGlvbikgdGhyb3cgbmV3IEVycm9yKFwib3BlcmF0aW9uIHJlcXVpcmVkXCIpO1xyXG4gICAgICAgIGlmICghcGFyYW1ldGVycy5pZGVudGlmaWNhdG9yKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpZGVudGlmaWNhdG9yIHJlcXVpcmVkXCIpO1xyXG4gICAgICAgIGlmICghcGFyYW1ldGVycy5pZGVudGlmaWNhdG9yLnByb3ZpZGVyKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwcm92aWRlciByZXF1aXJlZFwiKTtcclxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMuaWRlbnRpZmljYXRvci5pZGVudGl0eSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWRlbnRpdHkgcmVxdWlyZWRcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFYxTWVzc2FnZXMuSWRlbnRpZmljYXRpb25SZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICBvcGVyYXRpb246IHBhcmFtZXRlcnMub3BlcmF0aW9uLFxyXG4gICAgICAgICAgICBpZGVudGl0eTogcGFyYW1ldGVycy5pZGVudGlmaWNhdG9yLmlkZW50aXR5LFxyXG4gICAgICAgICAgICBwcm92aWRlcjogcGFyYW1ldGVycy5pZGVudGlmaWNhdG9yLnByb3ZpZGVyLFxyXG4gICAgICAgICAgICBpYW5hVGltZVpvbmU6IHRoaXMudGltZVpvbmVQcm92aWRlci50cnlHZXRUaW1lWm9uZSgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuZGF0YSkge1xyXG4gICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwYXJhbWV0ZXJzLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbGxNZXNzYWdlRGF0YShtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb25TdWNjZXNzID1cclxuICAgICAgICAgICAgcGFyYW1ldGVycy5zdWNjZXNzICYmIHR5cGVvZiBwYXJhbWV0ZXJzLnN1Y2Nlc3MgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgPyBwYXJhbWV0ZXJzLnN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgIDogKCkgPT4ge307XHJcbiAgICAgICAgY29uc3Qgb25FcnJvciA9XHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnMuZXJyb3IgJiYgdHlwZW9mIHBhcmFtZXRlcnMuZXJyb3IgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgPyBwYXJhbWV0ZXJzLmVycm9yXHJcbiAgICAgICAgICAgICAgICA6IGVycm9yID0+IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVyXHJcbiAgICAgICAgICAgIC5zZW5kVG9UcmFja2VyQW5kRm9yZ2V0KFwiL3YxLjEvY3VzdG9tZXIvaWRlbnRpZnlcIiwgbWVzc2FnZSlcclxuICAgICAgICAgICAgLnRoZW4ob25TdWNjZXNzLCBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nRXJyb3JXaXRoRGF0YUZyb21UcmFja2VyKGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBlcmZvcm1PcGVyYXRpb24ocGFyYW1ldGVyczogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCFwYXJhbWV0ZXJzKSB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbWV0ZXJzIHJlcXVpcmVkXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBvblN1Y2Nlc3MgPVxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLnN1Y2Nlc3MgJiYgdHlwZW9mIHBhcmFtZXRlcnMuc3VjY2VzcyA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICAgICAgICA/IChwYXJhbWV0ZXJzLnN1Y2Nlc3MgYXMgKCkgPT4gdm9pZClcclxuICAgICAgICAgICAgICAgIDogKCkgPT4ge307XHJcbiAgICAgICAgY29uc3Qgb25FcnJvciA9XHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnMuZXJyb3IgJiYgdHlwZW9mIHBhcmFtZXRlcnMuZXJyb3IgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgPyAocGFyYW1ldGVycy5lcnJvciBhcyAoZXJyb3I6IGFueSkgPT4gdm9pZClcclxuICAgICAgICAgICAgICAgIDogZXJyb3IgPT4ge307XHJcblxyXG4gICAgICAgIGxldCBvcGVyYXRpb25TeXN0ZW1OYW1lID1cclxuICAgICAgICAgICAgdHlwZW9mIHBhcmFtZXRlcnMgPT09IFwic3RyaW5nXCJcclxuICAgICAgICAgICAgICAgID8gcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICAgICAgOiAocGFyYW1ldGVycy5vcGVyYXRpb24gYXMgc3RyaW5nKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZTogVjFNZXNzYWdlcy5UcmFja0V2ZW50UmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgb3BlcmF0aW9uU3lzdGVtTmFtZTogb3BlcmF0aW9uU3lzdGVtTmFtZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZmlsbE1lc3NhZ2VEYXRhKG1lc3NhZ2UpO1xyXG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLmRhdGEpIHtcclxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVycy5kYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXJcclxuICAgICAgICAgICAgLnNlbmRUb1RyYWNrZXJBbmRGb3JnZXQoXCIvdjEuMS9jdXN0b21lci90cmFjay1ldmVudFwiLCBtZXNzYWdlKVxyXG4gICAgICAgICAgICAudGhlbihvblN1Y2Nlc3MsIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dFcnJvcldpdGhEYXRhRnJvbVRyYWNrZXIoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xvc2VTZXNzaW9uKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFYxTWVzc2FnZXMuVHJhY2tlclJlcXVlc3QgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5maWxsTWVzc2FnZURhdGEobWVzc2FnZSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kZXIuc2VuZFRvVHJhY2tlckFuZEZvcmdldChcclxuICAgICAgICAgICAgXCIvdjEuMS9jdXN0b21lci9jbG9zZS1zZXNzaW9uXCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvcmRlcl9jcmVhdGUob3JkZXI6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFYxTWVzc2FnZXMuQ3JlYXRlT3JkZXJSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICBvcmRlcjogb3JkZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmlsbE1lc3NhZ2VEYXRhKG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVyLnNlbmRUb1RyYWNrZXJBbmRGb3JnZXQoXHJcbiAgICAgICAgICAgIFwiL3YxLjEvb3JkZXIvY3JlYXRlXCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjYXJ0X2FkZFByb2R1Y3QoaXRlbTogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZTogVjFNZXNzYWdlcy5Qcm9kdWN0SW5DYXJ0ID0ge1xyXG4gICAgICAgICAgICBpdGVtOiBpdGVtXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZpbGxNZXNzYWdlRGF0YShtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlci5zZW5kVG9UcmFja2VyQW5kRm9yZ2V0KFxyXG4gICAgICAgICAgICBcIi92MS4xL2NhcnQvYWRkLXByb2R1Y3RcIixcclxuICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNhcnRfcmVtb3ZlUHJvZHVjdChpdGVtOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlOiBWMU1lc3NhZ2VzLlByb2R1Y3RJbkNhcnQgPSB7XHJcbiAgICAgICAgICAgIGl0ZW06IGl0ZW1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmlsbE1lc3NhZ2VEYXRhKG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVyLnNlbmRUb1RyYWNrZXJBbmRGb3JnZXQoXHJcbiAgICAgICAgICAgIFwiL3YxLjEvY2FydC9yZW1vdmUtcHJvZHVjdFwiLFxyXG4gICAgICAgICAgICBtZXNzYWdlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FydF9zZXRQcm9kdWN0UXVhbnRpdHkoaXRlbTogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZTogVjFNZXNzYWdlcy5Qcm9kdWN0SW5DYXJ0ID0ge1xyXG4gICAgICAgICAgICBpdGVtOiBpdGVtXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZpbGxNZXNzYWdlRGF0YShtZXNzYWdlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlci5zZW5kVG9UcmFja2VyQW5kRm9yZ2V0KFxyXG4gICAgICAgICAgICBcIi92MS4xL2NhcnQvc2V0LXByb2R1Y3QtcXVhbnRpdHlcIixcclxuICAgICAgICAgICAgbWVzc2FnZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNhcnRfY2xlYXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZTogVjFNZXNzYWdlcy5UcmFja2VyUmVxdWVzdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuZmlsbE1lc3NhZ2VEYXRhKG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVyLnNlbmRUb1RyYWNrZXJBbmRGb3JnZXQoXCIvdjEuMS9jYXJ0L2NsZWFyXCIsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTZWdtZW50cyhcclxuICAgICAgICBvcGVyYXRpb25OYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgY2FsbGJhY2s6IEZ1bmN0aW9uXHJcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAoIW9wZXJhdGlvbk5hbWUpIHRocm93IG5ldyBFcnJvcihcIk9wZXJhdGlvbk5hbWUgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFjaykgdGhyb3cgbmV3IEVycm9yKFwiQ2FsbGJhY2sgcmVxdWlyZWRcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gdGhpcy5fc2V0dGluZ3MuY3VzdG9tZXI7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFYxTWVzc2FnZXMuUGVyZm9ybU9wZXJhdGlvblJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbjogb3BlcmF0aW9uTmFtZSxcclxuICAgICAgICAgICAgRGlyZWN0Q3JtQnJhbmQ6IHRoaXMuX3NldHRpbmdzLmJyYW5kU3lzdGVtTmFtZSxcclxuICAgICAgICAgICAgRGlyZWN0Q3JtUG9pbnRPZkNvbnRhY3RTeXN0ZW1OYW1lOiB0aGlzLl9zZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgLnBvaW50T2ZDb250YWN0U3lzdGVtTmFtZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICBtZXNzYWdlLkRpcmVjdENybUF1dGhvcml6YXRpb25DdXN0b21lcklkID0gY3VzdG9tZXIuaWQ7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UuRGlyZWN0Q3JtQXV0aG9yaXphdGlvblNlc3Npb25LZXkgPSBjdXN0b21lci5zZXNzaW9uS2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlclxyXG4gICAgICAgICAgICAuc2VuZFRvRGlyZWN0Q3JtKFwiL3YzL2N1c3RvbWVycy9jdXJyZW50L3NlZ21lbnRzXCIsIG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0J7RiNC40LHQutC4INC60LvQuNC10L3RgtC+0LIg0LvQvtCz0LjRgNGD0LXQvCDRgtC+0LvRjNC60L4g0LIg0LrQvtC90YHQvtC70YxcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaWxsTWVzc2FnZURhdGEgPSAobWVzc2FnZTogVjFNZXNzYWdlcy5UcmFja2VyUmVxdWVzdCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRldmljZVVVSUQgPSB0aGlzLl9zZXNzaW9uU3RvcmFnZS50cnlHZXREZXZpY2VVVUlEKCk7XHJcbiAgICAgICAgaWYgKGRldmljZVVVSUQgIT0gbnVsbCAmJiBkZXZpY2VVVUlEICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgaWYgKGRldmljZVVVSUQgIT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXNzaW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldmljZUd1aWQ6IGRldmljZVVVSURcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0Vycm9yV2l0aERhdGFGcm9tVHJhY2tlcihcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRXJyb3IoYGRldmljZVVVSUQgPSAke2RldmljZVVVSUR9YClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb29raWVNYW5hZ2VyLnJlbW92ZShcIm1pbmRib3hEZXZpY2VVVUlEXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29va2llTWFuYWdlci5yZW1vdmUoXCJkaXJlY3RDcm0tc2Vzc2lvblwiKTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiZGlyZWN0Q3JtLXNlc3Npb25cIik7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0L3QtSDRg9C00LDQu9C+0YHRjCDQuCDQu9Cw0LTQvdC+LlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZXNzYWdlLm9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHBvaW50T2ZDb250YWN0U3lzdGVtTmFtZTogdGhpcy5fc2V0dGluZ3MucG9pbnRPZkNvbnRhY3RTeXN0ZW1OYW1lXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmVuZHBvaW50SWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50SWQgPSB0aGlzLl9zZXR0aW5ncy5lbmRwb2ludElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlLm9yaWdpbkRvbWFpbiA9IHRoaXMuX3dpbmRvdy5kb2N1bWVudC5sb2NhdGlvbi5ob3N0O1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21lciA9IHRoaXMuX3NldHRpbmdzLmN1c3RvbWVyO1xyXG4gICAgICAgIGlmIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICBtZXNzYWdlLmN1c3RvbWVySWQgPSBjdXN0b21lci5pZDtcclxuICAgICAgICAgICAgbWVzc2FnZS5zZXNzaW9uS2V5ID0gY3VzdG9tZXIuc2Vzc2lvbktleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2Uuc2NyZWVuUmVzb2x1dGlvbiA9XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2NyZWVuLndpZHRoICsgXCJ4XCIgKyB3aW5kb3cuc2NyZWVuLmhlaWdodDtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8v0L3QtSDRiNC80L7Qs9C70LBcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8jZW5kcmVnaW9uIExFR0FDWVxyXG59XHJcblxyXG5UcmFja2VyLmluaXRpYWxpemUoKTtcclxuXHJcbmV4cG9ydCB7IFRyYWNrZXIgfTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQVNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUF1Q0E7QUFBQTtBQWpDQTtBQUlBO0FBbURBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUlBO0FBRUE7QUFJQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7QUFDQTtBQTRSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWpyQkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXVRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUE2QkE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQTRDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE4Q0E7QUFBQTtBQUlBO0FBRkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./Javascript.SDK/Tracker/v1/Tracking.ts\n");

/***/ }),

/***/ "./node_modules/@mindbox/applicationinsights-js/dist/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@mindbox/applicationinsights-js/dist/index.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("!function(e,t){ true?module.exports=t():undefined}(self,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=25)}([function(e,t,i){\"use strict\";var n;Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.LocalStorage=0]=\"LocalStorage\",e[e.SessionStorage=1]=\"SessionStorage\"}(n||(n={}));var r=void 0;t.NotSpecified=\"not_specified\";var o=function(){return s(n.LocalStorage)},s=function(e){var t,i,r=null;try{i=new Date,(r=e===n.LocalStorage?window.localStorage:window.sessionStorage).setItem(i,i),t=r.getItem(i)!=i,r.removeItem(i),t&&(r=null)}catch(e){r=null}return r};t.getStorage=function(e){var t=o();if(null!==t)try{return t.getItem(e)}catch(e){}return null},t.removeStorage=function(e){var t=o();if(null!==t)try{return t.removeItem(e),!0}catch(e){}return!1};var a=function(){return s(n.SessionStorage)};t.canUseSessionStorage=function(){return!!a()},t.getSessionStorage=function(e){var t=a();if(null!==t)try{return t.getItem(e)}catch(e){}return null},t.setSessionStorage=function(e,t){var i=a();if(null!==i)try{return i.setItem(e,t),!0}catch(e){}return!1},t.canUseCookies=function(){if(void 0===r){r=!1;try{r=void 0!==document.cookie}catch(e){}}return r},t.setCookie=function(e,i,n){var r=\"\";n&&(r=\";domain=\"+n),t.canUseCookies()&&(document.cookie=e+\"=\"+i+r+\";path=/\")},t.stringToBoolOrDefault=function(e){return!!e&&\"true\"===e.toString().toLowerCase()},t.getCookie=function(e){if(!t.canUseCookies())return null;var i=\"\";if(e&&e.length)for(var n=e+\"=\",r=document.cookie.split(\";\"),o=0;o<r.length;o++){var s=r[o];if((s=t.trim(s))&&0===s.indexOf(n)){i=s.substring(n.length,r[o].length);break}}return i},t.deleteCookie=function(e){t.canUseCookies()&&(document.cookie=e+\"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;\")},t.trim=function(e){return\"string\"!=typeof e?e:e.replace(/^\\s+|\\s+$/g,\"\")},t.newId=function(){for(var e=\"\",t=1073741824*Math.random();t>0;){e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(t%64),t=Math.floor(t/64)}return e},t.isArray=function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},t.isError=function(e){return\"[object Error]\"===Object.prototype.toString.call(e)||!!e.stack},t.isDate=function(e){return\"[object Date]\"===Object.prototype.toString.call(e)},t.toISOStringForIE8=function(e){if(!t.isDate(e))return null;if(Date.prototype.toISOString)return e.toISOString();var i=function(e){var t=String(e);return 1===t.length&&(t=\"0\"+t),t};return e.getUTCFullYear()+\"-\"+i(e.getUTCMonth()+1)+\"-\"+i(e.getUTCDate())+\"T\"+i(e.getUTCHours())+\":\"+i(e.getUTCMinutes())+\":\"+i(e.getUTCSeconds())+\".\"+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+\"Z\"},t.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():navigator.userAgent.toLowerCase();return-1!=t.indexOf(\"msie\")?parseInt(t.split(\"msie\")[1]):null},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=\"\"+e%1e3,i=\"\"+Math.floor(e/1e3)%60,n=\"\"+Math.floor(e/6e4)%60,r=\"\"+Math.floor(e/36e5)%24;return t=1===t.length?\"00\"+t:2===t.length?\"0\"+t:t,i=i.length<2?\"0\"+i:i,n=n.length<2?\"0\"+n:n,(r=r.length<2?\"0\"+r:r)+\":\"+n+\":\"+i+\".\"+t},t.isCrossOriginError=function(e,t,i,n,r){return(\"Script error.\"===e||\"Script error\"===e)&&null===r}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,r=i(0);!function(e){e[e.Default=0]=\"Default\",e[e.Required=1]=\"Required\",e[e.Array=2]=\"Array\",e[e.Hidden=4]=\"Hidden\"}(n=t.FieldType||(t.FieldType={}));var o=function(){function e(){}return e.serialize=function(t){var i=e._serializeObject(t,\"root\");return JSON.stringify(i)},e._serializeObject=function(t,i){var o={};if(!t)return o;if(t.__aiCircularRefCheck)return o;if(!t.aiDataContract){if(\"measurements\"===i)o=e._serializeStringMap(t,\"number\",i);else if(\"properties\"===i)o=e._serializeStringMap(t,\"string\",i);else if(\"tags\"===i)o=e._serializeStringMap(t,\"string\",i);else if(r.isArray(t))o=e._serializeArray(t,i);else try{JSON.stringify(t),o=t}catch(e){}return o}for(var s in t.__aiCircularRefCheck=!0,t.aiDataContract){var a,c=t.aiDataContract[s],u=\"function\"==typeof c?c()&n.Required:c&n.Required,l=\"function\"==typeof c?c()&n.Hidden:c&n.Hidden,p=c&n.Array,f=void 0!==t[s],d=\"object\"==typeof t[s]&&null!==t[s];if(!u||f||p)if(!l)void 0!==(a=d?p?e._serializeArray(t[s],s):e._serializeObject(t[s],s):t[s])&&(o[s]=a)}return delete t.__aiCircularRefCheck,o},e._serializeArray=function(t,i){var n=void 0;if(t&&r.isArray(t)){n=[];for(var o=0;o<t.length;o++){var s=t[o],a=e._serializeObject(s,i+\"[\"+o+\"]\");n.push(a)}}return n},e._serializeStringMap=function(e,t,i){var n=void 0;if(e)for(var r in n={},e){var o=e[r];if(\"string\"===t)void 0===o?n[r]=\"undefined\":null===o?n[r]=\"null\":o.toString?n[r]=o.toString():n[r]=\"invalid field: toString() is not defined.\";else if(\"number\"===t)if(void 0===o)n[r]=\"undefined\";else if(null===o)n[r]=\"null\";else{var s=parseFloat(o);isNaN(s)?n[r]=\"NaN\":n[r]=s}else n[r]=\"invalid field: \"+i+\" is of unknown type.\"}return n},e}();t.Serializer=o},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=function(){function e(){}return e.sanitizeKeyAndAddUniqueness=function(t,i){var n=t.length,r=e.sanitizeKey(t);if(r.length!==n){for(var o=0,s=r;void 0!==i[s];)o++,s=r.substring(0,e.MAX_NAME_LENGTH-3)+e.padNumber(o);r=s}return r},e.sanitizeKey=function(t){return t&&(t=n.trim(t.toString())).length>e.MAX_NAME_LENGTH&&(t=t.substring(0,e.MAX_NAME_LENGTH)),t},e.sanitizeString=function(t){return t&&(t=n.trim(t)).toString().length>e.MAX_STRING_LENGTH&&(t=t.toString().substring(0,e.MAX_STRING_LENGTH)),t},e.sanitizeMessage=function(t){return t&&t.length>e.MAX_MESSAGE_LENGTH&&(t=t.substring(0,e.MAX_MESSAGE_LENGTH)),t},e.sanitizeException=function(t){return t&&t.length>e.MAX_EXCEPTION_LENGTH&&(t=t.substring(0,e.MAX_EXCEPTION_LENGTH)),t},e.sanitizeProperties=function(t){if(t){var i={};for(var n in t){var r=e.sanitizeString(t[n]);i[n=e.sanitizeKeyAndAddUniqueness(n,i)]=r}t=i}return t},e.sanitizeMeasurements=function(t){if(t){var i={};for(var n in t){var r=t[n];i[n=e.sanitizeKeyAndAddUniqueness(n,i)]=r}t=i}return t},e.padNumber=function(e){var t=\"00\"+e;return t.substr(t.length-3)},e.MAX_NAME_LENGTH=150,e.MAX_STRING_LENGTH=1024,e.MAX_MESSAGE_LENGTH=32768,e.MAX_EXCEPTION_LENGTH=32768,e}();t.DataSanitizer=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=i(1),o=i(2),s=function(){return function(){}}();t.Base=s;var a=function(){return function(e,t){var i=this;this.ver=1,this.sampleRate=100,this.tags={},this.name=o.DataSanitizer.sanitizeString(t)||n.NotSpecified,this.data=e,this.time=n.toISOStringForIE8(new Date),this.aiDataContract={time:r.FieldType.Required,iKey:r.FieldType.Required,name:r.FieldType.Required,sampleRate:function(){return 100==i.sampleRate?r.FieldType.Hidden:r.FieldType.Required},tags:r.FieldType.Required,data:r.FieldType.Required}}}();t.Envelope=a},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){}}();t.Domain=n},function(e,t,i){\"use strict\";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=i(1),s=function(e){function t(t,i){var n=e.call(this)||this;return n.aiDataContract={baseType:o.FieldType.Required,baseData:o.FieldType.Required},n.baseType=t,n.baseData=i,n}return r(t,e),t}(i(3).Base);t.Data=s},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){}}();t.StackFrame=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){this.hasFullStack=!0,this.parsedStack=[]}}();t.ExceptionDetails=n},function(e,t,i){\"use strict\";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t=e.call(this)||this}return r(t,e),t}(i(4).Domain);t.ExceptionData=o},function(e,t,i){\"use strict\";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=i(0),s=i(1),a=i(2),c=i(8),u=i(7),l=i(6),p=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.aiDataContract={ver:s.FieldType.Required,handledAt:s.FieldType.Required,exceptions:s.FieldType.Required,properties:s.FieldType.Default,measurements:s.FieldType.Default},o.properties=a.DataSanitizer.sanitizeProperties(n),o.measurements=a.DataSanitizer.sanitizeMeasurements(r),o.handledAt=i||\"unhandled\",o.exceptions=[new f(t)],o}return r(t,e),t.CreateSimpleException=function(e,t,i,n,r,o,s){return{handledAt:s||\"unhandled\",exceptions:[{hasFullStack:!0,message:e,stack:r,typeName:t,parsedStack:[{level:0,assembly:i,fileName:n,line:o,method:\"unknown\"}]}]}},t.envelopeType=\"ApplicationInsights.{0}.Exception\",t.dataType=\"ExceptionData\",t}(c.ExceptionData);t.TelemetryException=p;var f=function(e){function t(t){var i=e.call(this)||this;i.aiDataContract={id:s.FieldType.Default,outerId:s.FieldType.Default,typeName:s.FieldType.Required,message:s.FieldType.Required,hasFullStack:s.FieldType.Default,stack:s.FieldType.Default,parsedStack:s.FieldType.Array},i.typeName=a.DataSanitizer.sanitizeString(t.name)||o.NotSpecified,i.message=a.DataSanitizer.sanitizeMessage(t.message)||o.NotSpecified;var n=t.stack;return i.parsedStack=i.parseStack(n),i.stack=a.DataSanitizer.sanitizeException(n),i.hasFullStack=o.isArray(i.parsedStack)&&i.parsedStack.length>0,i}return r(t,e),t.prototype.parseStack=function(e){var t=void 0;if(\"string\"==typeof e){var i=e.split(\"\\n\");t=[];for(var n=0,r=0,o=0;o<=i.length;o++){var s=i[o];if(d.regex.test(s)){var a=new d(i[o],n++);r+=a.sizeInBytes,t.push(a)}}if(r>32768)for(var c=0,u=t.length-1,l=0,p=c,f=u;c<u;){if((l+=t[c].sizeInBytes+t[u].sizeInBytes)>32768){var h=f-p+1;t.splice(p,h);break}p=c,f=u,c++,u--}}return t},t}(u.ExceptionDetails),d=function(e){function t(i,n){var r=e.call(this)||this;r.sizeInBytes=0,r.aiDataContract={level:s.FieldType.Required,method:s.FieldType.Required,assembly:s.FieldType.Default,fileName:s.FieldType.Default,line:s.FieldType.Default},r.level=n,r.method=\"<no_method>\",r.assembly=o.trim(i);var a=i.match(t.regex);return a&&a.length>=5&&(r.method=o.trim(a[2])||r.method,r.fileName=o.trim(a[4]),r.line=parseInt(a[5])||0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=t.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}return r(t,e),t.regex=/^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/,t.baseSize=58,t}(l.StackFrame)},function(e,t,i){\"use strict\";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t=e.call(this)||this}return r(t,e),t}(i(4).Domain);t.EventData=o},function(e,t,i){\"use strict\";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=i(0),s=i(1),a=i(2),c=function(e){function t(t,i,n){var r=e.call(this)||this;return r.aiDataContract={ver:s.FieldType.Required,name:s.FieldType.Required,properties:s.FieldType.Default,measurements:s.FieldType.Default},r.name=a.DataSanitizer.sanitizeString(t)||o.NotSpecified,r.properties=a.DataSanitizer.sanitizeProperties(i),r.measurements=a.DataSanitizer.sanitizeMeasurements(n),r}return r(t,e),t.envelopeType=\"Microsoft.ApplicationInsights.{0}.Event\",t.dataType=\"EventData\",t}(i(10).EventData);t.TelemetryEvent=c},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){this.applicationVersion=\"ai.application.ver\",this.applicationBuild=\"ai.application.build\",this.applicationTypeId=\"ai.application.typeId\",this.applicationId=\"ai.application.applicationId\",this.deviceId=\"ai.device.id\",this.deviceIp=\"ai.device.ip\",this.deviceLanguage=\"ai.device.language\",this.deviceLocale=\"ai.device.locale\",this.deviceModel=\"ai.device.model\",this.deviceNetwork=\"ai.device.network\",this.deviceNetworkName=\"ai.device.networkName\",this.deviceOEMName=\"ai.device.oemName\",this.deviceOS=\"ai.device.os\",this.deviceOSVersion=\"ai.device.osVersion\",this.deviceRoleInstance=\"ai.device.roleInstance\",this.deviceRoleName=\"ai.device.roleName\",this.deviceScreenResolution=\"ai.device.screenResolution\",this.deviceType=\"ai.device.type\",this.deviceMachineName=\"ai.device.machineName\",this.deviceVMName=\"ai.device.vmName\",this.locationIp=\"ai.location.ip\",this.operationId=\"ai.operation.id\",this.operationName=\"ai.operation.name\",this.operationParentId=\"ai.operation.parentId\",this.operationRootId=\"ai.operation.rootId\",this.operationSyntheticSource=\"ai.operation.syntheticSource\",this.operationIsSynthetic=\"ai.operation.isSynthetic\",this.operationCorrelationVector=\"ai.operation.correlationVector\",this.sessionId=\"ai.session.id\",this.sessionIsFirst=\"ai.session.isFirst\",this.sessionIsNew=\"ai.session.isNew\",this.userAccountAcquisitionDate=\"ai.user.accountAcquisitionDate\",this.userAccountId=\"ai.user.accountId\",this.userAgent=\"ai.user.userAgent\",this.userId=\"ai.user.id\",this.userStoreRegion=\"ai.user.storeRegion\",this.userAuthUserId=\"ai.user.authUserId\",this.userAnonymousUserAcquisitionDate=\"ai.user.anonUserAcquisitionDate\",this.userAuthenticatedUserAcquisitionDate=\"ai.user.authUserAcquisitionDate\",this.sampleRate=\"ai.sample.sampleRate\",this.cloudName=\"ai.cloud.name\",this.cloudRoleVer=\"ai.cloud.roleVer\",this.cloudEnvironment=\"ai.cloud.environment\",this.cloudLocation=\"ai.cloud.location\",this.cloudDeploymentUnit=\"ai.cloud.deploymentUnit\",this.serverDeviceOS=\"ai.serverDevice.os\",this.serverDeviceOSVer=\"ai.serverDevice.osVer\",this.internalSdkVersion=\"ai.internal.sdkVersion\",this.internalAgentVersion=\"ai.internal.agentVersion\",this.internalDataCollectorReceivedTime=\"ai.internal.dataCollectorReceivedTime\",this.internalProfileId=\"ai.internal.profileId\",this.internalProfileClassId=\"ai.internal.profileClassId\",this.internalAccountId=\"ai.internal.accountId\",this.internalApplicationName=\"ai.internal.applicationName\",this.internalInstrumentationKey=\"ai.internal.instrumentationKey\",this.internalTelemetryItemId=\"ai.internal.telemetryItemId\",this.internalApplicationType=\"ai.internal.applicationType\",this.internalRequestSource=\"ai.internal.requestSource\",this.internalFlowType=\"ai.internal.flowType\",this.internalIsAudit=\"ai.internal.isAudit\",this.internalTrackingSourceId=\"ai.internal.trackingSourceId\",this.internalTrackingType=\"ai.internal.trackingType\",this.internalIsDiagnosticExample=\"ai.internal.isDiagnosticExample\"}}();t.ContextTagKeys=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=function(){return function(){}}();t.Session=r;var o=function(){function e(t){t||(t={}),\"function\"!=typeof t.sessionExpirationMs&&(t.sessionExpirationMs=function(){return e.acquisitionSpan}),\"function\"!=typeof t.sessionRenewalMs&&(t.sessionRenewalMs=function(){return e.renewalSpan}),this.config=t,this.automaticSession=new r}return e.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=+new Date,i=t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),n=t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();i||n?(this.automaticSession.isFirst=void 0,this.renew()):(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>e.cookieUpdateInterval)&&(this.automaticSession.renewalDate=+new Date,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},e.prototype.initializeAutomaticSession=function(){var t=n.getCookie(e.storageName);if(t&&\"function\"==typeof t.split)this.initializeAutomaticSessionWithData(t);else{var i=n.getStorage(e.storageName);i&&this.initializeAutomaticSessionWithData(i)}this.automaticSession.id||(this.automaticSession.isFirst=!0,this.renew())},e.prototype.initializeAutomaticSessionWithData=function(e){var t=e.split(\"|\");t.length>0&&(this.automaticSession.id=t[0]);try{if(t.length>1){var i=+t[1];this.automaticSession.acquisitionDate=+new Date(i),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(t.length>2){var n=+t[2];this.automaticSession.renewalDate=+new Date(n),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(e){}},e.prototype.renew=function(){var e=+new Date;this.automaticSession.id=n.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},e.prototype.setCookie=function(t,i,r){var o=i+this.config.sessionExpirationMs(),s=r+this.config.sessionRenewalMs(),a=new Date,c=[t,i,r];o<s?a.setTime(o):a.setTime(s);var u=this.config.cookieDomain?this.config.cookieDomain():null;n.setCookie(e.storageName,c.join(\"|\")+\";expires=\"+a.toUTCString(),u),this.cookieUpdatedTimestamp=+new Date},e.storageName=\"tracker_ai_session\",e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}();t.SessionManager=o},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=function(){function e(t){var i=n.getCookie(e.userCookieName);if(i){var r=i.split(e.cookieSeparator);r.length>0&&(this.id=r[0])}if(this.config=t,!this.id){this.id=n.newId();var o=new Date,s=n.toISOStringForIE8(o);this.accountAcquisitionDate=s,o.setTime(o.getTime()+31536e6);var a=[this.id,s],c=this.config.cookieDomain?this.config.cookieDomain():void 0;n.setCookie(e.userCookieName,a.join(e.cookieSeparator)+\";expires=\"+o.toUTCString(),c),n.removeStorage(\"ai_session\")}var u=n.getCookie(e.authUserCookieName);if(u){var l=(u=decodeURI(u)).split(e.cookieSeparator);l[0]&&(this.authenticatedId=l[0]),l.length>1&&l[1]&&(this.accountId=l[1])}}return e.prototype.setAuthenticatedUserContext=function(t,i){if(!(!this.validateUserInput(t)||i&&!this.validateUserInput(i))){this.authenticatedId=t;var r=this.authenticatedId;i&&(this.accountId=i,r=[this.authenticatedId,this.accountId].join(e.cookieSeparator)),n.setCookie(e.authUserCookieName,encodeURI(r),this.config.cookieDomain())}},e.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,n.deleteCookie(e.authUserCookieName)},e.prototype.validateUserInput=function(e){return!(\"string\"!=typeof e||!e||e.match(/,|;|=| |\\|/))},e.cookieSeparator=\"|\",e.userCookieName=\"tracker_ai_user\",e.authUserCookieName=\"tracker_ai_authUser\",e}();t.User=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=function(){return function(){this.id=n.newId(),null!=self&&null!=self.location&&null!=self.location.pathname&&(this.name=self.location.pathname)}}();t.Operation=r},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){}}();t.AppInsightsLocation=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Version=\"1.0.3\";var n=function(){return function(){this.sdkVersion=\"javascript:\"+t.Version,this.agentVersion=\"Mindbox.1.0\"}}();t.Internal=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){this.id=\"browser\",this.type=\"Browser\"}}();t.Device=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){return function(){}}();t.Application=n},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=function(){function e(){this._buffer=[]}return e.prototype.enqueue=function(e){this._buffer.push(e)},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?\"[\"+e.join(\",\")+\"]\":null},e.prototype.markAsSent=function(e){this.clear()},e.prototype.clearSent=function(e){},e}();t.ArraySendBuffer=r;var o=function(){function e(){this._bufferFullMessageSent=!1;var t=this.getBuffer(e.BUFFER_KEY),i=this.getBuffer(e.SENT_BUFFER_KEY);this._buffer=t.concat(i),this._buffer.length>e.MAX_BUFFER_SIZE&&(this._buffer.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,[]),this.setBuffer(e.BUFFER_KEY,this._buffer)}return e.prototype.enqueue=function(t){this._buffer.length>=e.MAX_BUFFER_SIZE?this._bufferFullMessageSent||(this._bufferFullMessageSent=!0):(this._buffer.push(t),this.setBuffer(e.BUFFER_KEY,this._buffer))},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0,this.setBuffer(e.BUFFER_KEY,[]),this.setBuffer(e.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?\"[\"+e.join(\",\")+\"]\":null},e.prototype.markAsSent=function(t){var i=this.getBuffer(e.SENT_BUFFER_KEY);(i=i.concat(t)).length>e.MAX_BUFFER_SIZE&&(i.length=e.MAX_BUFFER_SIZE),this._buffer=this.removePayloadsFromBuffer(t,this._buffer),this.setBuffer(e.BUFFER_KEY,this._buffer),this.setBuffer(e.SENT_BUFFER_KEY,i)},e.prototype.clearSent=function(t){var i=this.getBuffer(e.SENT_BUFFER_KEY);i=this.removePayloadsFromBuffer(t,i),this.setBuffer(e.SENT_BUFFER_KEY,i)},e.prototype.removePayloadsFromBuffer=function(e,t){var i=[];for(var n in t){var r=!1;for(var o in e)if(e[o]===t[n]){r=!0;break}r||i.push(t[n])}return i},e.prototype.getBuffer=function(e){try{var t=n.getSessionStorage(e);if(t){var i=JSON.parse(t);if(i)return i}}catch(e){}return[]},e.prototype.setBuffer=function(e,t){try{var i=JSON.stringify(t);n.setSessionStorage(e,i)}catch(t){n.setSessionStorage(e,JSON.stringify([]))}},e.BUFFER_KEY=\"AI_buffer\",e.SENT_BUFFER_KEY=\"AI_sentBuffer\",e.MAX_BUFFER_SIZE=2e3,e}();t.SessionStorageSendBuffer=o},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=i(1),o=i(20),s=function(){function e(e){var t=this;if(this._XMLHttpRequestSupported=!1,this.isInServiceWorker=function(){return\"ServiceWorkerGlobalScope\"in self},this._xdrOnLoad=function(e,i){if(!e||e.responseText+\"\"!=\"200\"&&\"\"!==e.responseText){var n=t._parseResponse(e.responseText);n&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!t._config.isRetryDisabled()?t._onPartialSuccess(i,n):t._onError(i,e&&e.responseText||\"\")}else t._consecutiveErrors=0,t._onSuccess(i,0)},this._onPartialSuccess=function(e,i){for(var n=[],r=[],o=0,s=i.errors.reverse();o<s.length;o++){var a=s[o],c=e.splice(a.index,1)[0];t._isRetriable(a.statusCode)?r.push(c):n.push(c)}e.length>0&&t._onSuccess(e,i.itemsAccepted),n.length>0&&t._onError(n,[\"partial success\",i.itemsAccepted,\"of\",i.itemsReceived].join(\" \")),r.length>0&&t._resendPayload(r)},this._consecutiveErrors=0,this._retryAt=null,this._config=e,this._sender=null,this._buffer=n.canUseSessionStorage()&&this._config.enableSessionStorageBuffer()?new o.SessionStorageSendBuffer:new o.ArraySendBuffer,this.isInServiceWorker()&&\"fetch\"in self)this._sender=this._fetchSender;else if(\"undefined\"!=typeof XMLHttpRequest){\"withCredentials\"in new XMLHttpRequest?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):\"undefined\"!=typeof XDomainRequest&&(this._sender=this._xdrSender)}}return e.prototype.send=function(e){try{if(!e)return;if(!this._sender)return;var t=r.Serializer.serialize(e),i=this._buffer.getItems(),n=this._buffer.batchPayloads(i);n&&n.length+t.length>this._config.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(t),this.isInServiceWorker()?this.triggerSend():this._setupTimer()}catch(e){}},e.prototype._setupTimer=function(){var e=this;if(!this._timeoutHandle){var t=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,i=Math.max(this._config.maxBatchInterval(),t);this._timeoutHandle=setTimeout(function(){e.triggerSend()},i)}},e.prototype.triggerSend=function(e){var t=!0;\"boolean\"==typeof e&&(t=e);try{if(this._buffer.count()>0){var i=this._buffer.getItems();this._sender(i,t)}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(e){!n.getIEVersion()||n.getIEVersion()}},e.prototype._setRetryTime=function(){var e;if(this._consecutiveErrors<=1)e=10;else{var t=(Math.pow(2,this._consecutiveErrors)-1)/2,i=Math.floor(Math.random()*t*10)+1;e=Math.max(Math.min(i,3600),10)}var n=Date.now()+1e3*e;this._retryAt=n},e.prototype._parseResponse=function(e){try{var t=JSON.parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted==t.errors.length)return t}catch(e){}return null},e.prototype._isRetriable=function(e){return 408==e||429==e||500==e||503==e},e.prototype._resendPayload=function(e){if(e&&0!==e.length){this._buffer.clearSent(e),this._consecutiveErrors++;for(var t=0,i=e;t<i.length;t++){var n=i[t];this._buffer.enqueue(n)}this._setRetryTime(),this._setupTimer()}},e.prototype._xhrSender=function(t,i){var n=this,r=new XMLHttpRequest;r[e.DisabledPropertyName]=!0,r.open(\"POST\",this._config.endpointUrl(),i),r.setRequestHeader(\"Content-type\",\"application/json\"),r.onreadystatechange=function(){return n._xhrReadyStateChange(r,t,t.length)},r.onerror=function(e){return n._onError(t,r.responseText||r.response||\"\",e)};var o=this._buffer.batchPayloads(t);r.send(o),this._buffer.markAsSent(t)},e.prototype._fetchSender=function(e,t){var i=this,n=new Headers;n.append(\"Content-Type\",\"application/json\");var r={method:\"POST\",body:this._buffer.batchPayloads(e),headers:n},o=new Request(this._config.endpointUrl(),r);fetch(o).then(function(t){if(!t.ok)throw new Error(\"Request failed with <\"+t.status+\"> \"+t.statusText);i._consecutiveErrors=0,i._onSuccess(e,e.length),i._buffer.markAsSent(e)}).catch(function(t){i._onError(e,t.message)})},e.prototype._xdrSender=function(e,t){var i=this,n=new XDomainRequest;n.onload=function(){return i._xdrOnLoad(n,e)},n.onerror=function(t){return i._onError(e,n.responseText||\"\",t)};var r=window.location.protocol;if(0===this._config.endpointUrl().lastIndexOf(r,0)){var o=this._config.endpointUrl().replace(/^(https?:)/,\"\");n.open(\"POST\",o);var s=this._buffer.batchPayloads(e);n.send(s),this._buffer.markAsSent(e)}else this._buffer.clear()},e.prototype._xhrReadyStateChange=function(e,t,i){if(4===e.readyState)if((e.status<200||e.status>=300)&&0!==e.status)!this._config.isRetryDisabled()&&this._isRetriable(e.status)?this._resendPayload(t):this._onError(t,e.responseText||e.response||\"\");else if(206===e.status){var n=this._parseResponse(e.responseText||e.response);n&&!this._config.isRetryDisabled()?this._onPartialSuccess(t,n):this._onError(t,e.responseText||e.response||\"\")}else this._consecutiveErrors=0,this._onSuccess(t,i)},e.prototype._onError=function(e,t,i){this._buffer.clearSent(e)},e.prototype._onSuccess=function(e,t){this._buffer.clearSent(e)},e.DisabledPropertyName=\"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\",e}();t.Sender=s},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(21),r=i(19),o=i(18),s=i(17),a=i(16),c=i(15),u=i(14),l=i(13),p=i(12),f=function(){function e(e){this._config=e,this._sender=new n.Sender(e),\"undefined\"!=typeof window&&(this._sessionManager=new l.SessionManager(e),this.application=new r.Application,this.device=new o.Device,this.internal=new s.Internal,this.location=new a.AppInsightsLocation,this.user=new u.User(e),this.session=new l.Session),this.operation=new c.Operation}return e.prototype.track=function(e){return this.session&&\"string\"!=typeof this.session.id&&this._sessionManager.update(),this._track(e),e},e.prototype._track=function(e){this.session&&(\"string\"==typeof this.session.id?this._applySessionContext(e,this.session):this._applySessionContext(e,this._sessionManager.automaticSession)),this._applyApplicationContext(e,this.application),this._applyDeviceContext(e,this.device),this._applyInternalContext(e,this.internal),this._applyAppInsightsLocationContext(e,this.location),this._applyUserContext(e,this.user),this._applyOperationContext(e,this.operation),e.iKey=this._config.instrumentationKey();var t=this._config.instrumentationKey().replace(/-/g,\"\");return e.name=e.name.replace(\"{0}\",t),this._sender.send(e),e},e.prototype._applyApplicationContext=function(e,t){if(t){var i=new p.ContextTagKeys;\"string\"==typeof t.ver&&(e.tags[i.applicationVersion]=t.ver),\"string\"==typeof t.build&&(e.tags[i.applicationBuild]=t.build)}},e.prototype._applyDeviceContext=function(e,t){var i=new p.ContextTagKeys;t&&(\"string\"==typeof t.id&&(e.tags[i.deviceId]=t.id),\"string\"==typeof t.ip&&(e.tags[i.deviceIp]=t.ip),\"string\"==typeof t.language&&(e.tags[i.deviceLanguage]=t.language),\"string\"==typeof t.locale&&(e.tags[i.deviceLocale]=t.locale),\"string\"==typeof t.model&&(e.tags[i.deviceModel]=t.model),void 0!==t.network&&(e.tags[i.deviceNetwork]=t.network),\"string\"==typeof t.oemName&&(e.tags[i.deviceOEMName]=t.oemName),\"string\"==typeof t.os&&(e.tags[i.deviceOS]=t.os),\"string\"==typeof t.osversion&&(e.tags[i.deviceOSVersion]=t.osversion),\"string\"==typeof t.resolution&&(e.tags[i.deviceScreenResolution]=t.resolution),\"string\"==typeof t.type&&(e.tags[i.deviceType]=t.type))},e.prototype._applyInternalContext=function(e,t){if(t){var i=new p.ContextTagKeys;\"string\"==typeof t.agentVersion&&(e.tags[i.internalAgentVersion]=t.agentVersion),\"string\"==typeof t.sdkVersion&&(e.tags[i.internalSdkVersion]=t.sdkVersion)}},e.prototype._applyAppInsightsLocationContext=function(e,t){if(t){var i=new p.ContextTagKeys;\"string\"==typeof t.ip&&(e.tags[i.locationIp]=t.ip)}},e.prototype._applyOperationContext=function(e,t){if(t){var i=new p.ContextTagKeys;\"string\"==typeof t.id&&(e.tags[i.operationId]=t.id),\"string\"==typeof t.name&&(e.tags[i.operationName]=t.name),\"string\"==typeof t.parentId&&(e.tags[i.operationParentId]=t.parentId),\"string\"==typeof t.rootId&&(e.tags[i.operationRootId]=t.rootId),\"string\"==typeof t.syntheticSource&&(e.tags[i.operationSyntheticSource]=t.syntheticSource)}},e.prototype._applySessionContext=function(e,t){if(t){var i=new p.ContextTagKeys;\"string\"==typeof t.id&&(e.tags[i.sessionId]=t.id),void 0!==t.isFirst&&(e.tags[i.sessionIsFirst]=t.isFirst)}},e.prototype._applyUserContext=function(e,t){if(t){var i=new p.ContextTagKeys;\"string\"==typeof t.accountId&&(e.tags[i.userAccountId]=t.accountId),\"string\"==typeof t.agent&&(e.tags[i.userAgent]=t.agent),\"string\"==typeof t.id&&(e.tags[i.userId]=t.id),\"string\"==typeof t.authenticatedId&&(e.tags[i.userAuthUserId]=t.authenticatedId),\"string\"==typeof t.storeRegion&&(e.tags[i.userStoreRegion]=t.storeRegion)}},e}();t.TelemetryContext=f},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(0),r=i(22),o=i(11),s=i(9),a=i(3),c=i(5),u=function(){function e(t){var i=this;this.config=t||{};var n=e.defaultConfig;if(void 0!==n)for(var o in n)void 0===this.config[o]&&(this.config[o]=n[o]);var s={instrumentationKey:function(){return i.config.instrumentationKey},sessionRenewalMs:function(){return i.config.sessionRenewalMs},sessionExpirationMs:function(){return i.config.sessionExpirationMs},endpointUrl:function(){return i.config.endpointUrl},maxBatchSizeInBytes:function(){return i.config.maxBatchSizeInBytes},maxBatchInterval:function(){return i.config.maxBatchInterval},cookieDomain:function(){return i.config.cookieDomain},enableSessionStorageBuffer:function(){return i.config.enableSessionStorageBuffer},isRetryDisabled:function(){return i.config.isRetryDisabled}};this.context=new r.TelemetryContext(s),\"undefined\"!=typeof window&&window.addEventListener&&window.addEventListener(\"beforeunload\",function(){return i.flush()})}return e.prototype.trackEvent=function(e,t,i){try{var n=new o.TelemetryEvent(e,t,i),r=new c.Data(o.TelemetryEvent.dataType,n),u=new a.Envelope(r,s.TelemetryException.envelopeType);this.context.track(u)}catch(e){}},e.prototype.trackException=function(e,t,i,r){try{if(!n.isError(e))try{throw new Error(e)}catch(t){e=t}var o=new s.TelemetryException(e,t,i,r),u=new c.Data(s.TelemetryException.dataType,o),l=new a.Envelope(u,s.TelemetryException.envelopeType);this.context.track(l)}catch(e){}},e.prototype.flush=function(){try{this.context._sender.triggerSend()}catch(e){}},e.prototype.setAuthenticatedUserContext=function(e,t){try{this.context.user.setAuthenticatedUserContext(e,t)}catch(e){}},e.prototype.clearAuthenticatedUserContext=function(){try{this.context.user.clearAuthenticatedUserContext()}catch(e){}},e.prototype.SendCORSException=function(e){var t=s.TelemetryException.CreateSimpleException(\"Script error.\",\"Error\",\"unknown\",\"unknown\",\"The browser's same-origin policy prevents us from getting the details of this exception. The exception occurred in a script loaded from an origin different than the web page. For cross-domain error reporting you can use crossorigin attribute together with appropriate CORS HTTP headers. For more information please see http://www.w3.org/TR/cors/.\",0,null);t.properties=e;var i=new c.Data(s.TelemetryException.dataType,t),n=new a.Envelope(i,s.TelemetryException.envelopeType);this.context.track(n)},e.prototype._onerror=function(e,t,i,r,o){try{var s={url:t||document.URL};if(n.isCrossOriginError(e,t,i,r,o))this.SendCORSException(s);else{if(!n.isError(o)){var a=\"window.onerror@\"+s.url+\":\"+i+\":\"+(r||0);(o=new Error(e)).stack=a}this.trackException(o,null,s)}}catch(e){}},e}();t.AppInsights=u},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(23),r=i(0),o=function(){function e(t){t.queue=t.queue||[];var i=t.config||{};if(!i.instrumentationKey)throw new Error(\"Cannot load Application Insights SDK, no instrumentationKey was provided.\");i=e.getDefaultConfig(i),this.snippet=t,this.config=i}return e.prototype.loadAppInsights=function(){return new n.AppInsights(this.config)},e.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||\"https://dc.services.visualstudio.com/v2/track\",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:1e6,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableSessionStorageBuffer=void 0===e.enableSessionStorageBuffer||null===e.enableSessionStorageBuffer||r.stringToBoolOrDefault(e.enableSessionStorageBuffer),e.isRetryDisabled=void 0!==e.isRetryDisabled&&null!==e.isRetryDisabled&&r.stringToBoolOrDefault(e.isRetryDisabled),e},e}();t.getAppInsights=function(e){return new o({config:e}).loadAppInsights()}},function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=i(24);t.getAppInsights=n.getAppInsights}])});\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1pbmRib3gvYXBwbGljYXRpb25pbnNpZ2h0cy1qcy9kaXN0L2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtaW5kYm94L2FwcGxpY2F0aW9uaW5zaWdodHMtanMvZGlzdC9pbmRleC5qcz9hNzQ5Il0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHNbXCJhcHBsaWNhdGlvbmluc2lnaHRzLWpzXCJdPXQoKTplW1wiYXBwbGljYXRpb25pbnNpZ2h0cy1qc1wiXT10KCl9KHNlbGYsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9e307ZnVuY3Rpb24gaShuKXtpZih0W25dKXJldHVybiB0W25dLmV4cG9ydHM7dmFyIHI9dFtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbbl0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsaSksci5sPSEwLHIuZXhwb3J0c31yZXR1cm4gaS5tPWUsaS5jPXQsaS5kPWZ1bmN0aW9uKGUsdCxuKXtpLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6bn0pfSxpLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0saS50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1pKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoaS5yKG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgciBpbiBlKWkuZChuLHIsZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxyKSk7cmV0dXJuIG59LGkubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gaS5kKHQsXCJhXCIsdCksdH0saS5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxpLnA9XCJcIixpKGkucz0yNSl9KFtmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG47T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZnVuY3Rpb24oZSl7ZVtlLkxvY2FsU3RvcmFnZT0wXT1cIkxvY2FsU3RvcmFnZVwiLGVbZS5TZXNzaW9uU3RvcmFnZT0xXT1cIlNlc3Npb25TdG9yYWdlXCJ9KG58fChuPXt9KSk7dmFyIHI9dm9pZCAwO3QuTm90U3BlY2lmaWVkPVwibm90X3NwZWNpZmllZFwiO3ZhciBvPWZ1bmN0aW9uKCl7cmV0dXJuIHMobi5Mb2NhbFN0b3JhZ2UpfSxzPWZ1bmN0aW9uKGUpe3ZhciB0LGkscj1udWxsO3RyeXtpPW5ldyBEYXRlLChyPWU9PT1uLkxvY2FsU3RvcmFnZT93aW5kb3cubG9jYWxTdG9yYWdlOndpbmRvdy5zZXNzaW9uU3RvcmFnZSkuc2V0SXRlbShpLGkpLHQ9ci5nZXRJdGVtKGkpIT1pLHIucmVtb3ZlSXRlbShpKSx0JiYocj1udWxsKX1jYXRjaChlKXtyPW51bGx9cmV0dXJuIHJ9O3QuZ2V0U3RvcmFnZT1mdW5jdGlvbihlKXt2YXIgdD1vKCk7aWYobnVsbCE9PXQpdHJ5e3JldHVybiB0LmdldEl0ZW0oZSl9Y2F0Y2goZSl7fXJldHVybiBudWxsfSx0LnJlbW92ZVN0b3JhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9bygpO2lmKG51bGwhPT10KXRyeXtyZXR1cm4gdC5yZW1vdmVJdGVtKGUpLCEwfWNhdGNoKGUpe31yZXR1cm4hMX07dmFyIGE9ZnVuY3Rpb24oKXtyZXR1cm4gcyhuLlNlc3Npb25TdG9yYWdlKX07dC5jYW5Vc2VTZXNzaW9uU3RvcmFnZT1mdW5jdGlvbigpe3JldHVybiEhYSgpfSx0LmdldFNlc3Npb25TdG9yYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWEoKTtpZihudWxsIT09dCl0cnl7cmV0dXJuIHQuZ2V0SXRlbShlKX1jYXRjaChlKXt9cmV0dXJuIG51bGx9LHQuc2V0U2Vzc2lvblN0b3JhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgaT1hKCk7aWYobnVsbCE9PWkpdHJ5e3JldHVybiBpLnNldEl0ZW0oZSx0KSwhMH1jYXRjaChlKXt9cmV0dXJuITF9LHQuY2FuVXNlQ29va2llcz1mdW5jdGlvbigpe2lmKHZvaWQgMD09PXIpe3I9ITE7dHJ5e3I9dm9pZCAwIT09ZG9jdW1lbnQuY29va2llfWNhdGNoKGUpe319cmV0dXJuIHJ9LHQuc2V0Q29va2llPWZ1bmN0aW9uKGUsaSxuKXt2YXIgcj1cIlwiO24mJihyPVwiO2RvbWFpbj1cIituKSx0LmNhblVzZUNvb2tpZXMoKSYmKGRvY3VtZW50LmNvb2tpZT1lK1wiPVwiK2krcitcIjtwYXRoPS9cIil9LHQuc3RyaW5nVG9Cb29sT3JEZWZhdWx0PWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmXCJ0cnVlXCI9PT1lLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKX0sdC5nZXRDb29raWU9ZnVuY3Rpb24oZSl7aWYoIXQuY2FuVXNlQ29va2llcygpKXJldHVybiBudWxsO3ZhciBpPVwiXCI7aWYoZSYmZS5sZW5ndGgpZm9yKHZhciBuPWUrXCI9XCIscj1kb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpLG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIHM9cltvXTtpZigocz10LnRyaW0ocykpJiYwPT09cy5pbmRleE9mKG4pKXtpPXMuc3Vic3RyaW5nKG4ubGVuZ3RoLHJbb10ubGVuZ3RoKTticmVha319cmV0dXJuIGl9LHQuZGVsZXRlQ29va2llPWZ1bmN0aW9uKGUpe3QuY2FuVXNlQ29va2llcygpJiYoZG9jdW1lbnQuY29va2llPWUrXCI9O3BhdGg9LztleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDEgR01UO1wiKX0sdC50cmltPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlP2U6ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfSx0Lm5ld0lkPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVwiXCIsdD0xMDczNzQxODI0Kk1hdGgucmFuZG9tKCk7dD4wOyl7ZSs9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIuY2hhckF0KHQlNjQpLHQ9TWF0aC5mbG9vcih0LzY0KX1yZXR1cm4gZX0sdC5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0sdC5pc0Vycm9yPWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBFcnJvcl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKXx8ISFlLnN0YWNrfSx0LmlzRGF0ZT1mdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0sdC50b0lTT1N0cmluZ0ZvcklFOD1mdW5jdGlvbihlKXtpZighdC5pc0RhdGUoZSkpcmV0dXJuIG51bGw7aWYoRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpcmV0dXJuIGUudG9JU09TdHJpbmcoKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1TdHJpbmcoZSk7cmV0dXJuIDE9PT10Lmxlbmd0aCYmKHQ9XCIwXCIrdCksdH07cmV0dXJuIGUuZ2V0VVRDRnVsbFllYXIoKStcIi1cIitpKGUuZ2V0VVRDTW9udGgoKSsxKStcIi1cIitpKGUuZ2V0VVRDRGF0ZSgpKStcIlRcIitpKGUuZ2V0VVRDSG91cnMoKSkrXCI6XCIraShlLmdldFVUQ01pbnV0ZXMoKSkrXCI6XCIraShlLmdldFVUQ1NlY29uZHMoKSkrXCIuXCIrU3RyaW5nKChlLmdldFVUQ01pbGxpc2Vjb25kcygpLzFlMykudG9GaXhlZCgzKSkuc2xpY2UoMiw1KStcIlpcIn0sdC5nZXRJRVZlcnNpb249ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9bnVsbCk7dmFyIHQ9ZT9lLnRvTG93ZXJDYXNlKCk6bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO3JldHVybi0xIT10LmluZGV4T2YoXCJtc2llXCIpP3BhcnNlSW50KHQuc3BsaXQoXCJtc2llXCIpWzFdKTpudWxsfSx0Lm1zVG9UaW1lU3Bhbj1mdW5jdGlvbihlKXsoaXNOYU4oZSl8fGU8MCkmJihlPTApO3ZhciB0PVwiXCIrZSUxZTMsaT1cIlwiK01hdGguZmxvb3IoZS8xZTMpJTYwLG49XCJcIitNYXRoLmZsb29yKGUvNmU0KSU2MCxyPVwiXCIrTWF0aC5mbG9vcihlLzM2ZTUpJTI0O3JldHVybiB0PTE9PT10Lmxlbmd0aD9cIjAwXCIrdDoyPT09dC5sZW5ndGg/XCIwXCIrdDp0LGk9aS5sZW5ndGg8Mj9cIjBcIitpOmksbj1uLmxlbmd0aDwyP1wiMFwiK246biwocj1yLmxlbmd0aDwyP1wiMFwiK3I6cikrXCI6XCIrbitcIjpcIitpK1wiLlwiK3R9LHQuaXNDcm9zc09yaWdpbkVycm9yPWZ1bmN0aW9uKGUsdCxpLG4scil7cmV0dXJuKFwiU2NyaXB0IGVycm9yLlwiPT09ZXx8XCJTY3JpcHQgZXJyb3JcIj09PWUpJiZudWxsPT09cn19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbixyPWkoMCk7IWZ1bmN0aW9uKGUpe2VbZS5EZWZhdWx0PTBdPVwiRGVmYXVsdFwiLGVbZS5SZXF1aXJlZD0xXT1cIlJlcXVpcmVkXCIsZVtlLkFycmF5PTJdPVwiQXJyYXlcIixlW2UuSGlkZGVuPTRdPVwiSGlkZGVuXCJ9KG49dC5GaWVsZFR5cGV8fCh0LkZpZWxkVHlwZT17fSkpO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5zZXJpYWxpemU9ZnVuY3Rpb24odCl7dmFyIGk9ZS5fc2VyaWFsaXplT2JqZWN0KHQsXCJyb290XCIpO3JldHVybiBKU09OLnN0cmluZ2lmeShpKX0sZS5fc2VyaWFsaXplT2JqZWN0PWZ1bmN0aW9uKHQsaSl7dmFyIG89e307aWYoIXQpcmV0dXJuIG87aWYodC5fX2FpQ2lyY3VsYXJSZWZDaGVjaylyZXR1cm4gbztpZighdC5haURhdGFDb250cmFjdCl7aWYoXCJtZWFzdXJlbWVudHNcIj09PWkpbz1lLl9zZXJpYWxpemVTdHJpbmdNYXAodCxcIm51bWJlclwiLGkpO2Vsc2UgaWYoXCJwcm9wZXJ0aWVzXCI9PT1pKW89ZS5fc2VyaWFsaXplU3RyaW5nTWFwKHQsXCJzdHJpbmdcIixpKTtlbHNlIGlmKFwidGFnc1wiPT09aSlvPWUuX3NlcmlhbGl6ZVN0cmluZ01hcCh0LFwic3RyaW5nXCIsaSk7ZWxzZSBpZihyLmlzQXJyYXkodCkpbz1lLl9zZXJpYWxpemVBcnJheSh0LGkpO2Vsc2UgdHJ5e0pTT04uc3RyaW5naWZ5KHQpLG89dH1jYXRjaChlKXt9cmV0dXJuIG99Zm9yKHZhciBzIGluIHQuX19haUNpcmN1bGFyUmVmQ2hlY2s9ITAsdC5haURhdGFDb250cmFjdCl7dmFyIGEsYz10LmFpRGF0YUNvbnRyYWN0W3NdLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgYz9jKCkmbi5SZXF1aXJlZDpjJm4uUmVxdWlyZWQsbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBjP2MoKSZuLkhpZGRlbjpjJm4uSGlkZGVuLHA9YyZuLkFycmF5LGY9dm9pZCAwIT09dFtzXSxkPVwib2JqZWN0XCI9PXR5cGVvZiB0W3NdJiZudWxsIT09dFtzXTtpZighdXx8Znx8cClpZighbCl2b2lkIDAhPT0oYT1kP3A/ZS5fc2VyaWFsaXplQXJyYXkodFtzXSxzKTplLl9zZXJpYWxpemVPYmplY3QodFtzXSxzKTp0W3NdKSYmKG9bc109YSl9cmV0dXJuIGRlbGV0ZSB0Ll9fYWlDaXJjdWxhclJlZkNoZWNrLG99LGUuX3NlcmlhbGl6ZUFycmF5PWZ1bmN0aW9uKHQsaSl7dmFyIG49dm9pZCAwO2lmKHQmJnIuaXNBcnJheSh0KSl7bj1bXTtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIHM9dFtvXSxhPWUuX3NlcmlhbGl6ZU9iamVjdChzLGkrXCJbXCIrbytcIl1cIik7bi5wdXNoKGEpfX1yZXR1cm4gbn0sZS5fc2VyaWFsaXplU3RyaW5nTWFwPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbj12b2lkIDA7aWYoZSlmb3IodmFyIHIgaW4gbj17fSxlKXt2YXIgbz1lW3JdO2lmKFwic3RyaW5nXCI9PT10KXZvaWQgMD09PW8/bltyXT1cInVuZGVmaW5lZFwiOm51bGw9PT1vP25bcl09XCJudWxsXCI6by50b1N0cmluZz9uW3JdPW8udG9TdHJpbmcoKTpuW3JdPVwiaW52YWxpZCBmaWVsZDogdG9TdHJpbmcoKSBpcyBub3QgZGVmaW5lZC5cIjtlbHNlIGlmKFwibnVtYmVyXCI9PT10KWlmKHZvaWQgMD09PW8pbltyXT1cInVuZGVmaW5lZFwiO2Vsc2UgaWYobnVsbD09PW8pbltyXT1cIm51bGxcIjtlbHNle3ZhciBzPXBhcnNlRmxvYXQobyk7aXNOYU4ocyk/bltyXT1cIk5hTlwiOm5bcl09c31lbHNlIG5bcl09XCJpbnZhbGlkIGZpZWxkOiBcIitpK1wiIGlzIG9mIHVua25vd24gdHlwZS5cIn1yZXR1cm4gbn0sZX0oKTt0LlNlcmlhbGl6ZXI9b30sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWkoMCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuc2FuaXRpemVLZXlBbmRBZGRVbmlxdWVuZXNzPWZ1bmN0aW9uKHQsaSl7dmFyIG49dC5sZW5ndGgscj1lLnNhbml0aXplS2V5KHQpO2lmKHIubGVuZ3RoIT09bil7Zm9yKHZhciBvPTAscz1yO3ZvaWQgMCE9PWlbc107KW8rKyxzPXIuc3Vic3RyaW5nKDAsZS5NQVhfTkFNRV9MRU5HVEgtMykrZS5wYWROdW1iZXIobyk7cj1zfXJldHVybiByfSxlLnNhbml0aXplS2V5PWZ1bmN0aW9uKHQpe3JldHVybiB0JiYodD1uLnRyaW0odC50b1N0cmluZygpKSkubGVuZ3RoPmUuTUFYX05BTUVfTEVOR1RIJiYodD10LnN1YnN0cmluZygwLGUuTUFYX05BTUVfTEVOR1RIKSksdH0sZS5zYW5pdGl6ZVN0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmKHQ9bi50cmltKHQpKS50b1N0cmluZygpLmxlbmd0aD5lLk1BWF9TVFJJTkdfTEVOR1RIJiYodD10LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsZS5NQVhfU1RSSU5HX0xFTkdUSCkpLHR9LGUuc2FuaXRpemVNZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD5lLk1BWF9NRVNTQUdFX0xFTkdUSCYmKHQ9dC5zdWJzdHJpbmcoMCxlLk1BWF9NRVNTQUdFX0xFTkdUSCkpLHR9LGUuc2FuaXRpemVFeGNlcHRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubGVuZ3RoPmUuTUFYX0VYQ0VQVElPTl9MRU5HVEgmJih0PXQuc3Vic3RyaW5nKDAsZS5NQVhfRVhDRVBUSU9OX0xFTkdUSCkpLHR9LGUuc2FuaXRpemVQcm9wZXJ0aWVzPWZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBpPXt9O2Zvcih2YXIgbiBpbiB0KXt2YXIgcj1lLnNhbml0aXplU3RyaW5nKHRbbl0pO2lbbj1lLnNhbml0aXplS2V5QW5kQWRkVW5pcXVlbmVzcyhuLGkpXT1yfXQ9aX1yZXR1cm4gdH0sZS5zYW5pdGl6ZU1lYXN1cmVtZW50cz1mdW5jdGlvbih0KXtpZih0KXt2YXIgaT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpW249ZS5zYW5pdGl6ZUtleUFuZEFkZFVuaXF1ZW5lc3MobixpKV09cn10PWl9cmV0dXJuIHR9LGUucGFkTnVtYmVyPWZ1bmN0aW9uKGUpe3ZhciB0PVwiMDBcIitlO3JldHVybiB0LnN1YnN0cih0Lmxlbmd0aC0zKX0sZS5NQVhfTkFNRV9MRU5HVEg9MTUwLGUuTUFYX1NUUklOR19MRU5HVEg9MTAyNCxlLk1BWF9NRVNTQUdFX0xFTkdUSD0zMjc2OCxlLk1BWF9FWENFUFRJT05fTEVOR1RIPTMyNzY4LGV9KCk7dC5EYXRhU2FuaXRpemVyPXJ9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1pKDApLHI9aSgxKSxvPWkoMikscz1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319KCk7dC5CYXNlPXM7dmFyIGE9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzO3RoaXMudmVyPTEsdGhpcy5zYW1wbGVSYXRlPTEwMCx0aGlzLnRhZ3M9e30sdGhpcy5uYW1lPW8uRGF0YVNhbml0aXplci5zYW5pdGl6ZVN0cmluZyh0KXx8bi5Ob3RTcGVjaWZpZWQsdGhpcy5kYXRhPWUsdGhpcy50aW1lPW4udG9JU09TdHJpbmdGb3JJRTgobmV3IERhdGUpLHRoaXMuYWlEYXRhQ29udHJhY3Q9e3RpbWU6ci5GaWVsZFR5cGUuUmVxdWlyZWQsaUtleTpyLkZpZWxkVHlwZS5SZXF1aXJlZCxuYW1lOnIuRmllbGRUeXBlLlJlcXVpcmVkLHNhbXBsZVJhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gMTAwPT1pLnNhbXBsZVJhdGU/ci5GaWVsZFR5cGUuSGlkZGVuOnIuRmllbGRUeXBlLlJlcXVpcmVkfSx0YWdzOnIuRmllbGRUeXBlLlJlcXVpcmVkLGRhdGE6ci5GaWVsZFR5cGUuUmVxdWlyZWR9fX0oKTt0LkVudmVsb3BlPWF9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319KCk7dC5Eb21haW49bn0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO3ZhciBuLHI9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pfSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9bihlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KGkucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyBpKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWkoMSkscz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsaSl7dmFyIG49ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmFpRGF0YUNvbnRyYWN0PXtiYXNlVHlwZTpvLkZpZWxkVHlwZS5SZXF1aXJlZCxiYXNlRGF0YTpvLkZpZWxkVHlwZS5SZXF1aXJlZH0sbi5iYXNlVHlwZT10LG4uYmFzZURhdGE9aSxufXJldHVybiByKHQsZSksdH0oaSgzKS5CYXNlKTt0LkRhdGE9c30sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX0oKTt0LlN0YWNrRnJhbWU9bn0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5oYXNGdWxsU3RhY2s9ITAsdGhpcy5wYXJzZWRTdGFjaz1bXX19KCk7dC5FeGNlcHRpb25EZXRhaWxzPW59LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbixyPXRoaXMmJnRoaXMuX19leHRlbmRzfHwobj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4oZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihpLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgaSl9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LnZlcj0yLHQuZXhjZXB0aW9ucz1bXSx0LnByb3BlcnRpZXM9e30sdC5tZWFzdXJlbWVudHM9e30sdD1lLmNhbGwodGhpcyl8fHRoaXN9cmV0dXJuIHIodCxlKSx0fShpKDQpLkRvbWFpbik7dC5FeGNlcHRpb25EYXRhPW99LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbixyPXRoaXMmJnRoaXMuX19leHRlbmRzfHwobj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4oZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihpLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgaSl9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1pKDApLHM9aSgxKSxhPWkoMiksYz1pKDgpLHU9aSg3KSxsPWkoNikscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsaSxuLHIpe3ZhciBvPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5haURhdGFDb250cmFjdD17dmVyOnMuRmllbGRUeXBlLlJlcXVpcmVkLGhhbmRsZWRBdDpzLkZpZWxkVHlwZS5SZXF1aXJlZCxleGNlcHRpb25zOnMuRmllbGRUeXBlLlJlcXVpcmVkLHByb3BlcnRpZXM6cy5GaWVsZFR5cGUuRGVmYXVsdCxtZWFzdXJlbWVudHM6cy5GaWVsZFR5cGUuRGVmYXVsdH0sby5wcm9wZXJ0aWVzPWEuRGF0YVNhbml0aXplci5zYW5pdGl6ZVByb3BlcnRpZXMobiksby5tZWFzdXJlbWVudHM9YS5EYXRhU2FuaXRpemVyLnNhbml0aXplTWVhc3VyZW1lbnRzKHIpLG8uaGFuZGxlZEF0PWl8fFwidW5oYW5kbGVkXCIsby5leGNlcHRpb25zPVtuZXcgZih0KV0sb31yZXR1cm4gcih0LGUpLHQuQ3JlYXRlU2ltcGxlRXhjZXB0aW9uPWZ1bmN0aW9uKGUsdCxpLG4scixvLHMpe3JldHVybntoYW5kbGVkQXQ6c3x8XCJ1bmhhbmRsZWRcIixleGNlcHRpb25zOlt7aGFzRnVsbFN0YWNrOiEwLG1lc3NhZ2U6ZSxzdGFjazpyLHR5cGVOYW1lOnQscGFyc2VkU3RhY2s6W3tsZXZlbDowLGFzc2VtYmx5OmksZmlsZU5hbWU6bixsaW5lOm8sbWV0aG9kOlwidW5rbm93blwifV19XX19LHQuZW52ZWxvcGVUeXBlPVwiQXBwbGljYXRpb25JbnNpZ2h0cy57MH0uRXhjZXB0aW9uXCIsdC5kYXRhVHlwZT1cIkV4Y2VwdGlvbkRhdGFcIix0fShjLkV4Y2VwdGlvbkRhdGEpO3QuVGVsZW1ldHJ5RXhjZXB0aW9uPXA7dmFyIGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7aS5haURhdGFDb250cmFjdD17aWQ6cy5GaWVsZFR5cGUuRGVmYXVsdCxvdXRlcklkOnMuRmllbGRUeXBlLkRlZmF1bHQsdHlwZU5hbWU6cy5GaWVsZFR5cGUuUmVxdWlyZWQsbWVzc2FnZTpzLkZpZWxkVHlwZS5SZXF1aXJlZCxoYXNGdWxsU3RhY2s6cy5GaWVsZFR5cGUuRGVmYXVsdCxzdGFjazpzLkZpZWxkVHlwZS5EZWZhdWx0LHBhcnNlZFN0YWNrOnMuRmllbGRUeXBlLkFycmF5fSxpLnR5cGVOYW1lPWEuRGF0YVNhbml0aXplci5zYW5pdGl6ZVN0cmluZyh0Lm5hbWUpfHxvLk5vdFNwZWNpZmllZCxpLm1lc3NhZ2U9YS5EYXRhU2FuaXRpemVyLnNhbml0aXplTWVzc2FnZSh0Lm1lc3NhZ2UpfHxvLk5vdFNwZWNpZmllZDt2YXIgbj10LnN0YWNrO3JldHVybiBpLnBhcnNlZFN0YWNrPWkucGFyc2VTdGFjayhuKSxpLnN0YWNrPWEuRGF0YVNhbml0aXplci5zYW5pdGl6ZUV4Y2VwdGlvbihuKSxpLmhhc0Z1bGxTdGFjaz1vLmlzQXJyYXkoaS5wYXJzZWRTdGFjaykmJmkucGFyc2VkU3RhY2subGVuZ3RoPjAsaX1yZXR1cm4gcih0LGUpLHQucHJvdG90eXBlLnBhcnNlU3RhY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgaT1lLnNwbGl0KFwiXFxuXCIpO3Q9W107Zm9yKHZhciBuPTAscj0wLG89MDtvPD1pLmxlbmd0aDtvKyspe3ZhciBzPWlbb107aWYoZC5yZWdleC50ZXN0KHMpKXt2YXIgYT1uZXcgZChpW29dLG4rKyk7cis9YS5zaXplSW5CeXRlcyx0LnB1c2goYSl9fWlmKHI+MzI3NjgpZm9yKHZhciBjPTAsdT10Lmxlbmd0aC0xLGw9MCxwPWMsZj11O2M8dTspe2lmKChsKz10W2NdLnNpemVJbkJ5dGVzK3RbdV0uc2l6ZUluQnl0ZXMpPjMyNzY4KXt2YXIgaD1mLXArMTt0LnNwbGljZShwLGgpO2JyZWFrfXA9YyxmPXUsYysrLHUtLX19cmV0dXJuIHR9LHR9KHUuRXhjZXB0aW9uRGV0YWlscyksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGksbil7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3Iuc2l6ZUluQnl0ZXM9MCxyLmFpRGF0YUNvbnRyYWN0PXtsZXZlbDpzLkZpZWxkVHlwZS5SZXF1aXJlZCxtZXRob2Q6cy5GaWVsZFR5cGUuUmVxdWlyZWQsYXNzZW1ibHk6cy5GaWVsZFR5cGUuRGVmYXVsdCxmaWxlTmFtZTpzLkZpZWxkVHlwZS5EZWZhdWx0LGxpbmU6cy5GaWVsZFR5cGUuRGVmYXVsdH0sci5sZXZlbD1uLHIubWV0aG9kPVwiPG5vX21ldGhvZD5cIixyLmFzc2VtYmx5PW8udHJpbShpKTt2YXIgYT1pLm1hdGNoKHQucmVnZXgpO3JldHVybiBhJiZhLmxlbmd0aD49NSYmKHIubWV0aG9kPW8udHJpbShhWzJdKXx8ci5tZXRob2Qsci5maWxlTmFtZT1vLnRyaW0oYVs0XSksci5saW5lPXBhcnNlSW50KGFbNV0pfHwwKSxyLnNpemVJbkJ5dGVzKz1yLm1ldGhvZC5sZW5ndGgsci5zaXplSW5CeXRlcys9ci5maWxlTmFtZS5sZW5ndGgsci5zaXplSW5CeXRlcys9ci5hc3NlbWJseS5sZW5ndGgsci5zaXplSW5CeXRlcys9dC5iYXNlU2l6ZSxyLnNpemVJbkJ5dGVzKz1yLmxldmVsLnRvU3RyaW5nKCkubGVuZ3RoLHIuc2l6ZUluQnl0ZXMrPXIubGluZS50b1N0cmluZygpLmxlbmd0aCxyfXJldHVybiByKHQsZSksdC5yZWdleD0vXihbXFxzXSthdCk/KC4qPykoXFxAfFxcc1xcKHxcXHMpKFteXFwoXFxAXFxuXSspOihbMC05XSspOihbMC05XSspKFxcKT8pJC8sdC5iYXNlU2l6ZT01OCx0fShsLlN0YWNrRnJhbWUpfSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4scj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KG49T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX1uKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooaS5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IGkpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC52ZXI9Mix0LnByb3BlcnRpZXM9e30sdC5tZWFzdXJlbWVudHM9e30sdD1lLmNhbGwodGhpcyl8fHRoaXN9cmV0dXJuIHIodCxlKSx0fShpKDQpLkRvbWFpbik7dC5FdmVudERhdGE9b30sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO3ZhciBuLHI9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pfSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9bihlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KGkucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyBpKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWkoMCkscz1pKDEpLGE9aSgyKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxpLG4pe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5haURhdGFDb250cmFjdD17dmVyOnMuRmllbGRUeXBlLlJlcXVpcmVkLG5hbWU6cy5GaWVsZFR5cGUuUmVxdWlyZWQscHJvcGVydGllczpzLkZpZWxkVHlwZS5EZWZhdWx0LG1lYXN1cmVtZW50czpzLkZpZWxkVHlwZS5EZWZhdWx0fSxyLm5hbWU9YS5EYXRhU2FuaXRpemVyLnNhbml0aXplU3RyaW5nKHQpfHxvLk5vdFNwZWNpZmllZCxyLnByb3BlcnRpZXM9YS5EYXRhU2FuaXRpemVyLnNhbml0aXplUHJvcGVydGllcyhpKSxyLm1lYXN1cmVtZW50cz1hLkRhdGFTYW5pdGl6ZXIuc2FuaXRpemVNZWFzdXJlbWVudHMobikscn1yZXR1cm4gcih0LGUpLHQuZW52ZWxvcGVUeXBlPVwiTWljcm9zb2Z0LkFwcGxpY2F0aW9uSW5zaWdodHMuezB9LkV2ZW50XCIsdC5kYXRhVHlwZT1cIkV2ZW50RGF0YVwiLHR9KGkoMTApLkV2ZW50RGF0YSk7dC5UZWxlbWV0cnlFdmVudD1jfSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2F0aW9uVmVyc2lvbj1cImFpLmFwcGxpY2F0aW9uLnZlclwiLHRoaXMuYXBwbGljYXRpb25CdWlsZD1cImFpLmFwcGxpY2F0aW9uLmJ1aWxkXCIsdGhpcy5hcHBsaWNhdGlvblR5cGVJZD1cImFpLmFwcGxpY2F0aW9uLnR5cGVJZFwiLHRoaXMuYXBwbGljYXRpb25JZD1cImFpLmFwcGxpY2F0aW9uLmFwcGxpY2F0aW9uSWRcIix0aGlzLmRldmljZUlkPVwiYWkuZGV2aWNlLmlkXCIsdGhpcy5kZXZpY2VJcD1cImFpLmRldmljZS5pcFwiLHRoaXMuZGV2aWNlTGFuZ3VhZ2U9XCJhaS5kZXZpY2UubGFuZ3VhZ2VcIix0aGlzLmRldmljZUxvY2FsZT1cImFpLmRldmljZS5sb2NhbGVcIix0aGlzLmRldmljZU1vZGVsPVwiYWkuZGV2aWNlLm1vZGVsXCIsdGhpcy5kZXZpY2VOZXR3b3JrPVwiYWkuZGV2aWNlLm5ldHdvcmtcIix0aGlzLmRldmljZU5ldHdvcmtOYW1lPVwiYWkuZGV2aWNlLm5ldHdvcmtOYW1lXCIsdGhpcy5kZXZpY2VPRU1OYW1lPVwiYWkuZGV2aWNlLm9lbU5hbWVcIix0aGlzLmRldmljZU9TPVwiYWkuZGV2aWNlLm9zXCIsdGhpcy5kZXZpY2VPU1ZlcnNpb249XCJhaS5kZXZpY2Uub3NWZXJzaW9uXCIsdGhpcy5kZXZpY2VSb2xlSW5zdGFuY2U9XCJhaS5kZXZpY2Uucm9sZUluc3RhbmNlXCIsdGhpcy5kZXZpY2VSb2xlTmFtZT1cImFpLmRldmljZS5yb2xlTmFtZVwiLHRoaXMuZGV2aWNlU2NyZWVuUmVzb2x1dGlvbj1cImFpLmRldmljZS5zY3JlZW5SZXNvbHV0aW9uXCIsdGhpcy5kZXZpY2VUeXBlPVwiYWkuZGV2aWNlLnR5cGVcIix0aGlzLmRldmljZU1hY2hpbmVOYW1lPVwiYWkuZGV2aWNlLm1hY2hpbmVOYW1lXCIsdGhpcy5kZXZpY2VWTU5hbWU9XCJhaS5kZXZpY2Uudm1OYW1lXCIsdGhpcy5sb2NhdGlvbklwPVwiYWkubG9jYXRpb24uaXBcIix0aGlzLm9wZXJhdGlvbklkPVwiYWkub3BlcmF0aW9uLmlkXCIsdGhpcy5vcGVyYXRpb25OYW1lPVwiYWkub3BlcmF0aW9uLm5hbWVcIix0aGlzLm9wZXJhdGlvblBhcmVudElkPVwiYWkub3BlcmF0aW9uLnBhcmVudElkXCIsdGhpcy5vcGVyYXRpb25Sb290SWQ9XCJhaS5vcGVyYXRpb24ucm9vdElkXCIsdGhpcy5vcGVyYXRpb25TeW50aGV0aWNTb3VyY2U9XCJhaS5vcGVyYXRpb24uc3ludGhldGljU291cmNlXCIsdGhpcy5vcGVyYXRpb25Jc1N5bnRoZXRpYz1cImFpLm9wZXJhdGlvbi5pc1N5bnRoZXRpY1wiLHRoaXMub3BlcmF0aW9uQ29ycmVsYXRpb25WZWN0b3I9XCJhaS5vcGVyYXRpb24uY29ycmVsYXRpb25WZWN0b3JcIix0aGlzLnNlc3Npb25JZD1cImFpLnNlc3Npb24uaWRcIix0aGlzLnNlc3Npb25Jc0ZpcnN0PVwiYWkuc2Vzc2lvbi5pc0ZpcnN0XCIsdGhpcy5zZXNzaW9uSXNOZXc9XCJhaS5zZXNzaW9uLmlzTmV3XCIsdGhpcy51c2VyQWNjb3VudEFjcXVpc2l0aW9uRGF0ZT1cImFpLnVzZXIuYWNjb3VudEFjcXVpc2l0aW9uRGF0ZVwiLHRoaXMudXNlckFjY291bnRJZD1cImFpLnVzZXIuYWNjb3VudElkXCIsdGhpcy51c2VyQWdlbnQ9XCJhaS51c2VyLnVzZXJBZ2VudFwiLHRoaXMudXNlcklkPVwiYWkudXNlci5pZFwiLHRoaXMudXNlclN0b3JlUmVnaW9uPVwiYWkudXNlci5zdG9yZVJlZ2lvblwiLHRoaXMudXNlckF1dGhVc2VySWQ9XCJhaS51c2VyLmF1dGhVc2VySWRcIix0aGlzLnVzZXJBbm9ueW1vdXNVc2VyQWNxdWlzaXRpb25EYXRlPVwiYWkudXNlci5hbm9uVXNlckFjcXVpc2l0aW9uRGF0ZVwiLHRoaXMudXNlckF1dGhlbnRpY2F0ZWRVc2VyQWNxdWlzaXRpb25EYXRlPVwiYWkudXNlci5hdXRoVXNlckFjcXVpc2l0aW9uRGF0ZVwiLHRoaXMuc2FtcGxlUmF0ZT1cImFpLnNhbXBsZS5zYW1wbGVSYXRlXCIsdGhpcy5jbG91ZE5hbWU9XCJhaS5jbG91ZC5uYW1lXCIsdGhpcy5jbG91ZFJvbGVWZXI9XCJhaS5jbG91ZC5yb2xlVmVyXCIsdGhpcy5jbG91ZEVudmlyb25tZW50PVwiYWkuY2xvdWQuZW52aXJvbm1lbnRcIix0aGlzLmNsb3VkTG9jYXRpb249XCJhaS5jbG91ZC5sb2NhdGlvblwiLHRoaXMuY2xvdWREZXBsb3ltZW50VW5pdD1cImFpLmNsb3VkLmRlcGxveW1lbnRVbml0XCIsdGhpcy5zZXJ2ZXJEZXZpY2VPUz1cImFpLnNlcnZlckRldmljZS5vc1wiLHRoaXMuc2VydmVyRGV2aWNlT1NWZXI9XCJhaS5zZXJ2ZXJEZXZpY2Uub3NWZXJcIix0aGlzLmludGVybmFsU2RrVmVyc2lvbj1cImFpLmludGVybmFsLnNka1ZlcnNpb25cIix0aGlzLmludGVybmFsQWdlbnRWZXJzaW9uPVwiYWkuaW50ZXJuYWwuYWdlbnRWZXJzaW9uXCIsdGhpcy5pbnRlcm5hbERhdGFDb2xsZWN0b3JSZWNlaXZlZFRpbWU9XCJhaS5pbnRlcm5hbC5kYXRhQ29sbGVjdG9yUmVjZWl2ZWRUaW1lXCIsdGhpcy5pbnRlcm5hbFByb2ZpbGVJZD1cImFpLmludGVybmFsLnByb2ZpbGVJZFwiLHRoaXMuaW50ZXJuYWxQcm9maWxlQ2xhc3NJZD1cImFpLmludGVybmFsLnByb2ZpbGVDbGFzc0lkXCIsdGhpcy5pbnRlcm5hbEFjY291bnRJZD1cImFpLmludGVybmFsLmFjY291bnRJZFwiLHRoaXMuaW50ZXJuYWxBcHBsaWNhdGlvbk5hbWU9XCJhaS5pbnRlcm5hbC5hcHBsaWNhdGlvbk5hbWVcIix0aGlzLmludGVybmFsSW5zdHJ1bWVudGF0aW9uS2V5PVwiYWkuaW50ZXJuYWwuaW5zdHJ1bWVudGF0aW9uS2V5XCIsdGhpcy5pbnRlcm5hbFRlbGVtZXRyeUl0ZW1JZD1cImFpLmludGVybmFsLnRlbGVtZXRyeUl0ZW1JZFwiLHRoaXMuaW50ZXJuYWxBcHBsaWNhdGlvblR5cGU9XCJhaS5pbnRlcm5hbC5hcHBsaWNhdGlvblR5cGVcIix0aGlzLmludGVybmFsUmVxdWVzdFNvdXJjZT1cImFpLmludGVybmFsLnJlcXVlc3RTb3VyY2VcIix0aGlzLmludGVybmFsRmxvd1R5cGU9XCJhaS5pbnRlcm5hbC5mbG93VHlwZVwiLHRoaXMuaW50ZXJuYWxJc0F1ZGl0PVwiYWkuaW50ZXJuYWwuaXNBdWRpdFwiLHRoaXMuaW50ZXJuYWxUcmFja2luZ1NvdXJjZUlkPVwiYWkuaW50ZXJuYWwudHJhY2tpbmdTb3VyY2VJZFwiLHRoaXMuaW50ZXJuYWxUcmFja2luZ1R5cGU9XCJhaS5pbnRlcm5hbC50cmFja2luZ1R5cGVcIix0aGlzLmludGVybmFsSXNEaWFnbm9zdGljRXhhbXBsZT1cImFpLmludGVybmFsLmlzRGlhZ25vc3RpY0V4YW1wbGVcIn19KCk7dC5Db250ZXh0VGFnS2V5cz1ufSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49aSgwKSxyPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX0oKTt0LlNlc3Npb249cjt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dHx8KHQ9e30pLFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuc2Vzc2lvbkV4cGlyYXRpb25NcyYmKHQuc2Vzc2lvbkV4cGlyYXRpb25Ncz1mdW5jdGlvbigpe3JldHVybiBlLmFjcXVpc2l0aW9uU3Bhbn0pLFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuc2Vzc2lvblJlbmV3YWxNcyYmKHQuc2Vzc2lvblJlbmV3YWxNcz1mdW5jdGlvbigpe3JldHVybiBlLnJlbmV3YWxTcGFufSksdGhpcy5jb25maWc9dCx0aGlzLmF1dG9tYXRpY1Nlc3Npb249bmV3IHJ9cmV0dXJuIGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuYXV0b21hdGljU2Vzc2lvbi5pZHx8dGhpcy5pbml0aWFsaXplQXV0b21hdGljU2Vzc2lvbigpO3ZhciB0PStuZXcgRGF0ZSxpPXQtdGhpcy5hdXRvbWF0aWNTZXNzaW9uLmFjcXVpc2l0aW9uRGF0ZT50aGlzLmNvbmZpZy5zZXNzaW9uRXhwaXJhdGlvbk1zKCksbj10LXRoaXMuYXV0b21hdGljU2Vzc2lvbi5yZW5ld2FsRGF0ZT50aGlzLmNvbmZpZy5zZXNzaW9uUmVuZXdhbE1zKCk7aXx8bj8odGhpcy5hdXRvbWF0aWNTZXNzaW9uLmlzRmlyc3Q9dm9pZCAwLHRoaXMucmVuZXcoKSk6KCF0aGlzLmNvb2tpZVVwZGF0ZWRUaW1lc3RhbXB8fHQtdGhpcy5jb29raWVVcGRhdGVkVGltZXN0YW1wPmUuY29va2llVXBkYXRlSW50ZXJ2YWwpJiYodGhpcy5hdXRvbWF0aWNTZXNzaW9uLnJlbmV3YWxEYXRlPStuZXcgRGF0ZSx0aGlzLnNldENvb2tpZSh0aGlzLmF1dG9tYXRpY1Nlc3Npb24uaWQsdGhpcy5hdXRvbWF0aWNTZXNzaW9uLmFjcXVpc2l0aW9uRGF0ZSx0aGlzLmF1dG9tYXRpY1Nlc3Npb24ucmVuZXdhbERhdGUpKX0sZS5wcm90b3R5cGUuaW5pdGlhbGl6ZUF1dG9tYXRpY1Nlc3Npb249ZnVuY3Rpb24oKXt2YXIgdD1uLmdldENvb2tpZShlLnN0b3JhZ2VOYW1lKTtpZih0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnNwbGl0KXRoaXMuaW5pdGlhbGl6ZUF1dG9tYXRpY1Nlc3Npb25XaXRoRGF0YSh0KTtlbHNle3ZhciBpPW4uZ2V0U3RvcmFnZShlLnN0b3JhZ2VOYW1lKTtpJiZ0aGlzLmluaXRpYWxpemVBdXRvbWF0aWNTZXNzaW9uV2l0aERhdGEoaSl9dGhpcy5hdXRvbWF0aWNTZXNzaW9uLmlkfHwodGhpcy5hdXRvbWF0aWNTZXNzaW9uLmlzRmlyc3Q9ITAsdGhpcy5yZW5ldygpKX0sZS5wcm90b3R5cGUuaW5pdGlhbGl6ZUF1dG9tYXRpY1Nlc3Npb25XaXRoRGF0YT1mdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KFwifFwiKTt0Lmxlbmd0aD4wJiYodGhpcy5hdXRvbWF0aWNTZXNzaW9uLmlkPXRbMF0pO3RyeXtpZih0Lmxlbmd0aD4xKXt2YXIgaT0rdFsxXTt0aGlzLmF1dG9tYXRpY1Nlc3Npb24uYWNxdWlzaXRpb25EYXRlPStuZXcgRGF0ZShpKSx0aGlzLmF1dG9tYXRpY1Nlc3Npb24uYWNxdWlzaXRpb25EYXRlPXRoaXMuYXV0b21hdGljU2Vzc2lvbi5hY3F1aXNpdGlvbkRhdGU+MD90aGlzLmF1dG9tYXRpY1Nlc3Npb24uYWNxdWlzaXRpb25EYXRlOjB9aWYodC5sZW5ndGg+Mil7dmFyIG49K3RbMl07dGhpcy5hdXRvbWF0aWNTZXNzaW9uLnJlbmV3YWxEYXRlPStuZXcgRGF0ZShuKSx0aGlzLmF1dG9tYXRpY1Nlc3Npb24ucmVuZXdhbERhdGU9dGhpcy5hdXRvbWF0aWNTZXNzaW9uLnJlbmV3YWxEYXRlPjA/dGhpcy5hdXRvbWF0aWNTZXNzaW9uLnJlbmV3YWxEYXRlOjB9fWNhdGNoKGUpe319LGUucHJvdG90eXBlLnJlbmV3PWZ1bmN0aW9uKCl7dmFyIGU9K25ldyBEYXRlO3RoaXMuYXV0b21hdGljU2Vzc2lvbi5pZD1uLm5ld0lkKCksdGhpcy5hdXRvbWF0aWNTZXNzaW9uLmFjcXVpc2l0aW9uRGF0ZT1lLHRoaXMuYXV0b21hdGljU2Vzc2lvbi5yZW5ld2FsRGF0ZT1lLHRoaXMuc2V0Q29va2llKHRoaXMuYXV0b21hdGljU2Vzc2lvbi5pZCx0aGlzLmF1dG9tYXRpY1Nlc3Npb24uYWNxdWlzaXRpb25EYXRlLHRoaXMuYXV0b21hdGljU2Vzc2lvbi5yZW5ld2FsRGF0ZSl9LGUucHJvdG90eXBlLnNldENvb2tpZT1mdW5jdGlvbih0LGkscil7dmFyIG89aSt0aGlzLmNvbmZpZy5zZXNzaW9uRXhwaXJhdGlvbk1zKCkscz1yK3RoaXMuY29uZmlnLnNlc3Npb25SZW5ld2FsTXMoKSxhPW5ldyBEYXRlLGM9W3QsaSxyXTtvPHM/YS5zZXRUaW1lKG8pOmEuc2V0VGltZShzKTt2YXIgdT10aGlzLmNvbmZpZy5jb29raWVEb21haW4/dGhpcy5jb25maWcuY29va2llRG9tYWluKCk6bnVsbDtuLnNldENvb2tpZShlLnN0b3JhZ2VOYW1lLGMuam9pbihcInxcIikrXCI7ZXhwaXJlcz1cIithLnRvVVRDU3RyaW5nKCksdSksdGhpcy5jb29raWVVcGRhdGVkVGltZXN0YW1wPStuZXcgRGF0ZX0sZS5zdG9yYWdlTmFtZT1cInRyYWNrZXJfYWlfc2Vzc2lvblwiLGUuYWNxdWlzaXRpb25TcGFuPTg2NGU1LGUucmVuZXdhbFNwYW49MThlNSxlLmNvb2tpZVVwZGF0ZUludGVydmFsPTZlNCxlfSgpO3QuU2Vzc2lvbk1hbmFnZXI9b30sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWkoMCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dmFyIGk9bi5nZXRDb29raWUoZS51c2VyQ29va2llTmFtZSk7aWYoaSl7dmFyIHI9aS5zcGxpdChlLmNvb2tpZVNlcGFyYXRvcik7ci5sZW5ndGg+MCYmKHRoaXMuaWQ9clswXSl9aWYodGhpcy5jb25maWc9dCwhdGhpcy5pZCl7dGhpcy5pZD1uLm5ld0lkKCk7dmFyIG89bmV3IERhdGUscz1uLnRvSVNPU3RyaW5nRm9ySUU4KG8pO3RoaXMuYWNjb3VudEFjcXVpc2l0aW9uRGF0ZT1zLG8uc2V0VGltZShvLmdldFRpbWUoKSszMTUzNmU2KTt2YXIgYT1bdGhpcy5pZCxzXSxjPXRoaXMuY29uZmlnLmNvb2tpZURvbWFpbj90aGlzLmNvbmZpZy5jb29raWVEb21haW4oKTp2b2lkIDA7bi5zZXRDb29raWUoZS51c2VyQ29va2llTmFtZSxhLmpvaW4oZS5jb29raWVTZXBhcmF0b3IpK1wiO2V4cGlyZXM9XCIrby50b1VUQ1N0cmluZygpLGMpLG4ucmVtb3ZlU3RvcmFnZShcImFpX3Nlc3Npb25cIil9dmFyIHU9bi5nZXRDb29raWUoZS5hdXRoVXNlckNvb2tpZU5hbWUpO2lmKHUpe3ZhciBsPSh1PWRlY29kZVVSSSh1KSkuc3BsaXQoZS5jb29raWVTZXBhcmF0b3IpO2xbMF0mJih0aGlzLmF1dGhlbnRpY2F0ZWRJZD1sWzBdKSxsLmxlbmd0aD4xJiZsWzFdJiYodGhpcy5hY2NvdW50SWQ9bFsxXSl9fXJldHVybiBlLnByb3RvdHlwZS5zZXRBdXRoZW50aWNhdGVkVXNlckNvbnRleHQ9ZnVuY3Rpb24odCxpKXtpZighKCF0aGlzLnZhbGlkYXRlVXNlcklucHV0KHQpfHxpJiYhdGhpcy52YWxpZGF0ZVVzZXJJbnB1dChpKSkpe3RoaXMuYXV0aGVudGljYXRlZElkPXQ7dmFyIHI9dGhpcy5hdXRoZW50aWNhdGVkSWQ7aSYmKHRoaXMuYWNjb3VudElkPWkscj1bdGhpcy5hdXRoZW50aWNhdGVkSWQsdGhpcy5hY2NvdW50SWRdLmpvaW4oZS5jb29raWVTZXBhcmF0b3IpKSxuLnNldENvb2tpZShlLmF1dGhVc2VyQ29va2llTmFtZSxlbmNvZGVVUkkociksdGhpcy5jb25maWcuY29va2llRG9tYWluKCkpfX0sZS5wcm90b3R5cGUuY2xlYXJBdXRoZW50aWNhdGVkVXNlckNvbnRleHQ9ZnVuY3Rpb24oKXt0aGlzLmF1dGhlbnRpY2F0ZWRJZD1udWxsLHRoaXMuYWNjb3VudElkPW51bGwsbi5kZWxldGVDb29raWUoZS5hdXRoVXNlckNvb2tpZU5hbWUpfSxlLnByb3RvdHlwZS52YWxpZGF0ZVVzZXJJbnB1dD1mdW5jdGlvbihlKXtyZXR1cm4hKFwic3RyaW5nXCIhPXR5cGVvZiBlfHwhZXx8ZS5tYXRjaCgvLHw7fD18IHxcXHwvKSl9LGUuY29va2llU2VwYXJhdG9yPVwifFwiLGUudXNlckNvb2tpZU5hbWU9XCJ0cmFja2VyX2FpX3VzZXJcIixlLmF1dGhVc2VyQ29va2llTmFtZT1cInRyYWNrZXJfYWlfYXV0aFVzZXJcIixlfSgpO3QuVXNlcj1yfSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49aSgwKSxyPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5pZD1uLm5ld0lkKCksbnVsbCE9c2VsZiYmbnVsbCE9c2VsZi5sb2NhdGlvbiYmbnVsbCE9c2VsZi5sb2NhdGlvbi5wYXRobmFtZSYmKHRoaXMubmFtZT1zZWxmLmxvY2F0aW9uLnBhdGhuYW1lKX19KCk7dC5PcGVyYXRpb249cn0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX0oKTt0LkFwcEluc2lnaHRzTG9jYXRpb249bn0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVmVyc2lvbj1cIjEuMC4zXCI7dmFyIG49ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLnNka1ZlcnNpb249XCJqYXZhc2NyaXB0OlwiK3QuVmVyc2lvbix0aGlzLmFnZW50VmVyc2lvbj1cIk1pbmRib3guMS4wXCJ9fSgpO3QuSW50ZXJuYWw9bn0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5pZD1cImJyb3dzZXJcIix0aGlzLnR5cGU9XCJCcm93c2VyXCJ9fSgpO3QuRGV2aWNlPW59LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319KCk7dC5BcHBsaWNhdGlvbj1ufSxmdW5jdGlvbihlLHQsaSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49aSgwKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2J1ZmZlcj1bXX1yZXR1cm4gZS5wcm90b3R5cGUuZW5xdWV1ZT1mdW5jdGlvbihlKXt0aGlzLl9idWZmZXIucHVzaChlKX0sZS5wcm90b3R5cGUuY291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxlbmd0aH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9idWZmZXIubGVuZ3RoPTB9LGUucHJvdG90eXBlLmdldEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5zbGljZSgwKX0sZS5wcm90b3R5cGUuYmF0Y2hQYXlsb2Fkcz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5sZW5ndGg+MD9cIltcIitlLmpvaW4oXCIsXCIpK1wiXVwiOm51bGx9LGUucHJvdG90eXBlLm1hcmtBc1NlbnQ9ZnVuY3Rpb24oZSl7dGhpcy5jbGVhcigpfSxlLnByb3RvdHlwZS5jbGVhclNlbnQ9ZnVuY3Rpb24oZSl7fSxlfSgpO3QuQXJyYXlTZW5kQnVmZmVyPXI7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fYnVmZmVyRnVsbE1lc3NhZ2VTZW50PSExO3ZhciB0PXRoaXMuZ2V0QnVmZmVyKGUuQlVGRkVSX0tFWSksaT10aGlzLmdldEJ1ZmZlcihlLlNFTlRfQlVGRkVSX0tFWSk7dGhpcy5fYnVmZmVyPXQuY29uY2F0KGkpLHRoaXMuX2J1ZmZlci5sZW5ndGg+ZS5NQVhfQlVGRkVSX1NJWkUmJih0aGlzLl9idWZmZXIubGVuZ3RoPWUuTUFYX0JVRkZFUl9TSVpFKSx0aGlzLnNldEJ1ZmZlcihlLlNFTlRfQlVGRkVSX0tFWSxbXSksdGhpcy5zZXRCdWZmZXIoZS5CVUZGRVJfS0VZLHRoaXMuX2J1ZmZlcil9cmV0dXJuIGUucHJvdG90eXBlLmVucXVldWU9ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLmxlbmd0aD49ZS5NQVhfQlVGRkVSX1NJWkU/dGhpcy5fYnVmZmVyRnVsbE1lc3NhZ2VTZW50fHwodGhpcy5fYnVmZmVyRnVsbE1lc3NhZ2VTZW50PSEwKToodGhpcy5fYnVmZmVyLnB1c2godCksdGhpcy5zZXRCdWZmZXIoZS5CVUZGRVJfS0VZLHRoaXMuX2J1ZmZlcikpfSxlLnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIubGVuZ3RofSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2J1ZmZlci5sZW5ndGg9MCx0aGlzLnNldEJ1ZmZlcihlLkJVRkZFUl9LRVksW10pLHRoaXMuc2V0QnVmZmVyKGUuU0VOVF9CVUZGRVJfS0VZLFtdKSx0aGlzLl9idWZmZXJGdWxsTWVzc2FnZVNlbnQ9ITF9LGUucHJvdG90eXBlLmdldEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5zbGljZSgwKX0sZS5wcm90b3R5cGUuYmF0Y2hQYXlsb2Fkcz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5sZW5ndGg+MD9cIltcIitlLmpvaW4oXCIsXCIpK1wiXVwiOm51bGx9LGUucHJvdG90eXBlLm1hcmtBc1NlbnQ9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRCdWZmZXIoZS5TRU5UX0JVRkZFUl9LRVkpOyhpPWkuY29uY2F0KHQpKS5sZW5ndGg+ZS5NQVhfQlVGRkVSX1NJWkUmJihpLmxlbmd0aD1lLk1BWF9CVUZGRVJfU0laRSksdGhpcy5fYnVmZmVyPXRoaXMucmVtb3ZlUGF5bG9hZHNGcm9tQnVmZmVyKHQsdGhpcy5fYnVmZmVyKSx0aGlzLnNldEJ1ZmZlcihlLkJVRkZFUl9LRVksdGhpcy5fYnVmZmVyKSx0aGlzLnNldEJ1ZmZlcihlLlNFTlRfQlVGRkVSX0tFWSxpKX0sZS5wcm90b3R5cGUuY2xlYXJTZW50PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0QnVmZmVyKGUuU0VOVF9CVUZGRVJfS0VZKTtpPXRoaXMucmVtb3ZlUGF5bG9hZHNGcm9tQnVmZmVyKHQsaSksdGhpcy5zZXRCdWZmZXIoZS5TRU5UX0JVRkZFUl9LRVksaSl9LGUucHJvdG90eXBlLnJlbW92ZVBheWxvYWRzRnJvbUJ1ZmZlcj1mdW5jdGlvbihlLHQpe3ZhciBpPVtdO2Zvcih2YXIgbiBpbiB0KXt2YXIgcj0hMTtmb3IodmFyIG8gaW4gZSlpZihlW29dPT09dFtuXSl7cj0hMDticmVha31yfHxpLnB1c2godFtuXSl9cmV0dXJuIGl9LGUucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9bi5nZXRTZXNzaW9uU3RvcmFnZShlKTtpZih0KXt2YXIgaT1KU09OLnBhcnNlKHQpO2lmKGkpcmV0dXJuIGl9fWNhdGNoKGUpe31yZXR1cm5bXX0sZS5wcm90b3R5cGUuc2V0QnVmZmVyPWZ1bmN0aW9uKGUsdCl7dHJ5e3ZhciBpPUpTT04uc3RyaW5naWZ5KHQpO24uc2V0U2Vzc2lvblN0b3JhZ2UoZSxpKX1jYXRjaCh0KXtuLnNldFNlc3Npb25TdG9yYWdlKGUsSlNPTi5zdHJpbmdpZnkoW10pKX19LGUuQlVGRkVSX0tFWT1cIkFJX2J1ZmZlclwiLGUuU0VOVF9CVUZGRVJfS0VZPVwiQUlfc2VudEJ1ZmZlclwiLGUuTUFYX0JVRkZFUl9TSVpFPTJlMyxlfSgpO3QuU2Vzc2lvblN0b3JhZ2VTZW5kQnVmZmVyPW99LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1pKDApLHI9aSgxKSxvPWkoMjApLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5fWE1MSHR0cFJlcXVlc3RTdXBwb3J0ZWQ9ITEsdGhpcy5pc0luU2VydmljZVdvcmtlcj1mdW5jdGlvbigpe3JldHVyblwiU2VydmljZVdvcmtlckdsb2JhbFNjb3BlXCJpbiBzZWxmfSx0aGlzLl94ZHJPbkxvYWQ9ZnVuY3Rpb24oZSxpKXtpZighZXx8ZS5yZXNwb25zZVRleHQrXCJcIiE9XCIyMDBcIiYmXCJcIiE9PWUucmVzcG9uc2VUZXh0KXt2YXIgbj10Ll9wYXJzZVJlc3BvbnNlKGUucmVzcG9uc2VUZXh0KTtuJiZuLml0ZW1zUmVjZWl2ZWQmJm4uaXRlbXNSZWNlaXZlZD5uLml0ZW1zQWNjZXB0ZWQmJiF0Ll9jb25maWcuaXNSZXRyeURpc2FibGVkKCk/dC5fb25QYXJ0aWFsU3VjY2VzcyhpLG4pOnQuX29uRXJyb3IoaSxlJiZlLnJlc3BvbnNlVGV4dHx8XCJcIil9ZWxzZSB0Ll9jb25zZWN1dGl2ZUVycm9ycz0wLHQuX29uU3VjY2VzcyhpLDApfSx0aGlzLl9vblBhcnRpYWxTdWNjZXNzPWZ1bmN0aW9uKGUsaSl7Zm9yKHZhciBuPVtdLHI9W10sbz0wLHM9aS5lcnJvcnMucmV2ZXJzZSgpO288cy5sZW5ndGg7bysrKXt2YXIgYT1zW29dLGM9ZS5zcGxpY2UoYS5pbmRleCwxKVswXTt0Ll9pc1JldHJpYWJsZShhLnN0YXR1c0NvZGUpP3IucHVzaChjKTpuLnB1c2goYyl9ZS5sZW5ndGg+MCYmdC5fb25TdWNjZXNzKGUsaS5pdGVtc0FjY2VwdGVkKSxuLmxlbmd0aD4wJiZ0Ll9vbkVycm9yKG4sW1wicGFydGlhbCBzdWNjZXNzXCIsaS5pdGVtc0FjY2VwdGVkLFwib2ZcIixpLml0ZW1zUmVjZWl2ZWRdLmpvaW4oXCIgXCIpKSxyLmxlbmd0aD4wJiZ0Ll9yZXNlbmRQYXlsb2FkKHIpfSx0aGlzLl9jb25zZWN1dGl2ZUVycm9ycz0wLHRoaXMuX3JldHJ5QXQ9bnVsbCx0aGlzLl9jb25maWc9ZSx0aGlzLl9zZW5kZXI9bnVsbCx0aGlzLl9idWZmZXI9bi5jYW5Vc2VTZXNzaW9uU3RvcmFnZSgpJiZ0aGlzLl9jb25maWcuZW5hYmxlU2Vzc2lvblN0b3JhZ2VCdWZmZXIoKT9uZXcgby5TZXNzaW9uU3RvcmFnZVNlbmRCdWZmZXI6bmV3IG8uQXJyYXlTZW5kQnVmZmVyLHRoaXMuaXNJblNlcnZpY2VXb3JrZXIoKSYmXCJmZXRjaFwiaW4gc2VsZil0aGlzLl9zZW5kZXI9dGhpcy5fZmV0Y2hTZW5kZXI7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3Qpe1wid2l0aENyZWRlbnRpYWxzXCJpbiBuZXcgWE1MSHR0cFJlcXVlc3Q/KHRoaXMuX3NlbmRlcj10aGlzLl94aHJTZW5kZXIsdGhpcy5fWE1MSHR0cFJlcXVlc3RTdXBwb3J0ZWQ9ITApOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBYRG9tYWluUmVxdWVzdCYmKHRoaXMuX3NlbmRlcj10aGlzLl94ZHJTZW5kZXIpfX1yZXR1cm4gZS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXt0cnl7aWYoIWUpcmV0dXJuO2lmKCF0aGlzLl9zZW5kZXIpcmV0dXJuO3ZhciB0PXIuU2VyaWFsaXplci5zZXJpYWxpemUoZSksaT10aGlzLl9idWZmZXIuZ2V0SXRlbXMoKSxuPXRoaXMuX2J1ZmZlci5iYXRjaFBheWxvYWRzKGkpO24mJm4ubGVuZ3RoK3QubGVuZ3RoPnRoaXMuX2NvbmZpZy5tYXhCYXRjaFNpemVJbkJ5dGVzKCkmJnRoaXMudHJpZ2dlclNlbmQoKSx0aGlzLl9idWZmZXIuZW5xdWV1ZSh0KSx0aGlzLmlzSW5TZXJ2aWNlV29ya2VyKCk/dGhpcy50cmlnZ2VyU2VuZCgpOnRoaXMuX3NldHVwVGltZXIoKX1jYXRjaChlKXt9fSxlLnByb3RvdHlwZS5fc2V0dXBUaW1lcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX3RpbWVvdXRIYW5kbGUpe3ZhciB0PXRoaXMuX3JldHJ5QXQ/TWF0aC5tYXgoMCx0aGlzLl9yZXRyeUF0LURhdGUubm93KCkpOjAsaT1NYXRoLm1heCh0aGlzLl9jb25maWcubWF4QmF0Y2hJbnRlcnZhbCgpLHQpO3RoaXMuX3RpbWVvdXRIYW5kbGU9c2V0VGltZW91dChmdW5jdGlvbigpe2UudHJpZ2dlclNlbmQoKX0saSl9fSxlLnByb3RvdHlwZS50cmlnZ2VyU2VuZD1mdW5jdGlvbihlKXt2YXIgdD0hMDtcImJvb2xlYW5cIj09dHlwZW9mIGUmJih0PWUpO3RyeXtpZih0aGlzLl9idWZmZXIuY291bnQoKT4wKXt2YXIgaT10aGlzLl9idWZmZXIuZ2V0SXRlbXMoKTt0aGlzLl9zZW5kZXIoaSx0KX1jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dEhhbmRsZSksdGhpcy5fdGltZW91dEhhbmRsZT1udWxsLHRoaXMuX3JldHJ5QXQ9bnVsbH1jYXRjaChlKXshbi5nZXRJRVZlcnNpb24oKXx8bi5nZXRJRVZlcnNpb24oKX19LGUucHJvdG90eXBlLl9zZXRSZXRyeVRpbWU9ZnVuY3Rpb24oKXt2YXIgZTtpZih0aGlzLl9jb25zZWN1dGl2ZUVycm9yczw9MSllPTEwO2Vsc2V7dmFyIHQ9KE1hdGgucG93KDIsdGhpcy5fY29uc2VjdXRpdmVFcnJvcnMpLTEpLzIsaT1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdCoxMCkrMTtlPU1hdGgubWF4KE1hdGgubWluKGksMzYwMCksMTApfXZhciBuPURhdGUubm93KCkrMWUzKmU7dGhpcy5fcmV0cnlBdD1ufSxlLnByb3RvdHlwZS5fcGFyc2VSZXNwb25zZT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9SlNPTi5wYXJzZShlKTtpZih0JiZ0Lml0ZW1zUmVjZWl2ZWQmJnQuaXRlbXNSZWNlaXZlZD49dC5pdGVtc0FjY2VwdGVkJiZ0Lml0ZW1zUmVjZWl2ZWQtdC5pdGVtc0FjY2VwdGVkPT10LmVycm9ycy5sZW5ndGgpcmV0dXJuIHR9Y2F0Y2goZSl7fXJldHVybiBudWxsfSxlLnByb3RvdHlwZS5faXNSZXRyaWFibGU9ZnVuY3Rpb24oZSl7cmV0dXJuIDQwOD09ZXx8NDI5PT1lfHw1MDA9PWV8fDUwMz09ZX0sZS5wcm90b3R5cGUuX3Jlc2VuZFBheWxvYWQ9ZnVuY3Rpb24oZSl7aWYoZSYmMCE9PWUubGVuZ3RoKXt0aGlzLl9idWZmZXIuY2xlYXJTZW50KGUpLHRoaXMuX2NvbnNlY3V0aXZlRXJyb3JzKys7Zm9yKHZhciB0PTAsaT1lO3Q8aS5sZW5ndGg7dCsrKXt2YXIgbj1pW3RdO3RoaXMuX2J1ZmZlci5lbnF1ZXVlKG4pfXRoaXMuX3NldFJldHJ5VGltZSgpLHRoaXMuX3NldHVwVGltZXIoKX19LGUucHJvdG90eXBlLl94aHJTZW5kZXI9ZnVuY3Rpb24odCxpKXt2YXIgbj10aGlzLHI9bmV3IFhNTEh0dHBSZXF1ZXN0O3JbZS5EaXNhYmxlZFByb3BlcnR5TmFtZV09ITAsci5vcGVuKFwiUE9TVFwiLHRoaXMuX2NvbmZpZy5lbmRwb2ludFVybCgpLGkpLHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24vanNvblwiKSxyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3JldHVybiBuLl94aHJSZWFkeVN0YXRlQ2hhbmdlKHIsdCx0Lmxlbmd0aCl9LHIub25lcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gbi5fb25FcnJvcih0LHIucmVzcG9uc2VUZXh0fHxyLnJlc3BvbnNlfHxcIlwiLGUpfTt2YXIgbz10aGlzLl9idWZmZXIuYmF0Y2hQYXlsb2Fkcyh0KTtyLnNlbmQobyksdGhpcy5fYnVmZmVyLm1hcmtBc1NlbnQodCl9LGUucHJvdG90eXBlLl9mZXRjaFNlbmRlcj1mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMsbj1uZXcgSGVhZGVycztuLmFwcGVuZChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24vanNvblwiKTt2YXIgcj17bWV0aG9kOlwiUE9TVFwiLGJvZHk6dGhpcy5fYnVmZmVyLmJhdGNoUGF5bG9hZHMoZSksaGVhZGVyczpufSxvPW5ldyBSZXF1ZXN0KHRoaXMuX2NvbmZpZy5lbmRwb2ludFVybCgpLHIpO2ZldGNoKG8pLnRoZW4oZnVuY3Rpb24odCl7aWYoIXQub2spdGhyb3cgbmV3IEVycm9yKFwiUmVxdWVzdCBmYWlsZWQgd2l0aCA8XCIrdC5zdGF0dXMrXCI+IFwiK3Quc3RhdHVzVGV4dCk7aS5fY29uc2VjdXRpdmVFcnJvcnM9MCxpLl9vblN1Y2Nlc3MoZSxlLmxlbmd0aCksaS5fYnVmZmVyLm1hcmtBc1NlbnQoZSl9KS5jYXRjaChmdW5jdGlvbih0KXtpLl9vbkVycm9yKGUsdC5tZXNzYWdlKX0pfSxlLnByb3RvdHlwZS5feGRyU2VuZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxuPW5ldyBYRG9tYWluUmVxdWVzdDtuLm9ubG9hZD1mdW5jdGlvbigpe3JldHVybiBpLl94ZHJPbkxvYWQobixlKX0sbi5vbmVycm9yPWZ1bmN0aW9uKHQpe3JldHVybiBpLl9vbkVycm9yKGUsbi5yZXNwb25zZVRleHR8fFwiXCIsdCl9O3ZhciByPXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtpZigwPT09dGhpcy5fY29uZmlnLmVuZHBvaW50VXJsKCkubGFzdEluZGV4T2YociwwKSl7dmFyIG89dGhpcy5fY29uZmlnLmVuZHBvaW50VXJsKCkucmVwbGFjZSgvXihodHRwcz86KS8sXCJcIik7bi5vcGVuKFwiUE9TVFwiLG8pO3ZhciBzPXRoaXMuX2J1ZmZlci5iYXRjaFBheWxvYWRzKGUpO24uc2VuZChzKSx0aGlzLl9idWZmZXIubWFya0FzU2VudChlKX1lbHNlIHRoaXMuX2J1ZmZlci5jbGVhcigpfSxlLnByb3RvdHlwZS5feGhyUmVhZHlTdGF0ZUNoYW5nZT1mdW5jdGlvbihlLHQsaSl7aWYoND09PWUucmVhZHlTdGF0ZSlpZigoZS5zdGF0dXM8MjAwfHxlLnN0YXR1cz49MzAwKSYmMCE9PWUuc3RhdHVzKSF0aGlzLl9jb25maWcuaXNSZXRyeURpc2FibGVkKCkmJnRoaXMuX2lzUmV0cmlhYmxlKGUuc3RhdHVzKT90aGlzLl9yZXNlbmRQYXlsb2FkKHQpOnRoaXMuX29uRXJyb3IodCxlLnJlc3BvbnNlVGV4dHx8ZS5yZXNwb25zZXx8XCJcIik7ZWxzZSBpZigyMDY9PT1lLnN0YXR1cyl7dmFyIG49dGhpcy5fcGFyc2VSZXNwb25zZShlLnJlc3BvbnNlVGV4dHx8ZS5yZXNwb25zZSk7biYmIXRoaXMuX2NvbmZpZy5pc1JldHJ5RGlzYWJsZWQoKT90aGlzLl9vblBhcnRpYWxTdWNjZXNzKHQsbik6dGhpcy5fb25FcnJvcih0LGUucmVzcG9uc2VUZXh0fHxlLnJlc3BvbnNlfHxcIlwiKX1lbHNlIHRoaXMuX2NvbnNlY3V0aXZlRXJyb3JzPTAsdGhpcy5fb25TdWNjZXNzKHQsaSl9LGUucHJvdG90eXBlLl9vbkVycm9yPWZ1bmN0aW9uKGUsdCxpKXt0aGlzLl9idWZmZXIuY2xlYXJTZW50KGUpfSxlLnByb3RvdHlwZS5fb25TdWNjZXNzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fYnVmZmVyLmNsZWFyU2VudChlKX0sZS5EaXNhYmxlZFByb3BlcnR5TmFtZT1cIk1pY3Jvc29mdF9BcHBsaWNhdGlvbkluc2lnaHRzX0J5cGFzc0FqYXhJbnN0cnVtZW50YXRpb25cIixlfSgpO3QuU2VuZGVyPXN9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1pKDIxKSxyPWkoMTkpLG89aSgxOCkscz1pKDE3KSxhPWkoMTYpLGM9aSgxNSksdT1pKDE0KSxsPWkoMTMpLHA9aSgxMiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29uZmlnPWUsdGhpcy5fc2VuZGVyPW5ldyBuLlNlbmRlcihlKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYodGhpcy5fc2Vzc2lvbk1hbmFnZXI9bmV3IGwuU2Vzc2lvbk1hbmFnZXIoZSksdGhpcy5hcHBsaWNhdGlvbj1uZXcgci5BcHBsaWNhdGlvbix0aGlzLmRldmljZT1uZXcgby5EZXZpY2UsdGhpcy5pbnRlcm5hbD1uZXcgcy5JbnRlcm5hbCx0aGlzLmxvY2F0aW9uPW5ldyBhLkFwcEluc2lnaHRzTG9jYXRpb24sdGhpcy51c2VyPW5ldyB1LlVzZXIoZSksdGhpcy5zZXNzaW9uPW5ldyBsLlNlc3Npb24pLHRoaXMub3BlcmF0aW9uPW5ldyBjLk9wZXJhdGlvbn1yZXR1cm4gZS5wcm90b3R5cGUudHJhY2s9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2Vzc2lvbiYmXCJzdHJpbmdcIiE9dHlwZW9mIHRoaXMuc2Vzc2lvbi5pZCYmdGhpcy5fc2Vzc2lvbk1hbmFnZXIudXBkYXRlKCksdGhpcy5fdHJhY2soZSksZX0sZS5wcm90b3R5cGUuX3RyYWNrPWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbiYmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnNlc3Npb24uaWQ/dGhpcy5fYXBwbHlTZXNzaW9uQ29udGV4dChlLHRoaXMuc2Vzc2lvbik6dGhpcy5fYXBwbHlTZXNzaW9uQ29udGV4dChlLHRoaXMuX3Nlc3Npb25NYW5hZ2VyLmF1dG9tYXRpY1Nlc3Npb24pKSx0aGlzLl9hcHBseUFwcGxpY2F0aW9uQ29udGV4dChlLHRoaXMuYXBwbGljYXRpb24pLHRoaXMuX2FwcGx5RGV2aWNlQ29udGV4dChlLHRoaXMuZGV2aWNlKSx0aGlzLl9hcHBseUludGVybmFsQ29udGV4dChlLHRoaXMuaW50ZXJuYWwpLHRoaXMuX2FwcGx5QXBwSW5zaWdodHNMb2NhdGlvbkNvbnRleHQoZSx0aGlzLmxvY2F0aW9uKSx0aGlzLl9hcHBseVVzZXJDb250ZXh0KGUsdGhpcy51c2VyKSx0aGlzLl9hcHBseU9wZXJhdGlvbkNvbnRleHQoZSx0aGlzLm9wZXJhdGlvbiksZS5pS2V5PXRoaXMuX2NvbmZpZy5pbnN0cnVtZW50YXRpb25LZXkoKTt2YXIgdD10aGlzLl9jb25maWcuaW5zdHJ1bWVudGF0aW9uS2V5KCkucmVwbGFjZSgvLS9nLFwiXCIpO3JldHVybiBlLm5hbWU9ZS5uYW1lLnJlcGxhY2UoXCJ7MH1cIix0KSx0aGlzLl9zZW5kZXIuc2VuZChlKSxlfSxlLnByb3RvdHlwZS5fYXBwbHlBcHBsaWNhdGlvbkNvbnRleHQ9ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgaT1uZXcgcC5Db250ZXh0VGFnS2V5cztcInN0cmluZ1wiPT10eXBlb2YgdC52ZXImJihlLnRhZ3NbaS5hcHBsaWNhdGlvblZlcnNpb25dPXQudmVyKSxcInN0cmluZ1wiPT10eXBlb2YgdC5idWlsZCYmKGUudGFnc1tpLmFwcGxpY2F0aW9uQnVpbGRdPXQuYnVpbGQpfX0sZS5wcm90b3R5cGUuX2FwcGx5RGV2aWNlQ29udGV4dD1mdW5jdGlvbihlLHQpe3ZhciBpPW5ldyBwLkNvbnRleHRUYWdLZXlzO3QmJihcInN0cmluZ1wiPT10eXBlb2YgdC5pZCYmKGUudGFnc1tpLmRldmljZUlkXT10LmlkKSxcInN0cmluZ1wiPT10eXBlb2YgdC5pcCYmKGUudGFnc1tpLmRldmljZUlwXT10LmlwKSxcInN0cmluZ1wiPT10eXBlb2YgdC5sYW5ndWFnZSYmKGUudGFnc1tpLmRldmljZUxhbmd1YWdlXT10Lmxhbmd1YWdlKSxcInN0cmluZ1wiPT10eXBlb2YgdC5sb2NhbGUmJihlLnRhZ3NbaS5kZXZpY2VMb2NhbGVdPXQubG9jYWxlKSxcInN0cmluZ1wiPT10eXBlb2YgdC5tb2RlbCYmKGUudGFnc1tpLmRldmljZU1vZGVsXT10Lm1vZGVsKSx2b2lkIDAhPT10Lm5ldHdvcmsmJihlLnRhZ3NbaS5kZXZpY2VOZXR3b3JrXT10Lm5ldHdvcmspLFwic3RyaW5nXCI9PXR5cGVvZiB0Lm9lbU5hbWUmJihlLnRhZ3NbaS5kZXZpY2VPRU1OYW1lXT10Lm9lbU5hbWUpLFwic3RyaW5nXCI9PXR5cGVvZiB0Lm9zJiYoZS50YWdzW2kuZGV2aWNlT1NdPXQub3MpLFwic3RyaW5nXCI9PXR5cGVvZiB0Lm9zdmVyc2lvbiYmKGUudGFnc1tpLmRldmljZU9TVmVyc2lvbl09dC5vc3ZlcnNpb24pLFwic3RyaW5nXCI9PXR5cGVvZiB0LnJlc29sdXRpb24mJihlLnRhZ3NbaS5kZXZpY2VTY3JlZW5SZXNvbHV0aW9uXT10LnJlc29sdXRpb24pLFwic3RyaW5nXCI9PXR5cGVvZiB0LnR5cGUmJihlLnRhZ3NbaS5kZXZpY2VUeXBlXT10LnR5cGUpKX0sZS5wcm90b3R5cGUuX2FwcGx5SW50ZXJuYWxDb250ZXh0PWZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIGk9bmV3IHAuQ29udGV4dFRhZ0tleXM7XCJzdHJpbmdcIj09dHlwZW9mIHQuYWdlbnRWZXJzaW9uJiYoZS50YWdzW2kuaW50ZXJuYWxBZ2VudFZlcnNpb25dPXQuYWdlbnRWZXJzaW9uKSxcInN0cmluZ1wiPT10eXBlb2YgdC5zZGtWZXJzaW9uJiYoZS50YWdzW2kuaW50ZXJuYWxTZGtWZXJzaW9uXT10LnNka1ZlcnNpb24pfX0sZS5wcm90b3R5cGUuX2FwcGx5QXBwSW5zaWdodHNMb2NhdGlvbkNvbnRleHQ9ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgaT1uZXcgcC5Db250ZXh0VGFnS2V5cztcInN0cmluZ1wiPT10eXBlb2YgdC5pcCYmKGUudGFnc1tpLmxvY2F0aW9uSXBdPXQuaXApfX0sZS5wcm90b3R5cGUuX2FwcGx5T3BlcmF0aW9uQ29udGV4dD1mdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBpPW5ldyBwLkNvbnRleHRUYWdLZXlzO1wic3RyaW5nXCI9PXR5cGVvZiB0LmlkJiYoZS50YWdzW2kub3BlcmF0aW9uSWRdPXQuaWQpLFwic3RyaW5nXCI9PXR5cGVvZiB0Lm5hbWUmJihlLnRhZ3NbaS5vcGVyYXRpb25OYW1lXT10Lm5hbWUpLFwic3RyaW5nXCI9PXR5cGVvZiB0LnBhcmVudElkJiYoZS50YWdzW2kub3BlcmF0aW9uUGFyZW50SWRdPXQucGFyZW50SWQpLFwic3RyaW5nXCI9PXR5cGVvZiB0LnJvb3RJZCYmKGUudGFnc1tpLm9wZXJhdGlvblJvb3RJZF09dC5yb290SWQpLFwic3RyaW5nXCI9PXR5cGVvZiB0LnN5bnRoZXRpY1NvdXJjZSYmKGUudGFnc1tpLm9wZXJhdGlvblN5bnRoZXRpY1NvdXJjZV09dC5zeW50aGV0aWNTb3VyY2UpfX0sZS5wcm90b3R5cGUuX2FwcGx5U2Vzc2lvbkNvbnRleHQ9ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgaT1uZXcgcC5Db250ZXh0VGFnS2V5cztcInN0cmluZ1wiPT10eXBlb2YgdC5pZCYmKGUudGFnc1tpLnNlc3Npb25JZF09dC5pZCksdm9pZCAwIT09dC5pc0ZpcnN0JiYoZS50YWdzW2kuc2Vzc2lvbklzRmlyc3RdPXQuaXNGaXJzdCl9fSxlLnByb3RvdHlwZS5fYXBwbHlVc2VyQ29udGV4dD1mdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBpPW5ldyBwLkNvbnRleHRUYWdLZXlzO1wic3RyaW5nXCI9PXR5cGVvZiB0LmFjY291bnRJZCYmKGUudGFnc1tpLnVzZXJBY2NvdW50SWRdPXQuYWNjb3VudElkKSxcInN0cmluZ1wiPT10eXBlb2YgdC5hZ2VudCYmKGUudGFnc1tpLnVzZXJBZ2VudF09dC5hZ2VudCksXCJzdHJpbmdcIj09dHlwZW9mIHQuaWQmJihlLnRhZ3NbaS51c2VySWRdPXQuaWQpLFwic3RyaW5nXCI9PXR5cGVvZiB0LmF1dGhlbnRpY2F0ZWRJZCYmKGUudGFnc1tpLnVzZXJBdXRoVXNlcklkXT10LmF1dGhlbnRpY2F0ZWRJZCksXCJzdHJpbmdcIj09dHlwZW9mIHQuc3RvcmVSZWdpb24mJihlLnRhZ3NbaS51c2VyU3RvcmVSZWdpb25dPXQuc3RvcmVSZWdpb24pfX0sZX0oKTt0LlRlbGVtZXRyeUNvbnRleHQ9Zn0sZnVuY3Rpb24oZSx0LGkpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWkoMCkscj1pKDIyKSxvPWkoMTEpLHM9aSg5KSxhPWkoMyksYz1pKDUpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBpPXRoaXM7dGhpcy5jb25maWc9dHx8e307dmFyIG49ZS5kZWZhdWx0Q29uZmlnO2lmKHZvaWQgMCE9PW4pZm9yKHZhciBvIGluIG4pdm9pZCAwPT09dGhpcy5jb25maWdbb10mJih0aGlzLmNvbmZpZ1tvXT1uW29dKTt2YXIgcz17aW5zdHJ1bWVudGF0aW9uS2V5OmZ1bmN0aW9uKCl7cmV0dXJuIGkuY29uZmlnLmluc3RydW1lbnRhdGlvbktleX0sc2Vzc2lvblJlbmV3YWxNczpmdW5jdGlvbigpe3JldHVybiBpLmNvbmZpZy5zZXNzaW9uUmVuZXdhbE1zfSxzZXNzaW9uRXhwaXJhdGlvbk1zOmZ1bmN0aW9uKCl7cmV0dXJuIGkuY29uZmlnLnNlc3Npb25FeHBpcmF0aW9uTXN9LGVuZHBvaW50VXJsOmZ1bmN0aW9uKCl7cmV0dXJuIGkuY29uZmlnLmVuZHBvaW50VXJsfSxtYXhCYXRjaFNpemVJbkJ5dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuY29uZmlnLm1heEJhdGNoU2l6ZUluQnl0ZXN9LG1heEJhdGNoSW50ZXJ2YWw6ZnVuY3Rpb24oKXtyZXR1cm4gaS5jb25maWcubWF4QmF0Y2hJbnRlcnZhbH0sY29va2llRG9tYWluOmZ1bmN0aW9uKCl7cmV0dXJuIGkuY29uZmlnLmNvb2tpZURvbWFpbn0sZW5hYmxlU2Vzc2lvblN0b3JhZ2VCdWZmZXI6ZnVuY3Rpb24oKXtyZXR1cm4gaS5jb25maWcuZW5hYmxlU2Vzc2lvblN0b3JhZ2VCdWZmZXJ9LGlzUmV0cnlEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiBpLmNvbmZpZy5pc1JldHJ5RGlzYWJsZWR9fTt0aGlzLmNvbnRleHQ9bmV3IHIuVGVsZW1ldHJ5Q29udGV4dChzKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixmdW5jdGlvbigpe3JldHVybiBpLmZsdXNoKCl9KX1yZXR1cm4gZS5wcm90b3R5cGUudHJhY2tFdmVudD1mdW5jdGlvbihlLHQsaSl7dHJ5e3ZhciBuPW5ldyBvLlRlbGVtZXRyeUV2ZW50KGUsdCxpKSxyPW5ldyBjLkRhdGEoby5UZWxlbWV0cnlFdmVudC5kYXRhVHlwZSxuKSx1PW5ldyBhLkVudmVsb3BlKHIscy5UZWxlbWV0cnlFeGNlcHRpb24uZW52ZWxvcGVUeXBlKTt0aGlzLmNvbnRleHQudHJhY2sodSl9Y2F0Y2goZSl7fX0sZS5wcm90b3R5cGUudHJhY2tFeGNlcHRpb249ZnVuY3Rpb24oZSx0LGkscil7dHJ5e2lmKCFuLmlzRXJyb3IoZSkpdHJ5e3Rocm93IG5ldyBFcnJvcihlKX1jYXRjaCh0KXtlPXR9dmFyIG89bmV3IHMuVGVsZW1ldHJ5RXhjZXB0aW9uKGUsdCxpLHIpLHU9bmV3IGMuRGF0YShzLlRlbGVtZXRyeUV4Y2VwdGlvbi5kYXRhVHlwZSxvKSxsPW5ldyBhLkVudmVsb3BlKHUscy5UZWxlbWV0cnlFeGNlcHRpb24uZW52ZWxvcGVUeXBlKTt0aGlzLmNvbnRleHQudHJhY2sobCl9Y2F0Y2goZSl7fX0sZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt0cnl7dGhpcy5jb250ZXh0Ll9zZW5kZXIudHJpZ2dlclNlbmQoKX1jYXRjaChlKXt9fSxlLnByb3RvdHlwZS5zZXRBdXRoZW50aWNhdGVkVXNlckNvbnRleHQ9ZnVuY3Rpb24oZSx0KXt0cnl7dGhpcy5jb250ZXh0LnVzZXIuc2V0QXV0aGVudGljYXRlZFVzZXJDb250ZXh0KGUsdCl9Y2F0Y2goZSl7fX0sZS5wcm90b3R5cGUuY2xlYXJBdXRoZW50aWNhdGVkVXNlckNvbnRleHQ9ZnVuY3Rpb24oKXt0cnl7dGhpcy5jb250ZXh0LnVzZXIuY2xlYXJBdXRoZW50aWNhdGVkVXNlckNvbnRleHQoKX1jYXRjaChlKXt9fSxlLnByb3RvdHlwZS5TZW5kQ09SU0V4Y2VwdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1zLlRlbGVtZXRyeUV4Y2VwdGlvbi5DcmVhdGVTaW1wbGVFeGNlcHRpb24oXCJTY3JpcHQgZXJyb3IuXCIsXCJFcnJvclwiLFwidW5rbm93blwiLFwidW5rbm93blwiLFwiVGhlIGJyb3dzZXIncyBzYW1lLW9yaWdpbiBwb2xpY3kgcHJldmVudHMgdXMgZnJvbSBnZXR0aW5nIHRoZSBkZXRhaWxzIG9mIHRoaXMgZXhjZXB0aW9uLiBUaGUgZXhjZXB0aW9uIG9jY3VycmVkIGluIGEgc2NyaXB0IGxvYWRlZCBmcm9tIGFuIG9yaWdpbiBkaWZmZXJlbnQgdGhhbiB0aGUgd2ViIHBhZ2UuIEZvciBjcm9zcy1kb21haW4gZXJyb3IgcmVwb3J0aW5nIHlvdSBjYW4gdXNlIGNyb3Nzb3JpZ2luIGF0dHJpYnV0ZSB0b2dldGhlciB3aXRoIGFwcHJvcHJpYXRlIENPUlMgSFRUUCBoZWFkZXJzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBwbGVhc2Ugc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvLlwiLDAsbnVsbCk7dC5wcm9wZXJ0aWVzPWU7dmFyIGk9bmV3IGMuRGF0YShzLlRlbGVtZXRyeUV4Y2VwdGlvbi5kYXRhVHlwZSx0KSxuPW5ldyBhLkVudmVsb3BlKGkscy5UZWxlbWV0cnlFeGNlcHRpb24uZW52ZWxvcGVUeXBlKTt0aGlzLmNvbnRleHQudHJhY2sobil9LGUucHJvdG90eXBlLl9vbmVycm9yPWZ1bmN0aW9uKGUsdCxpLHIsbyl7dHJ5e3ZhciBzPXt1cmw6dHx8ZG9jdW1lbnQuVVJMfTtpZihuLmlzQ3Jvc3NPcmlnaW5FcnJvcihlLHQsaSxyLG8pKXRoaXMuU2VuZENPUlNFeGNlcHRpb24ocyk7ZWxzZXtpZighbi5pc0Vycm9yKG8pKXt2YXIgYT1cIndpbmRvdy5vbmVycm9yQFwiK3MudXJsK1wiOlwiK2krXCI6XCIrKHJ8fDApOyhvPW5ldyBFcnJvcihlKSkuc3RhY2s9YX10aGlzLnRyYWNrRXhjZXB0aW9uKG8sbnVsbCxzKX19Y2F0Y2goZSl7fX0sZX0oKTt0LkFwcEluc2lnaHRzPXV9LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1pKDIzKSxyPWkoMCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dC5xdWV1ZT10LnF1ZXVlfHxbXTt2YXIgaT10LmNvbmZpZ3x8e307aWYoIWkuaW5zdHJ1bWVudGF0aW9uS2V5KXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBsb2FkIEFwcGxpY2F0aW9uIEluc2lnaHRzIFNESywgbm8gaW5zdHJ1bWVudGF0aW9uS2V5IHdhcyBwcm92aWRlZC5cIik7aT1lLmdldERlZmF1bHRDb25maWcoaSksdGhpcy5zbmlwcGV0PXQsdGhpcy5jb25maWc9aX1yZXR1cm4gZS5wcm90b3R5cGUubG9hZEFwcEluc2lnaHRzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuLkFwcEluc2lnaHRzKHRoaXMuY29uZmlnKX0sZS5nZXREZWZhdWx0Q29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBlfHwoZT17fSksZS5lbmRwb2ludFVybD1lLmVuZHBvaW50VXJsfHxcImh0dHBzOi8vZGMuc2VydmljZXMudmlzdWFsc3R1ZGlvLmNvbS92Mi90cmFja1wiLGUuc2Vzc2lvblJlbmV3YWxNcz0xOGU1LGUuc2Vzc2lvbkV4cGlyYXRpb25Ncz04NjRlNSxlLm1heEJhdGNoU2l6ZUluQnl0ZXM9ZS5tYXhCYXRjaFNpemVJbkJ5dGVzPjA/ZS5tYXhCYXRjaFNpemVJbkJ5dGVzOjFlNixlLm1heEJhdGNoSW50ZXJ2YWw9aXNOYU4oZS5tYXhCYXRjaEludGVydmFsKT8xNWUzOmUubWF4QmF0Y2hJbnRlcnZhbCxlLmVuYWJsZVNlc3Npb25TdG9yYWdlQnVmZmVyPXZvaWQgMD09PWUuZW5hYmxlU2Vzc2lvblN0b3JhZ2VCdWZmZXJ8fG51bGw9PT1lLmVuYWJsZVNlc3Npb25TdG9yYWdlQnVmZmVyfHxyLnN0cmluZ1RvQm9vbE9yRGVmYXVsdChlLmVuYWJsZVNlc3Npb25TdG9yYWdlQnVmZmVyKSxlLmlzUmV0cnlEaXNhYmxlZD12b2lkIDAhPT1lLmlzUmV0cnlEaXNhYmxlZCYmbnVsbCE9PWUuaXNSZXRyeURpc2FibGVkJiZyLnN0cmluZ1RvQm9vbE9yRGVmYXVsdChlLmlzUmV0cnlEaXNhYmxlZCksZX0sZX0oKTt0LmdldEFwcEluc2lnaHRzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbyh7Y29uZmlnOmV9KS5sb2FkQXBwSW5zaWdodHMoKX19LGZ1bmN0aW9uKGUsdCxpKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1pKDI0KTt0LmdldEFwcEluc2lnaHRzPW4uZ2V0QXBwSW5zaWdodHN9XSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@mindbox/applicationinsights-js/dist/index.js\n");

/***/ }),

/***/ "./node_modules/@mindbox/services-responses-ts/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@mindbox/services-responses-ts/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("﻿module.exports = __webpack_require__(/*! ./js/responses.js */ \"./node_modules/@mindbox/services-responses-ts/js/responses.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1pbmRib3gvc2VydmljZXMtcmVzcG9uc2VzLXRzL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtaW5kYm94L3NlcnZpY2VzLXJlc3BvbnNlcy10cy9pbmRleC5qcz9hODcyIl0sInNvdXJjZXNDb250ZW50IjpbIu+7v21vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9qcy9yZXNwb25zZXMuanMnKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@mindbox/services-responses-ts/index.js\n");

/***/ }),

/***/ "./node_modules/@mindbox/services-responses-ts/js/responses.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@mindbox/services-responses-ts/js/responses.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar ServiceResponses = (function () {\r\n    function ServiceResponses() {\r\n    }\r\n    ServiceResponses.isError = function (response) {\r\n        return response.status === \"ProtocolError\" || response.status === \"InternalServerError\";\r\n    };\r\n    ServiceResponses.isValidationError = function (response) {\r\n        return response.status === \"ValidationError\";\r\n    };\r\n    ServiceResponses.isSuccess = function (response) {\r\n        return response.status === \"Success\";\r\n    };\r\n    return ServiceResponses;\r\n}());\r\nexports.ServiceResponses = ServiceResponses;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1pbmRib3gvc2VydmljZXMtcmVzcG9uc2VzLXRzL2pzL3Jlc3BvbnNlcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWluZGJveC9zZXJ2aWNlcy1yZXNwb25zZXMtdHMvanMvcmVzcG9uc2VzLmpzPzYwODMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBTZXJ2aWNlUmVzcG9uc2VzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNlcnZpY2VSZXNwb25zZXMoKSB7XHJcbiAgICB9XHJcbiAgICBTZXJ2aWNlUmVzcG9uc2VzLmlzRXJyb3IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzID09PSBcIlByb3RvY29sRXJyb3JcIiB8fCByZXNwb25zZS5zdGF0dXMgPT09IFwiSW50ZXJuYWxTZXJ2ZXJFcnJvclwiO1xyXG4gICAgfTtcclxuICAgIFNlcnZpY2VSZXNwb25zZXMuaXNWYWxpZGF0aW9uRXJyb3IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzID09PSBcIlZhbGlkYXRpb25FcnJvclwiO1xyXG4gICAgfTtcclxuICAgIFNlcnZpY2VSZXNwb25zZXMuaXNTdWNjZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJTdWNjZXNzXCI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlcnZpY2VSZXNwb25zZXM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU2VydmljZVJlc3BvbnNlcyA9IFNlcnZpY2VSZXNwb25zZXM7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@mindbox/services-responses-ts/js/responses.js\n");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcz9mMjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/process/browser.js\n");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n");

/***/ })

/******/ });
